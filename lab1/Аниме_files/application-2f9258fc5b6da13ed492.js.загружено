/*! For license information please see application-2f9258fc5b6da13ed492.js.LICENSE.txt */
!function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(p&&p(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={application:0},o={application:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{4:1,5:1,6:1,7:1,8:1,9:1,"vendors_async-shiki-editor":1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({aligned_posters:"aligned_posters",animes_cosplay:"animes_cosplay","app-edit_styles":"app-edit_styles","app-swiper":"app-swiper",cutted_covers:"cutted_covers",db_entries_menu:"db_entries_menu",db_entries_show:"db_entries_show",galleries:"galleries",html5player:"html5player",reviews_navigation:"reviews_navigation",shiki_editor_v1:"shiki_editor_v1",pikaday:"pikaday","vendors_async-vue~shiki-editor~vuex":"vendors_async-vue~shiki-editor~vuex","vendors_async-cropper.js":"vendors_async-cropper.js","vendors_async-shiki-editor":"vendors_async-shiki-editor","vendors_async-d3~franchise":"vendors_async-d3~franchise",franchise:"franchise","vendors_async-diff-match-patch":"vendors_async-diff-match-patch","vendors_async-highcharts":"vendors_async-highcharts","vendors_async-sortable.esm.js":"vendors_async-sortable.esm.js","vendors_async-vuex":"vendors_async-vuex","vendors_async-vuedraggable.umd.js":"vendors_async-vuedraggable.umd.js","vendors_async-vue-tags-input.js":"vendors_async-vue-tags-input.js","vendors_async-uppy":"vendors_async-uppy",codemirror5:"codemirror5","vendors_async-codemirror~coremirror":"vendors_async-codemirror~coremirror","vendors_async-coremirror":"vendors_async-coremirror","vendors_async-nouislider.js":"vendors_async-nouislider.js","app-imageboards_loader":"app-imageboards_loader","vendors_async-lowlight":"vendors_async-lowlight","vendors_async-scroll-lock":"vendors_async-scroll-lock","vendors_async-vue3-perfect-scrollbar":"vendors_async-vue3-perfect-scrollbar"}[e]||e)+"-"+{0:"31d6cfe0",1:"31d6cfe0",2:"31d6cfe0",3:"31d6cfe0",4:"d1d7835d",5:"0b2bad57",6:"f9ad5eaa",7:"78021b76",8:"442b74e7",9:"17aa666b",10:"31d6cfe0",11:"31d6cfe0",aligned_posters:"31d6cfe0",animes_cosplay:"31d6cfe0","app-edit_styles":"31d6cfe0","app-swiper":"31d6cfe0",cutted_covers:"31d6cfe0",db_entries_menu:"31d6cfe0",db_entries_show:"31d6cfe0",galleries:"31d6cfe0",html5player:"31d6cfe0",reviews_navigation:"31d6cfe0",shiki_editor_v1:"31d6cfe0",pikaday:"31d6cfe0","vendors_async-vue~shiki-editor~vuex":"31d6cfe0","vendors_async-cropper.js":"31d6cfe0","vendors_async-shiki-editor":"cec97e10","vendors_async-d3~franchise":"31d6cfe0",franchise:"31d6cfe0","vendors_async-diff-match-patch":"31d6cfe0","vendors_async-highcharts":"31d6cfe0","vendors_async-sortable.esm.js":"31d6cfe0","vendors_async-vuex":"31d6cfe0","vendors_async-vuedraggable.umd.js":"31d6cfe0","vendors_async-vue-tags-input.js":"31d6cfe0","vendors_async-uppy":"31d6cfe0",codemirror5:"31d6cfe0","vendors_async-codemirror~coremirror":"31d6cfe0","vendors_async-coremirror":"31d6cfe0","vendors_async-nouislider.js":"31d6cfe0","app-imageboards_loader":"31d6cfe0","vendors_async-lowlight":"31d6cfe0","vendors_async-scroll-lock":"31d6cfe0","vendors_async-vue3-perfect-scrollbar":"31d6cfe0"}[e]+".chunk.css",o=s.p+r,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=(p=a[c]).getAttribute("data-href")||p.getAttribute("href");if("stylesheet"===p.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){var p;if((u=(p=l[c]).getAttribute("data-href"))===r||u===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete i[e],d.parentNode.removeChild(d),n(a)},d.href=o,document.getElementsByTagName("head")[0].appendChild(d)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+"js/"+({aligned_posters:"aligned_posters",animes_cosplay:"animes_cosplay","app-edit_styles":"app-edit_styles","app-swiper":"app-swiper",cutted_covers:"cutted_covers",db_entries_menu:"db_entries_menu",db_entries_show:"db_entries_show",galleries:"galleries",html5player:"html5player",reviews_navigation:"reviews_navigation",shiki_editor_v1:"shiki_editor_v1",pikaday:"pikaday","vendors_async-vue~shiki-editor~vuex":"vendors_async-vue~shiki-editor~vuex","vendors_async-cropper.js":"vendors_async-cropper.js","vendors_async-shiki-editor":"vendors_async-shiki-editor","vendors_async-d3~franchise":"vendors_async-d3~franchise",franchise:"franchise","vendors_async-diff-match-patch":"vendors_async-diff-match-patch","vendors_async-highcharts":"vendors_async-highcharts","vendors_async-sortable.esm.js":"vendors_async-sortable.esm.js","vendors_async-vuex":"vendors_async-vuex","vendors_async-vuedraggable.umd.js":"vendors_async-vuedraggable.umd.js","vendors_async-vue-tags-input.js":"vendors_async-vue-tags-input.js","vendors_async-uppy":"vendors_async-uppy",codemirror5:"codemirror5","vendors_async-codemirror~coremirror":"vendors_async-codemirror~coremirror","vendors_async-coremirror":"vendors_async-coremirror","vendors_async-nouislider.js":"vendors_async-nouislider.js","app-imageboards_loader":"app-imageboards_loader","vendors_async-lowlight":"vendors_async-lowlight","vendors_async-scroll-lock":"vendors_async-scroll-lock","vendors_async-vue3-perfect-scrollbar":"vendors_async-vue3-perfect-scrollbar"}[e]||e)+"-"+{0:"f5912b877beffc639b4a",1:"7efefbfd91f62a11ad88",2:"9c7067a459b14e0bc708",3:"230a8db2379aff4512c3",4:"e1e15e84ec2be80f4ca8",5:"73aa4d450344b56ef3e7",6:"2927288417f23e9737f1",7:"2038f46f3381b3a1908c",8:"f195d4fa7df499cb8b65",9:"48c9f7a533000d31395f",10:"d9b29d58eb96027cd295",11:"56e857a9c44704c0de2b",aligned_posters:"2b45a663714b9abb543e",animes_cosplay:"7dc70bee33fa155d6732","app-edit_styles":"12464fd7764174fab94b","app-swiper":"06d0786c2347d24cfd14",cutted_covers:"2407dd19d8baa7a706d0",db_entries_menu:"2b95bf927cf9e54a88dc",db_entries_show:"e144b28360d403342590",galleries:"c25149720aaefac9741b",html5player:"2eb28fd8e78f54c950ee",reviews_navigation:"794a6dc75a7f10928a3b",shiki_editor_v1:"c5e507c0deb57b000c3c",pikaday:"18cc006736ec048c1d9b","vendors_async-vue~shiki-editor~vuex":"39754b6bfec0cf0fc586","vendors_async-cropper.js":"b935cb745abab6161e44","vendors_async-shiki-editor":"2e4414a16fb453ba464b","vendors_async-d3~franchise":"59fa8c3e0140e4c6aab2",franchise:"fd547380763284a27f86","vendors_async-diff-match-patch":"17ef11106611919bce1a","vendors_async-highcharts":"bbdc362ec58913a2b08e","vendors_async-sortable.esm.js":"2522bf51542d89e9e9d1","vendors_async-vuex":"0dda71d1352941429772","vendors_async-vuedraggable.umd.js":"8f5ad6f8973f9a7d6340","vendors_async-vue-tags-input.js":"a3f5911e92ac4caabb6c","vendors_async-uppy":"c46a76f45a48f04682b8",codemirror5:"35d9b3d3596c9f3bcdc2","vendors_async-codemirror~coremirror":"8a238efb9a498b8fac9c","vendors_async-coremirror":"fa14011ec0c8fb05edd8","vendors_async-nouislider.js":"63e87a6e5252ce0b997d","app-imageboards_loader":"46bec9f73872ebca24f5","vendors_async-lowlight":"c8a4f9a7be795504d666","vendors_async-scroll-lock":"28d8307d83ac69d7070d","vendors_async-vue3-perfect-scrollbar":"9a3ea02b5517c5f5108b"}[e]+".chunk.js"}(e);var u=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/packs/",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=u;a.push(["./app/packs/entrypoints/application.js","vendors"]),n()}({"./app/packs/entrypoints/application.js":function(e,t,n){"use strict";n.r(t),function(e){n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.symbol.async-iterator.js"),n("./node_modules/core-js/modules/es.symbol.has-instance.js"),n("./node_modules/core-js/modules/es.symbol.match.js"),n("./node_modules/core-js/modules/es.symbol.replace.js"),n("./node_modules/core-js/modules/es.symbol.search.js"),n("./node_modules/core-js/modules/es.symbol.species.js"),n("./node_modules/core-js/modules/es.symbol.split.js"),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.array.filter.js"),n("./node_modules/core-js/modules/es.array.flat.js"),n("./node_modules/core-js/modules/es.array.flat-map.js"),n("./node_modules/core-js/modules/es.array.from.js"),n("./node_modules/core-js/modules/es.array.includes.js"),n("./node_modules/core-js/modules/es.array.index-of.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.array.last-index-of.js"),n("./node_modules/core-js/modules/es.array.map.js"),n("./node_modules/core-js/modules/es.array.reduce.js"),n("./node_modules/core-js/modules/es.array.reduce-right.js"),n("./node_modules/core-js/modules/es.array.slice.js"),n("./node_modules/core-js/modules/es.array.sort.js"),n("./node_modules/core-js/modules/es.array.species.js"),n("./node_modules/core-js/modules/es.array.splice.js"),n("./node_modules/core-js/modules/es.array.unscopables.flat.js"),n("./node_modules/core-js/modules/es.array.unscopables.flat-map.js"),n("./node_modules/core-js/modules/es.function.has-instance.js"),n("./node_modules/core-js/modules/es.json.to-string-tag.js"),n("./node_modules/core-js/modules/es.map.js"),n("./node_modules/core-js/modules/es.math.acosh.js"),n("./node_modules/core-js/modules/es.math.hypot.js"),n("./node_modules/core-js/modules/es.math.to-string-tag.js"),n("./node_modules/core-js/modules/es.object.define-getter.js"),n("./node_modules/core-js/modules/es.object.define-setter.js"),n("./node_modules/core-js/modules/es.object.entries.js"),n("./node_modules/core-js/modules/es.object.from-entries.js"),n("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("./node_modules/core-js/modules/es.object.lookup-getter.js"),n("./node_modules/core-js/modules/es.object.lookup-setter.js"),n("./node_modules/core-js/modules/es.object.values.js"),n("./node_modules/core-js/modules/es.promise.js"),n("./node_modules/core-js/modules/es.promise.finally.js"),n("./node_modules/core-js/modules/es.regexp.constructor.js"),n("./node_modules/core-js/modules/es.regexp.exec.js"),n("./node_modules/core-js/modules/es.regexp.flags.js"),n("./node_modules/core-js/modules/es.regexp.to-string.js"),n("./node_modules/core-js/modules/es.set.js"),n("./node_modules/core-js/modules/es.string.ends-with.js"),n("./node_modules/core-js/modules/es.string.includes.js"),n("./node_modules/core-js/modules/es.string.match.js"),n("./node_modules/core-js/modules/es.string.pad-end.js"),n("./node_modules/core-js/modules/es.string.pad-start.js"),n("./node_modules/core-js/modules/es.string.replace.js"),n("./node_modules/core-js/modules/es.string.search.js"),n("./node_modules/core-js/modules/es.string.split.js"),n("./node_modules/core-js/modules/es.string.starts-with.js"),n("./node_modules/core-js/modules/es.string.trim.js"),n("./node_modules/core-js/modules/es.string.trim-end.js"),n("./node_modules/core-js/modules/es.string.trim-start.js"),n("./node_modules/core-js/modules/es.typed-array.float32-array.js"),n("./node_modules/core-js/modules/es.typed-array.float64-array.js"),n("./node_modules/core-js/modules/es.typed-array.int8-array.js"),n("./node_modules/core-js/modules/es.typed-array.int16-array.js"),n("./node_modules/core-js/modules/es.typed-array.int32-array.js"),n("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),n("./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),n("./node_modules/core-js/modules/es.typed-array.uint16-array.js"),n("./node_modules/core-js/modules/es.typed-array.uint32-array.js"),n("./node_modules/core-js/modules/es.typed-array.from.js"),n("./node_modules/core-js/modules/es.typed-array.iterator.js"),n("./node_modules/core-js/modules/es.typed-array.of.js"),n("./node_modules/core-js/modules/es.typed-array.set.js"),n("./node_modules/core-js/modules/es.typed-array.sort.js"),n("./node_modules/core-js/modules/es.typed-array.to-string.js"),n("./node_modules/core-js/modules/es.weak-map.js"),n("./node_modules/core-js/modules/es.weak-set.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./node_modules/core-js/modules/web.immediate.js"),n("./node_modules/core-js/modules/web.queue-microtask.js"),n("./node_modules/core-js/modules/web.url.js"),n("./node_modules/core-js/modules/web.url.to-json.js"),n("./node_modules/core-js/modules/web.url-search-params.js"),n("./node_modules/regenerator-runtime/runtime.js");var t=n("./app/packs/javascripts/vendor/sugar.js"),r=n.n(t),i=n("./node_modules/webfontloader/webfontloader.js"),o=n.n(i);n("./node_modules/magnific-popup/dist/jquery.magnific-popup.js"),n("./node_modules/magnific-popup/dist/magnific-popup.css"),n("./node_modules/nouislider/dist/nouislider.css"),n("./node_modules/jquery-appear-original/index.js"),n("./node_modules/jquery-mousewheel/jquery.mousewheel.js"),n("./node_modules/codemirror/lib/codemirror.css"),n("./node_modules/codemirror/theme/solarized.css"),n("./node_modules/codemirror/addon/hint/show-hint.css"),n("./node_modules/codemirror/addon/dialog/dialog.css"),n("./node_modules/codemirror/addon/display/fullscreen.css"),n("./node_modules/codemirror/addon/search/matchesonscrollbar.css"),n("./app/packs/javascripts/application.js"),n("./app/packs/javascripts/turbolinks_load.js"),n("./app/packs/javascripts/turbolinks_before_cache.js");r.a.extend(),e((function(){return setTimeout((function(){return o.a.load({google:{families:["Open Sans:400,600,700"]},classes:!1,events:!1})}),50)}));window.$=n("./node_modules/jquery/dist/jquery.js");window.jQuery=n("./node_modules/jquery/dist/jquery.js")}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/application.js":function(e,t,n){"use strict";(function(e,t){var r=n("./node_modules/turbolinks/dist/turbolinks.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=n("./node_modules/throttle-debounce/esm/index.js"),c=n("./app/packs/javascripts/utils/page_load.js"),u=n("./app/packs/javascripts/utils/page_unload.js"),l=n("./app/packs/javascripts/models/shiki_user.js"),p=n("./app/packs/javascripts/services/faye_loader.js"),d=n("./app/packs/javascripts/services/comments_notifier.js"),f=n("./app/packs/javascripts/services/achievements_notifier.js"),h=n("./app/packs/javascripts/utils/bindings.js"),v=(n("./app/packs/javascripts/utils/p.js"),n("./app/packs/javascripts/i18n/translations.js"),n("./app/packs/javascripts/utils/dayjs.js"));i.a.start();var m=n("./app/packs/javascripts/vendor sync ^\\.\\/.*$");m.keys().forEach(m),window.pageLoad=c.a,window.pageUnload=u.a;var y=n("./app/packs/javascripts/jquery.plugins sync recursive ^\\.\\/.*$");y.keys().forEach(y);var _=n("./app/packs/javascripts/pages sync recursive ^\\.\\/.*$");_.keys().forEach(_);var g=n("./app/packs/javascripts/blocks sync recursive ^\\.\\/.*$");g.keys().forEach(g),window.dayjs=v.default,e(document).one("turbolinks:load",(function(){window.JS_EXPORTS||(window.JS_EXPORTS={});var n=e(document.body);window.ENV=n.data("env"),window.SHIKI_USER=new l.a(n.data("user")),window.LOCALE=n.data("locale"),window.FAYE_URL=n.data("faye_url"),window.CAMO_URL=n.data("camo_url"),window.SHIKI_USER&&(window.FAYE_CHANNEL=n.data("faye")),window.I18n=t,t.locale=window.LOCALE,v.default.locale(window.LOCALE),window.MOMENT_DIFF=Object(v.default)(n.data("server_time")).diff(new Date),window.SHIKI_USER.isSignedIn&&!window.SHIKI_FAYE_LOADER&&(window.SHIKI_COMMENTS_NOTIFIER=new d.a,window.SHIKI_ACHIEVEMENTS_NOTIFIER=new f.a,a()(150).then((function(){return window.SHIKI_FAYE_LOADER=new p.a}))),e.appear(".b-appear_marker.active"),e.formNavigate({size:250,message:t.t("frontend.application.sure_to_leave_page")});var r=window.location.hash.match(/^#(comment-\d+)$/);r&&e("a[name=".concat(r[1],"]")).closest(".b-comment").yellowFade();var i=window.innerWidth,o=window.innerHeight;e(window).on("resize",Object(s.a)(500,(function(){i===window.innerWidth&&o===window.innerHeigh||(e(document.body).trigger("resize:debounced"),i=window.innerWidth,o=window.innerHeight)}))),e(window).on("scroll",Object(s.b)(750,(function(){return e(document.body).trigger("scroll:throttled")})))})),e(document).on(Object.keys(h.a).join(" "),(function(e){h.a[e.type].forEach((function(e){var t;t=e.conditions.length&&"."===e.conditions[0][0]?e.conditions.filter((function(e){return"."===e[0]})).map((function(e){return"p-".concat(e.slice(1)," ")})):[],e.conditions.length?(t&&t.some((function(e){return-1!==document.body.className.indexOf(e)}))||e.conditions.some((function(e){return document.body.id===e})))&&e.callback():e.callback()}))})),e(document).on("selectionchange",(function(t){var n,r;(window.getSelection?n=window.getSelection():document.getSelection&&(n=document.getSelection()),n&&n.focusNode)&&(null===(r=e(n.focusNode).closest("[data-selection_boundary]").view())||void 0===r||r.setSelection())}))}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/blocks sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./collapse":"./app/packs/javascripts/blocks/collapse.js","./collapse.js":"./app/packs/javascripts/blocks/collapse.js","./feedback":"./app/packs/javascripts/blocks/feedback.js","./feedback.js":"./app/packs/javascripts/blocks/feedback.js","./menu-toggler":"./app/packs/javascripts/blocks/menu-toggler.js","./menu-toggler.js":"./app/packs/javascripts/blocks/menu-toggler.js","./packery":"./app/packs/javascripts/blocks/packery.js","./packery.js":"./app/packs/javascripts/blocks/packery.js","./postloader":"./app/packs/javascripts/blocks/postloader.js","./postloader.js":"./app/packs/javascripts/blocks/postloader.js","./red_alert":"./app/packs/javascripts/blocks/red_alert.js","./red_alert.js":"./app/packs/javascripts/blocks/red_alert.js","./to_top":"./app/packs/javascripts/blocks/to_top.js","./to_top.js":"./app/packs/javascripts/blocks/to_top.js","./top_menu":"./app/packs/javascripts/blocks/top_menu.js","./top_menu.js":"./app/packs/javascripts/blocks/top_menu.js","./user-defined":"./app/packs/javascripts/blocks/user-defined.js","./user-defined.js":"./app/packs/javascripts/blocks/user-defined.js"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./app/packs/javascripts/blocks sync recursive ^\\.\\/.*$"},"./app/packs/javascripts/blocks/collapse.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/js-cookie/dist/js.cookie.js"),r=n.n(t);e(document).on("click",".collapse",(function(t,n){var i=t.currentTarget,o=e(i),a=!!o.children(".action").html().match(/\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c|\u0441\u043f\u0440\u044f\u0442\u0430\u0442\u044c|collapse|hide/);o.toggleClass("triggered",a);var s=o.next();s.hasClass("collapsed")||(s=s.next());var c=s.next();for(c.exists()||(c=o.parent().next());c.last().next().hasClass("collapse-merged");)c=c.add(c.last().next());if(c.length>1&&(c=c.filter(":not(.collapse-ignored)")),a?(s.show(),c.hide()):(c.show(),s.hide()),o.children(".action").html((function(){var t=e(this);return t.hasClass("half-hidden")&&(a?t.hide():t.show()),a?t.html().replace("\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c","\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c").replace("\u0441\u043f\u0440\u044f\u0442\u0430\u0442\u044c","\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c").replace("hide","show").replace("collapse","expand"):t.html().replace("\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c","\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c").replace("\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c","\u0441\u043f\u0440\u044f\u0442\u0430\u0442\u044c").replace("show","hide").replace("expand","collapse")})),!n){var u=o.attr("id");if(u&&""!==u&&-1!==u.indexOf("-")){var l=u.split("-").slice(1).join("-")+";",p=r.a.get("collapses")||"";a&&-1===p.indexOf(l)?r.a.set("collapses",p+l,{expires:730,path:"/"}):a||-1===p.indexOf(l)||r.a.set("collapses",p.replace(l,""),{expires:730,path:"/"})}}s.next().trigger("show")})),e(document).on("click",".collapsed",(function(t){var n=t.currentTarget,r=e(n).prev();r.hasClass("collapse")||(r=r.prev()),r.trigger("click")})),e(document).on("click",".hide-expanded",(function(t){var n=t.currentTarget;e(n).parent().prev().trigger("click")})),e(document).on("click",".spoiler.target",(function(t){var n=t.currentTarget;e(n).hasClass("dashed")&&e(n).hide().prev().show().prev().show()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/feedback.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./app/packs/javascripts/views/application/shiki_modal.js"),i=n("./node_modules/shiki-utils/index.js");e(document).on("turbolinks:load",(function(){var n=e(".b-feedback");e(".marker-positioner",n).on("ajax:success",(function(n,o){var a=e(o),s=new r.a(a);a.one("mouseover",(function(){var e=a.find("input[data-antispam]");e.length&&e.val(e.data("token").replace("antispam-",""))})).on("ajax:success",(function(){i.flash.notice(t.t("frontend.blocks.feedback.message_sent")),s.close()}))}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/blocks/menu-toggler.js":function(e,t,n){(function(e){e(document).on("turbolinks:load",(function(){var t=e(".menu-toggler");t.exists()&&t.on("click",(function(){e(".l-page").toggleClass("menu-expanded")}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/packery.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}e((function(){return e(window).on("resize:debounced",(function(){return e(".packery").each(s(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e(this).data("packery")).layout(),t.next=4,o()(1250);case 4:n.layout();case 5:case"end":return t.stop()}}),t,this)}))))}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/postloader.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./app/packs/javascripts/utils/axios.js");function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(t,n,r){var i=e(".".concat(r),n).toArray().map((function(e){return e.id})).filter((function(e){return e})).map((function(e){return".".concat(r,"#").concat(e)})).join(",");t.children().filter(i).remove()}e((function(){e.appear(".b-postloader")})),e(document).on("click appear",".b-postloader",function(){var n,r=(n=i.a.mark((function n(r){var a,c,u,l,p,d,f,h,v,m,y,_,g,b,j,w,k,x,O;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.currentTarget,c=r.type,u=e(a),l=(u.data("page")||1)+1,!(u.data("locked")||"appear"===c&&u.data("ignore-appear"))){n.next=5;break}return n.abrupt("return");case 5:return p=t.t("frontend.lib.postloader.loading"),d=u.data("remote"),f=u.data("filter"),u.html('<div class="ajax-loading vk-like" title="'.concat(p,'..." />')).data({locked:!0}),n.next=11,o.a.get(d);case 11:h=n.sent,v=h.data,m=e("<div>").append("".concat(v.content).concat(v.postloader)),f&&s(m,u.parent(),f),u.trigger("postloader:before",[m,v]),(y=m.find(".b-postloader")).attr("data-page",l),l>=(y.data("pages_limit")||100)&&(y.attr("data-locked",!0),_=y.data("pages_limit"),g=y.find("a.prev"),b=g.attr("href"),(j=b.match(/(?:\?|&|\/)page(?:=|\/)(\d+)/))&&(w=parseInt(j[1])+1,(k=w-2*_+1)<0?g.remove():(x=b.replace(/(\?|&|\/)page(=|\/)(\d+)/,"$1page$2".concat(k)).replace(/&page=1$/,"").replace("?page=1&","?").replace(/\?page=1$/,"").replace(/\/page\/1/,"").replace(/\/$/,""),g.attr("href",x)))),O=m.children(),u.replaceWith(O),O.process(v.JS_EXPORTS).first().trigger("postloader:success");case 22:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))});return function(e){return r.apply(this,arguments)}}())}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/blocks/red_alert.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/js-cookie/dist/js.cookie.js"),o=n.n(i),a=n("./node_modules/delay/index.js"),s=n.n(a);function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e(document).on("turbolinks:load",(function(){e(".b-hot_topics-v2.red-alert .b-close").on("click",function(){var t,n=(t=r.a.mark((function t(n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e(".b-hot_topics-v2.red-alert"),o.a.set(e(n.currentTarget).data("cookie-name"),"1",{expires:720}),i.addClass("removing"),t.next=5,s()(1e3);case 5:i.remove();case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}())}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/to_top.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/shiki-utils/index.js"),r=null,i=null,o=!1,a=!1;function s(){o||(e(window).scrollTop()>e(".l-top_menu-v2").height()?null!==r&&!1!==r||(i.addClass("active"),r=!0):c())}function c(){null!==r&&!0!==r||(i.removeClass("active"),r=!1)}e(document).on("turbolinks:load",(function(){Object(t.isMobile)()||(i=e(".b-to-top"),r=null,s(),i.on("click",(function(){c(),o=!0,e("body,html").animate({scrollTop:0},50,(function(){return o=!1}))})),a||(a=!0,e(window).on("scroll:throttled",s)))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/top_menu.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./node_modules/throttle-debounce/esm/index.js"),s=n("./app/packs/javascripts/views/search/global.js"),c=n("./app/packs/javascripts/utils/show_modal.js"),u=n("./app/packs/javascripts/utils/global_handler.js"),l=n("./node_modules/shiki-utils/index.js");function p(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(){e(".l-top_menu-v2.is-search-mobile .search.mobile").addClass("active"),e(".l-top_menu-v2").addClass("is-search-mobile")}function f(){e(".l-top_menu-v2.is-search-mobile .search.mobile").removeClass("active"),e(".l-top_menu-v2").removeClass("is-search-mobile"),window.globalSearch.isActive&&window.globalSearch.cancel()}e(document).on("turbolinks:load",(function(){var t=e(".l-top_menu-v2 .global-search");t.length&&(window.globalSearch=new s.a(t,{showMobileSearch:d,hideMobileSearch:f})),t.find(".clear").on("click",f),e(".l-top_menu-v2 .menu-dropdown").each((function(t,n){var i,s,d=e(n),h=d.children("span"),v=d.children(".submenu").show(),m=v.children("a").on("focus",(function(e){return function(e){e.setAttribute("tabindex",0),e.classList.add("active")}(e.currentTarget)})).on("blur",(function(e){return function(e){e.setAttribute("tabindex",-1),e.classList.remove("active")}(e.currentTarget)})).hover((function(t){var n=t.currentTarget;return e(n).focus()}),(function(t){var n=t.currentTarget;return e(n).blur()})),y=function(t){t.preventDefault(),t.stopImmediatePropagation();var n=m.filter(".active");n.length&&e(m[m.index(n)-1]).focus()},_=function(t){t.preventDefault(),t.stopImmediatePropagation();var n=m.filter(".active");n.length?e(m[m.index(n)+1]).focus():m.first().focus()},g=function(){d.hasClass("active")||(d.addClass("active"),e(".l-top_menu-v2").addClass("is-submenu"),u.a.on("up",y).on("down",_),f())},b=function(){d.removeClass("active"),e(".l-top_menu-v2 .menu-dropdown.active").length||e(".l-top_menu-v2").removeClass("is-submenu"),u.a.off("up",y).off("down",_)},j=!!h.children("a").length;Object(c.a)({$modal:v,$outerNode:d,$trigger:h,show:g,hide:(i=r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.next=3,o()();case 3:h.blur();case 4:case"end":return e.stop()}}),e)})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){p(o,n,r,a,s,"next",e)}function s(e){p(o,n,r,a,s,"throw",e)}a(void 0)}))},function(){return s.apply(this,arguments)}),isIgnored:function(){return!Object(l.isMobile)(!1)&&j},isHidden:function(){return!d.hasClass("active")}});var w=Object(a.a)(200,(function(){k&&b()})),k=!1;d.hover((function(){Object(l.isMobile)(!1)||(k=!1,g())}),(function(){Object(l.isMobile)(!1)||(k=!0,w())}))})),e(".l-top_menu-v2 .search.mobile").on("click",(function(n){e(".l-top_menu-v2").hasClass("is-search-mobile")?f():(d(),t.find("input").focus())}))})),e(document).on("turbolinks:before-cache",(function(){window.globalSearch&&(window.globalSearch.cancel(),delete window.globalSearch),e(".l-top_menu-v2").removeClass("is-submenu is-search-mobile"),e(".l-top_menu-v2 .submenu").removeAttr("style"),e(".l-top_menu-v2 .active").removeClass("active")}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/blocks/user-defined.js":function(e,t,n){(function(e){e(document).on("click",".user-defined",(function(e){e.currentTarget.classList.toggle("active")}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/_parser.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return xt}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./app/packs/javascripts/dynamic_elements/clickloaded.js"),s=n("./app/packs/javascripts/dynamic_elements/code_highlight.js"),c=n("./app/packs/javascripts/dynamic_elements/comment.js"),u=n("./app/packs/javascripts/dynamic_elements/day_registered_action.js"),l=n("./app/packs/javascripts/views/application/view.js"),p=n("./app/packs/javascripts/views/ads/ad_view.js"),d=n("./node_modules/shiki-decorators/index.js");function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var g,b,j,w,k,x,O,P=null,C=[],$="loaded",q="loading",S=(r=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,e);var t,n,r,i=m(o);function o(){return f(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"initialize",value:function(e,t,n){this.html=e,this.cssClass=t,this.adParams=n,P===$?this._render():P===q?this._schedule():this._loadJs()}},{key:"_loadJs",value:function(){var e=this;P=q,this._schedule(),function(t,n,r){t[r]=t[r]||[],t[r].push((function(){return P=$,C.forEach((function(e){return e()})),C=[]}));var i=n.getElementsByTagName("script")[0],o=n.createElement("script");o.type="text/javascript",o.src="//an.yandex.ru/system/context.js",o.async=!0,o.onerror=function(){if("remove_ad"in window)return window.remove_ad(e.cssClass)},i.parentNode.insertBefore(o,i)}(window,window.document,"yandexContextAsyncCallbacks")}},{key:"_schedule",value:function(){return C.push(this._render)}},{key:"_render",value:function(){return this._replaceNode(),Ya.Context.AdvManager.render(this.adParams)}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(p.a),g=r.prototype,b="_render",j=[d.a],w=Object.getOwnPropertyDescriptor(r.prototype,"_render"),k=r.prototype,x={},Object.keys(w).forEach((function(e){x[e]=w[e]})),x.enumerable=!!x.enumerable,x.configurable=!!x.configurable,("value"in x||x.initializer)&&(x.writable=!0),x=j.slice().reverse().reduce((function(e,t){return t(g,b,e)||e}),x),k&&void 0!==x.initializer&&(x.value=x.initializer?x.initializer.call(k):void 0,x.initializer=void 0),void 0===x.initializer&&(Object.defineProperty(g,b,x),x=null),r),E=n("./node_modules/get-js/index.js"),T=n.n(E);function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var z=null,M=[],N="loaded",B="loading",F=(O=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(o,e);var t,n,r,i=D(o);function o(){return R(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"initialize",value:function(e,t){this.html=e,this.cssClass=t,z===N?this._render():z===B?this._schedule():null===z&&this._loadJs()}},{key:"_loadJs",value:function(){var e=this;z=B,T()("//ad.mail.ru/static/ads-async.js").then((function(){z=N,M.forEach((function(e){return e()})),e._render()}))}},{key:"_schedule",value:function(){M.push(this._render)}},{key:"_render",value:function(){this._replaceNode(),(window.MRGtag=window.MRGtag||[]).push({})}}])&&I(t.prototype,n),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(p.a),function(e,t,n,r,i){var o={};Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}(O.prototype,"_render",[d.a],Object.getOwnPropertyDescriptor(O.prototype,"_render"),O.prototype),O),U=n("./node_modules/shiki-utils/index.js");function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var i=Y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(o,e);var t,n,r,i=G(o);function o(){return W(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"initialize",value:function(){var e=this.$node.data("ad_provider"),t=this.$node.data("ad_html"),n=this.$node.data("ad_css_class"),r=this.$node.data("ad_params"),i=this.$node.data("platform");this._platformMatched(i)&&("yandex_direct"===e&&new S(this.$node,t,n,r),"mytarget"===e?new F(this.$node,t,n,r):new p.a(this.$node,t,n,r))}},{key:"_platformMatched",value:function(e){return"desktop"===e?Object(U.isTablet)()||!Object(U.isPhone)():U.mobileDetect.phone||U.mobileDetect.tablet}}])&&V(t.prototype,n),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.a),Q=n("./app/packs/javascripts/dynamic_elements/forum.js"),Z=n("./app/packs/javascripts/dynamic_elements/full_dialog.js"),ee=n("./node_modules/delay/index.js"),te=n.n(ee),ne=n("./node_modules/image-promise/index.js");function re(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){re(o,r,i,a,s,"next",e)}function s(e){re(o,r,i,a,s,"throw",e)}a(void 0)}))}}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},se(e,t)}function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}var pe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(a,e);var t,n,r,i=ce(a);function a(){return oe(this,a),i.apply(this,arguments)}return t=a,n=[{key:"initialize",value:function(){this.$node.magnificPopup({preloader:!1,type:"webm",mainClass:"mfp-no-margins mfp-img-mobile",closeOnContentClick:!0}),this._replaceImage()}},{key:"_replaceImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.$node.data("video").match(/\.mp3$/)){var n=new Image;n.src=this.$node.data("src"),Object(ne.a)(n).then((function(){e.node.src=e.$node.data("src"),e.node.srcset=e.$node.data("srcset")})).catch(ie(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t<=60)){n.next=4;break}return n.next=3,te()(5e3*(t+1));case 3:e._replaceImage(t+1);case 4:case"end":return n.stop()}}),n)}))))}}}],n&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(l.a),de=n("./app/packs/javascripts/dynamic_elements/log_entry.js"),fe=n("./app/packs/javascripts/dynamic_elements/message.js"),he=n("./app/packs/javascripts/dynamic_elements/not_implemented_yet_action.js"),ve=n("./app/packs/javascripts/utils/axios.js");function me(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var ke,xe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(c,e);var t,n,r,i,a,s=be(c);function c(){return ye(this,c),s.apply(this,arguments)}return t=c,n=[{key:"initialize",value:(i=o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.a.get(this.$root.data("postloaded-url"));case 2:t=e.sent,n=t.data,this.$root.html(n).removeClass("b-ajax").process().trigger("postloaded:success");case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){me(o,n,r,a,s,"next",e)}function s(e){me(o,n,r,a,s,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}],n&&_e(t.prototype,n),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l.a),Oe=n("./app/packs/javascripts/dynamic_elements/topic.js"),Pe=n("./app/packs/javascripts/utils/check_height.js"),Ce=n("./app/packs/javascripts/utils/load_image.js");function $e(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(){return Ee="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Te(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ee.apply(this,arguments)}function Te(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var i=De(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ae(this,n)}}function Ae(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var Le,He=(ke=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(c,e);var t,n,r,i,a,s=Ie(c);function c(){return qe(this,c),s.apply(this,arguments)}return t=c,n=[{key:"_checkHeight",value:(i=o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.$(".critique-entry_cover img")).length){e.next=3;break}return e.abrupt("return",Ee(De(c.prototype),"_checkHeight",this).call(this));case 3:return e.next=5,Object(Ce.a)(t[0]);case 5:(n=t.height())>0&&Object(Pe.a)(this.$(".body-inner"),{maxHeight:n-18,collapsedHeight:n-18,expandHtml:""});case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){$e(o,n,r,a,s,"next",e)}function s(e){$e(o,n,r,a,s,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}],n&&Se(t.prototype,n),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(Oe.a),function(e,t,n,r,i){var o={};Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null)}(ke.prototype,"_checkHeight",[d.a],Object.getOwnPropertyDescriptor(ke.prototype,"_checkHeight"),ke.prototype),ke),ze=n("./app/packs/javascripts/dynamic_elements/review.js"),Me=n("./app/packs/javascripts/dynamic_elements/shiki_editor.js"),Ne=n("./app/packs/javascripts/dynamic_elements/shiki_editor_v2.js"),Be=n("./app/packs/javascripts/dynamic_elements/short_dialog.js"),Fe=n("./app/packs/javascripts/dynamic_elements/spoiler_block.js"),Ue=n("./app/packs/javascripts/utils/get_selection.js");function We(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xe(e);if(t){var i=Xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function Qe(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var Ze,et=(Le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(c,e);var t,n,r,i,a,s=Je(c);function c(){return Ve(this,c),s.apply(this,arguments)}return t=c,n=[{key:"initialize",value:function(){this.node.addEventListener("click",this._toggle),this.node.addEventListener("keypress",this._keypress),this.node.addEventListener("keydown",this._keydown)}},{key:"_toggle",value:(i=o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.x&&!t.y||"A"!==t.target.tagName&&"A"!==t.target.parentNode.tagName&&"A"!==t.target.parentNode.parentNode.tagName&&"A"!==t.target.parentNode.parentNode.parentNode.tagName){e.next=2;break}return e.abrupt("return");case 2:if(!(this.isOpened&&Object(Ue.b)()&&Object(Ue.c)())){e.next=6;break}if(!t.currentTarget.contains(window.getSelection().focusNode)){e.next=6;break}return t.currentTarget.blur(),e.abrupt("return");case 6:t.preventDefault(),t.stopImmediatePropagation(),(t.x||t.y)&&this.node.blur(),this.node.classList.toggle("is-opened");case 10:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){We(o,n,r,a,s,"next",e)}function s(e){We(o,n,r,a,s,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"isOpened",get:function(){return this.node.classList.contains("is-opened")}},{key:"_keypress",value:function(e){switch(e.keyCode){case 32:case 13:this._toggle(e)}}},{key:"_keydown",value:function(e){27===e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation(),this.node.blur())}}],n&&Ke(t.prototype,n),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(l.a),Qe(Le.prototype,"_toggle",[d.a],Object.getOwnPropertyDescriptor(Le.prototype,"_toggle"),Le.prototype),Qe(Le.prototype,"_keypress",[d.a],Object.getOwnPropertyDescriptor(Le.prototype,"_keypress"),Le.prototype),Qe(Le.prototype,"_keydown",[d.a],Object.getOwnPropertyDescriptor(Le.prototype,"_keydown"),Le.prototype),Le),tt=n("./app/packs/javascripts/dynamic_elements/swiper.js"),nt=n("./app/packs/javascripts/dynamic_elements/switcher.js"),rt=n("./app/packs/javascripts/dynamic_elements/tabs.js"),it=n("./app/packs/javascripts/dynamic_elements/text_annotated.js"),ot=n("./app/packs/javascripts/dynamic_elements/user_rates/button.js"),at=n("./app/packs/javascripts/utils/jst.js");function st(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(){return lt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=pt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},lt.apply(this,arguments)}function pt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vt(e)););return e}function dt(e,t){return dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},dt(e,t)}function ft(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var i=vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}function mt(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var yt=(Ze=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(c,e);var t,n,r,i,a,s=ft(c);function c(){var e;ct(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s.call.apply(s,[this].concat(n))).formHtml=null,e}return t=c,n=[{key:"initialize",value:function(){this.entry=this.$root.data("entry"),this.on("click",".cancel",this._hideForm),this.on("ajax:success",".remove",this._hideForm),this.on("ajax:success",".rate-edit",this._hideForm),this.on("rate:change",this._changeScore),lt(vt(c.prototype),"initialize",this).call(this)}},{key:"_toggleList",value:function(e){var t=e.currentTarget;this.isPersisted&&t.classList.contains("edit-trigger")?this.formHtml?this._hideForm():this._fetchForm():lt(vt(c.prototype),"_toggleList",this).call(this)}},{key:"_fetchForm",value:(i=o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._ajaxBefore(),e.next=3,ve.a.get("/user_rates/".concat(this.model.id,"/edit"));case 3:t=e.sent,n=t.data,this._ajaxComplete(),this._showForm(n);case 7:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){st(o,n,r,a,s,"next",e)}function s(e){st(o,n,r,a,s,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_showForm",value:function(e){this.formHtml=e,this._render(),this.$(".remove.bottom").addClass("hidden"),this.$(".delete-button.top").removeClass("hidden")}},{key:"_hideForm",value:function(){this.formHtml=null,this._render()}},{key:"_changeScore",value:function(e,t){this.$('input[name="user_rate[score]"]').val(t),this.$("form").submit()}},{key:"_extendedHtml",value:function(){if(this.isPersisted)return this.formHtml||this._renderExtended()}},{key:"_renderExtended",value:function(){return at.a["user_rates/extended"]({entry:this.entry,model:this.model,increment_url:this._incrementUrl(),rate_html:at.a["user_rates/score"]({score:this.model.score})})}},{key:"_render",value:function(){lt(vt(c.prototype),"_render",this).call(this),this.$(".b-rate").rateable()}},{key:"_incrementUrl",value:function(){var e;if(this.isPersisted)return 0!==this.model.volumes&&(e="?volumes"),"/api/v2/user_rates/".concat(this.model.id,"/increment").concat(e||"")}}],n&&ut(t.prototype,n),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(ot.a),mt(Ze.prototype,"_toggleList",[d.a],Object.getOwnPropertyDescriptor(Ze.prototype,"_toggleList"),Ze.prototype),mt(Ze.prototype,"_fetchForm",[d.a],Object.getOwnPropertyDescriptor(Ze.prototype,"_fetchForm"),Ze.prototype),mt(Ze.prototype,"_showForm",[d.a],Object.getOwnPropertyDescriptor(Ze.prototype,"_showForm"),Ze.prototype),mt(Ze.prototype,"_hideForm",[d.a],Object.getOwnPropertyDescriptor(Ze.prototype,"_hideForm"),Ze.prototype),mt(Ze.prototype,"_changeScore",[d.a],Object.getOwnPropertyDescriptor(Ze.prototype,"_changeScore"),Ze.prototype),Ze),_t=n("./app/packs/javascripts/dynamic_elements/wall_or_swiper.js"),gt=n("./app/packs/javascripts/dynamic_elements/authorized_action.js"),bt=n("./app/packs/javascripts/dynamic_elements/week_registered_action.js");function jt(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function wt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){jt(o,r,i,a,s,"next",e)}function s(e){jt(o,r,i,a,s,"throw",e)}a(void 0)}))}}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.each((function(t,r){r.classList.contains(e.PENDING_CLASS)&&(r.classList.remove(e.PENDING_CLASS),r.attributes["data-dynamic"].value.split(",").forEach((function(e){var t=e.camelize(!1);n[t]?n[t](r):console.error("unexpected processor: ".concat(t),r)})))}))}var t,r,i,l,p;return t=e,r=[{key:"alignedPosters",value:(p=wt(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("aligned_posters").then(n.bind(null,"./app/packs/javascripts/dynamic_elements/aligned_posters.js"));case 2:new(0,e.sent.AlignedPosters)(t);case 5:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})},{key:"authorized",value:function(e){new gt.a(e)}},{key:"clickloaded",value:function(e){new a.a(e)}},{key:"cuttedCovers",value:(l=wt(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("cutted_covers").then(n.bind(null,"./app/packs/javascripts/dynamic_elements/cutted_covers.js"));case 2:new(0,e.sent.CuttedCovers)(t);case 5:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"codeHighlight",value:function(e){new s.a(e)}},{key:"comment",value:function(e){new c.a(e)}},{key:"dayRegistered",value:function(e){new u.a(e)}},{key:"desktopAd",value:function(e){new X(e)}},{key:"forum",value:function(e){new Q.a(e)}},{key:"fullDialog",value:function(e){new Z.a(e)}},{key:"html5Video",value:function(e){new pe(e)}},{key:"logEntry",value:function(e){new de.a(e)}},{key:"message",value:function(e){new fe.a(e)}},{key:"notImplementedYetAction",value:function(e){new he.a(e)}},{key:"postloaded",value:function(e){new xe(e)}},{key:"shortDialog",value:function(e){new Be.a(e)}},{key:"shikiEditor",value:function(e){new Me.a(e)}},{key:"shikiEditorV2",value:function(e){new Ne.a(e)}},{key:"swiper",value:function(e){new tt.a(e)}},{key:"switcher",value:function(e){new nt.a(e)}},{key:"spoilerBlock",value:function(e){new Fe.a(e)}},{key:"spoilerInline",value:function(e){new et(e)}},{key:"review",value:function(e){new ze.a(e)}},{key:"critique",value:function(e){new He(e)}},{key:"tabs",value:function(e){new rt.a(e)}},{key:"textAnnotated",value:function(e){new it.a(e)}},{key:"topic",value:function(e){new Oe.a(e)}},{key:"userRate",value:function(e){"true"===e.attributes["data-extended"].value?new yt(e):new ot.a(e)}},{key:"wall",value:function(e){new _t.a(e)}},{key:"weekRegistered",value:function(e){new bt.a(e)}}],r&&kt(t.prototype,r),i&&kt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();xt.PENDING_CLASS="to-process"},"./app/packs/javascripts/dynamic_elements/authorized_action.js":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b}));var r,i=n("./node_modules/shiki-decorators/index.js"),o=n("./node_modules/shiki-utils/index.js"),a=n("./app/packs/javascripts/views/application/view.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f,h,v,m,y,_,g="frontend.dynamic_elements.authorized_action",b=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,t);var n,r,i,a=l(p);function p(){return s(this,p),a.apply(this,arguments)}return n=p,(r=[{key:"initialize",value:function(){this.$node.on("click",this.onClick)}},{key:"onClick",value:function(t){window.SHIKI_USER.isSignedIn||(o.flash.info(e.t("".concat(g,".register_to_complete_action"))),t.stopImmediatePropagation(),t.preventDefault())}}])&&c(n.prototype,r),i&&c(n,i),Object.defineProperty(n,"prototype",{writable:!1}),p}(a.a),f=r.prototype,h="onClick",v=[i.a],m=Object.getOwnPropertyDescriptor(r.prototype,"onClick"),y=r.prototype,_={},Object.keys(m).forEach((function(e){_[e]=m[e]})),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=v.slice().reverse().reduce((function(e,t){return t(f,h,e)||e}),_),y&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(y):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(f,h,_),_=null),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/clickloaded.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/shiki-decorators/index.js"),s=n("./app/packs/javascripts/utils/axios.js");function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var v,m,y,_,g,b,j=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(v,t);var n,r,i,a,f,h=d(v);function v(){return u(this,v),h.apply(this,arguments)}return n=v,r=[{key:"initialize",value:function(){this.isLoading=!1,this.$root.on("click",this.fetch)}},{key:"fetch",value:(a=o.a.mark((function t(){var n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isLoading){t.next=2;break}return t.abrupt("return");case 2:return this.isLoading=!0,n=this.$root.html(),this.$root.trigger("clickloaded:before"),this.$root.html("<div\n        class='ajax-loading vk-like'\n        title='".concat(e.t("frontend.blocks.click_loader.loading"),"'\n      />")),t.next=8,s.a.get(this.$root.data("clickloaded-url"));case 8:r=t.sent,i=r.data,this.$root.html(n),this.$root.trigger("clickloaded:success",[i]),this.isLoading=!1;case 13:case"end":return t.stop()}}),t,this)})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){c(i,n,r,o,s,"next",e)}function s(e){c(i,n,r,o,s,"throw",e)}o(void 0)}))},function(){return f.apply(this,arguments)})}],r&&l(n.prototype,r),i&&l(n,i),Object.defineProperty(n,"prototype",{writable:!1}),v}(n("./app/packs/javascripts/views/application/view.js").a),v=r.prototype,m="fetch",y=[a.a],_=Object.getOwnPropertyDescriptor(r.prototype,"fetch"),g=r.prototype,b={},Object.keys(_).forEach((function(e){b[e]=_[e]})),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=y.slice().reverse().reduce((function(e,t){return t(v,m,e)||e}),b),g&&void 0!==b.initializer&&(b.value=b.initializer?b.initializer.call(g):void 0,b.initializer=void 0),void 0===b.initializer&&(Object.defineProperty(v,m,b),b=null),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/code_highlight.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CodeHighlight}));var _views_application_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/packs/javascripts/views/application/view.js"),shiki_editor_src_utils_lowlight_shiki_markdown__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/shiki-editor/src/utils/lowlight/shiki_markdown.js"),json_fn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/json-fn/jsonfn.js"),json_fn__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(json_fn__WEBPACK_IMPORTED_MODULE_2__);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var NO_HIGHLIGHT="nohighlight",shikiMarkdownJSONfn=null,CodeHighlight=function(_View){_inherits(CodeHighlight,_View);var _super=_createSuper(CodeHighlight);function CodeHighlight(){return _classCallCheck(this,CodeHighlight),_super.apply(this,arguments)}return _createClass(CodeHighlight,[{key:"initialize",value:function(){this.klass=CodeHighlight,this.klass.hljsInitialize(),this.highlight()}},{key:"highlight",value:function(){var e,t=this.root.childNodes[0],n=null===(e=this.root.attributes["data-language"])||void 0===e?void 0:e.value;!t.classList.contains(NO_HIGHLIGHT)&&n&&"Blob"in window&&"Worker"in window&&(t.id="code_".concat(this.klass.lastId),this.klass.lastId+=1,shikiMarkdownJSONfn||(shikiMarkdownJSONfn=json_fn__WEBPACK_IMPORTED_MODULE_2___default.a.stringify(shiki_editor_src_utils_lowlight_shiki_markdown__WEBPACK_IMPORTED_MODULE_1__.default)),this.klass.worker.postMessage({node_id:t.id,code:t.textContent,language:n,shikiMarkdownJSONfn:shikiMarkdownJSONfn}))}}],[{key:"hljsInitialize",value:function hljsInitialize(){this.hljsInitialized||(this.hljsInitialized=!0,this.lastId=0,this.worker=this.buildWorker((function(){importScripts("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js");var parseJSONfn=function parseJSONfn(str,date2obj){var iso8061=!!date2obj&&/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return JSON.parse(str,(function(key,value){var prefix;return"string"!=typeof value||value.length<8?value:(prefix=value.substring(0,8),iso8061&&value.match(iso8061)?new Date(value):"function"===prefix?eval("("+value+")"):"_PxEgEr_"===prefix||"_NuFrRa_"===prefix?eval(value.slice(8)):value)}))};this.onmessage=function(e){self.hljs.listLanguages().includes("shiki")||self.hljs.registerLanguage("shiki",parseJSONfn(e.data.shikiMarkdownJSONfn));var t=self.hljs.highlight(e.data.language,e.data.code,!0);postMessage({html:t.value,node_id:e.data.node_id})}})),this.worker.onmessage=function(e){var t=document.getElementById(e.data.node_id);t&&(t.innerHTML=e.data.html)})}},{key:"buildWorker",value:function(e){var t=e.toString();t=t.substring(t.indexOf("{")+1,t.lastIndexOf("}"));var n=new Blob([t],{type:"application/javascript"});return new Worker(URL.createObjectURL(n))}}]),CodeHighlight}(_views_application_view__WEBPACK_IMPORTED_MODULE_0__.a)},"./app/packs/javascripts/dynamic_elements/comment.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return b}));var i,o=n("./node_modules/delay/index.js"),a=n.n(o),s=n("./node_modules/shiki-utils/index.js"),c=n("./node_modules/shiki-decorators/index.js"),u=n("./app/packs/javascripts/views/application/shiki_editable.js");n("./app/packs/javascripts/utils/load_image.js");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},d.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function _(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g="frontend.dynamic_elements.comment",b=(i=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,t);var n,i,o,c=v(u);function u(){return l(this,u),c.apply(this,arguments)}return n=u,(i=[{key:"initialize",value:function(){var e=this,t=Object(s.isPhone)()?-25:0;this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=140+t,this.model=this.$node.data("model")||this.defaultModel,window.SHIKI_USER.isUserIgnored(this.model.user_id)?this.$node.parent().length?this.$node.remove():a()().then((function(){return e.$node.remove()})):(this.$body=this.$(".body"),this.model&&!this.model.is_viewed&&this._activateAppearMarker(),this._scheduleCheckHeight(),this.$(".hash").one("mouseover",this._replaceHashWithLink))}},{key:"defaultModel",get:function(){return{can_destroy:!1,can_edit:!1,id:parseInt(this.node.id),is_viewed:!0,user_id:this.$node.data("user_id")}}},{key:"type",get:function(){return"comment"}},{key:"typeLabel",get:function(){return e.t("".concat(g,".type_label"))}},{key:"_bindAbuseRequestControls",value:function(){d(y(u.prototype),"_bindAbuseRequestControls",this).call(this),this.$(".item-offtopic").on("click",this._markOfftopic)}},{key:"_bindFaye",value:function(){d(y(u.prototype),"_bindFaye",this).call(this),this.on("faye:comment:set_replies",this._fayeSetReplies),this.on("faye:comment:converted",this._fayeConverted)}},{key:"mark",value:function(e,t){this.$(".item-".concat(e)).toggleClass("selected",t),this.$(".b-".concat(e,"_marker")).toggle(t)}},{key:"_isOfftopic",value:function(){return"none"!==this.$(".b-offtopic_marker").css("display")}},{key:"_processAbuseRequest",value:function(t,n){"affected_ids"in n&&n.affected_ids.length?(n.affected_ids.forEach((function(e){var t;return null===(t=r(".b-comment#".concat(e)).view())||void 0===t?void 0:t.mark(n.kind,n.value)})),s.flash.notice(function(t){var n=e.t("not_marked_as_summary");return t.value?n="offtopic"===t.kind?t.affected_ids.length>1?"multiple_marked_as_offtopic":"marked_as_offtopic":"marked_as_summary":"offtopic"===t.kind&&(n="not_marked_as_offtopic"),s.flash.notice(e.t("".concat(g,".").concat(n)))}(n)),d(y(u.prototype),"_processAbuseRequest",this).call(this,t,n,!1)):d(y(u.prototype),"_processAbuseRequest",this).call(this,t,n)}},{key:"_markOfftopic",value:function(e){var t=e.currentTarget,n=t.classList.contains("selected")?"remove":"add";r(t).attr("data-confirm",r(t).data("confirm-".concat(n)))}},{key:"_fayeSetReplies",value:function(e,t){this.$(".b-replies").remove(),r(t.replies_html).appendTo(this.$body).process()}},{key:"_fayeConverted",value:function(t,n){var r=e.t("frontend.shiki_editable.comment_converted",{url:"/animes/1/reviews/".concat(n.review_id)});return this._replace("<div class='b-comment-info b-".concat(this.type,"'><span>").concat(r,"</span>")+"<a class='b-user16' href='/".concat(n.actor,"'><img src='").concat(n.actor_avatar,"' ")+"srcset='".concat(n.actor_avatar_2x," 2x' /><span>").concat(n.actor,"</span></a></div>")),!1}},{key:"_replaceHashWithLink",value:function(e){var t=e.currentTarget,n=r(t);n.attr("href",n.data("url")).changeTag("a")}}])&&p(n.prototype,i),o&&p(n,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(u.a),_(i.prototype,"_processAbuseRequest",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_processAbuseRequest"),i.prototype),_(i.prototype,"_markOfftopic",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_markOfftopic"),i.prototype),_(i.prototype,"_fayeSetReplies",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_fayeSetReplies"),i.prototype),_(i.prototype,"_fayeConverted",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_fayeConverted"),i.prototype),_(i.prototype,"_replaceHashWithLink",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_replaceHashWithLink"),i.prototype),i)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"),n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/day_registered_action.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r,i=n("./node_modules/shiki-decorators/index.js"),o=n("./node_modules/shiki-utils/index.js"),a=n("./app/packs/javascripts/views/application/view.js"),s=n("./app/packs/javascripts/dynamic_elements/authorized_action.js");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h,v,m,y,_,g,b=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,t);var n,r,i,a=p(d);function d(){return c(this,d),a.apply(this,arguments)}return n=d,(r=[{key:"initialize",value:function(){this.$node.on("click",this.onClick)}},{key:"onClick",value:function(t){window.SHIKI_USER.isSignedIn?window.SHIKI_USER.isDayRegistered||(o.flash.info(e.t("".concat("frontend.dynamic_elements.day_registered_action",".action_will_be_available"))),t.stopImmediatePropagation(),t.preventDefault()):(o.flash.info(e.t("".concat(s.b,".register_to_complete_action"))),t.stopImmediatePropagation(),t.preventDefault())}}])&&u(n.prototype,r),i&&u(n,i),Object.defineProperty(n,"prototype",{writable:!1}),d}(a.a),h=r.prototype,v="onClick",m=[i.a],y=Object.getOwnPropertyDescriptor(r.prototype,"onClick"),_=r.prototype,g={},Object.keys(y).forEach((function(e){g[e]=y[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=m.slice().reverse().reduce((function(e,t){return t(h,v,e)||e}),g),_&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(_):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(h,v,g),g=null),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/forum.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return f}));var i=n("./app/packs/javascripts/views/application/shiki_view.js");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=["faye:comment:marked","faye:comment:created","faye:comment:updated","faye:comment:deleted","faye:comment:converted","faye:topic:updated","faye:topic:deleted","faye:comment:set_replies"],f=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,t);var n,i,u,l=c(f);function f(){return o(this,f),l.apply(this,arguments)}return n=f,(i=[{key:"initialize",value:function(){var t=this;this.on(d.join(" "),(function(n,r){if(!window.SHIKI_USER.isTopicIgnored(r.topic_id)&&!window.SHIKI_USER.isUserIgnored(r.user_id)){var i=t.$(".b-topic#".concat(r.topic_id));i.exists()?i.trigger(n.type,r):"faye:comment:created"===n.type&&(t._fayePlaceholder(r.topic_id),e(document.body).trigger("faye:added"))}})),this.on("faye:topic:created",(function(n,r){window.SHIKI_USER.isUserIgnored(r.user_id)||(t._fayePlaceholder(r.topic_id),e(document.body).trigger("faye:added"))}))}},{key:"_fayePlaceholder",value:function(t){var n,i=this.$(">.faye-loader");if(i.exists()||(i=e('<div class="faye-loader to-process" data-dynamic="clickloaded"></div>').prependTo(this.$root).data({ids:[]}).process().on("clickloaded:success",(function(t,n){var r=e(n.content).process(n.JS_EXPORTS);i.replaceWith(r)}))),-1===(null===(n=i.data("ids"))||void 0===n?void 0:n.indexOf(t))){var o=i.data("ids").add(t);i.data({ids:o,"clickloaded-url":"/topics/chosen/".concat(o.join(","))});var a=i.data("ids").length;i.html(p(a,r.t("frontend.lib.jquery_shiki_forum.new_topics_added.one",{count:a}),r.t("frontend.lib.jquery_shiki_forum.new_topics_added.few",{count:a}),r.t("frontend.lib.jquery_shiki_forum.new_topics_added.many",{count:a})))}}}])&&a(n.prototype,i),u&&a(n,u),Object.defineProperty(n,"prototype",{writable:!1}),f}(i.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/full_dialog.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"commentType",get:function(){return"message"}},{key:"_beforeCommentsClickload",value:function(){}},{key:"_updateCommentsLoader",value:function(t){if(t.postloader){var n=e(t.postloader).process();this.$commentsLoader.replaceWith(n),this.$commentsLoader=n}else this.$commentsLoader.remove(),this.$commentsLoader=null}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/dynamic_elements/topic.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/log_entry.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/delay/index.js"),s=n.n(a),c=n("./node_modules/shiki-decorators/index.js"),u=n("./app/packs/javascripts/views/application/shiki_view.js"),l=n("./app/packs/javascripts/views/application/ban_form.js"),p=n("./app/packs/javascripts/vendor/virous_mk_links_highlight.js");function d(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)}))}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var j=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(d,t);var r,i,a,c,u=y(d);function d(){return h(this,d),u.apply(this,arguments)}return r=d,i=[{key:"initialize",value:function(){this.$inner=this.$node,this.$moderation=this.$(".moderation"),this.$(".reject[data-reason-prompt]",this.$moderation).on("click",this._rejectDialog),this.$(".ajax-action",this.$moderation).on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._reload),this.$(".delete",this.$moderation).on("ajax:before",this._shade).on("ajax:success",this._remove),this.$(".ban, .warn",this.$moderation).on("ajax:before",this._prepareForm).on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._showForm),this.$root.children(".spoiler.collapse").one("click",this._processDiffs)}},{key:"_prepareForm",value:function(){this.$moderation.hide(),this.$(".spoiler.collapse .action").hide()}},{key:"_showForm",value:function(t,n){var r=this.$(".ban-form");r.html(n).show(),new l.a(r),e(t.target).hasClass("warn")&&(r.find("#ban_duration").val("0m"),this.$root.find(".b-spoiler_marker").length&&r.find("#ban_reason").val("\u0441\u043f\u043e\u0439\u043b\u0435\u0440\u044b")),e(".cancel",r).on("click",this._hideForm),r.on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._reload)}},{key:"_hideForm",value:function(){this.$moderation.show(),this.$(".spoiler.collapse .action").show(),this.$(".ban-form").hide().empty(),this.$(".spoiler.collapse").click()}},{key:"_remove",value:(c=f(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$root.hide(),e.next=3,s()(1e4);case 3:this.$root.remove();case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"_rejectDialog",value:function(t){var n=e(t.target).data("href"),r=prompt(e(t.target).data("reason-prompt"));if(null==r)return t.preventDefault(),void t.stopImmediatePropagation();e(t.target).attr("href","".concat(n,"?reason=").concat(encodeURIComponent(r)))}},{key:"_processDiffs",value:function(){this.$(".field-changes .diff").each(function(){var t=f(o.a.mark((function t(r,i){var a,s,c,u,l,p,d,f;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(i),t.next=3,n.e("vendors_async-diff-match-patch").then(n.t.bind(null,"./node_modules/diff-match-patch/index.js",7));case 3:s=t.sent,c=s.default,u=a.find(".value"),l=u.data("old_value"),p=u.data("new_value"),d=new c,f=d.diff_main(Object.isString(l)?l:JSON.stringify(l),Object.isString(p)?p:JSON.stringify(p)),d.diff_cleanupSemantic(f),u.html(d.diff_prettyHtml(f).replace(/&para;/g,""));case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());var t=this.$(".field-changes.external_links");t.length&&this._processExternalLinks(t)}},{key:"_processExternalLinks",value:function(e){e.each((function(e,t){return Object(p.default)(t)}))}}],i&&v(r.prototype,i),a&&v(r,a),Object.defineProperty(r,"prototype",{writable:!1}),d}(u.a),b(r.prototype,"_prepareForm",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_prepareForm"),r.prototype),b(r.prototype,"_showForm",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_showForm"),r.prototype),b(r.prototype,"_hideForm",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_hideForm"),r.prototype),b(r.prototype,"_remove",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_remove"),r.prototype),b(r.prototype,"_rejectDialog",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_rejectDialog"),r.prototype),b(r.prototype,"_processDiffs",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_processDiffs"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/message.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"type",get:function(){return"message"}},{key:"typeLabel",get:function(){return e.t("frontend.dynamic_elements.message.type_label")}},{key:"_deactivateInaccessibleButtons",value:function(){}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/dynamic_elements/comment.js").a)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/not_implemented_yet_action.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r,i=n("./node_modules/shiki-decorators/index.js"),o=n("./node_modules/shiki-utils/index.js"),a=n("./app/packs/javascripts/views/application/view.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f,h,v,m,y,_,g=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,t);var n,r,i,a=l(p);function p(){return s(this,p),a.apply(this,arguments)}return n=p,(r=[{key:"initialize",value:function(){this.$node.on("click",this.onClick)}},{key:"onClick",value:function(t){o.flash.info(e.t("frontend.dynamic_elements.not_implemented_yet_action")),t.stopImmediatePropagation(),t.preventDefault()}}])&&c(n.prototype,r),i&&c(n,i),Object.defineProperty(n,"prototype",{writable:!1}),p}(a.a),f=r.prototype,h="onClick",v=[i.a],m=Object.getOwnPropertyDescriptor(r.prototype,"onClick"),y=r.prototype,_={},Object.keys(m).forEach((function(e){_[e]=m[e]})),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=v.slice().reverse().reduce((function(e,t){return t(f,h,e)||e}),_),y&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(y):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(f,h,_),_=null),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/review.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/shiki-decorators/index.js"),s=n("./node_modules/shiki-utils/index.js"),c=n("./node_modules/delay/index.js"),u=n.n(c),l=n("./app/packs/javascripts/dynamic_elements/topic.js"),p=n("./node_modules/turbolinks/dist/turbolinks.js"),d=n.n(p),f=n("./app/packs/javascripts/utils/flash.js");function h(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var x=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(p,t);var n,r,i,a,c,l=b(p);function p(){return v(this,p),l.apply(this,arguments)}return n=p,r=[{key:"typeLabel",get:function(){return e.t("frontend.dynamic_elements.review.type_label")}},{key:"$checkHeightNode",get:function(){return this.$inner}},{key:"$body",get:function(){return this.$inner.find(".body")}},{key:"$editorPlacement",get:function(){return this.$body.parent()}},{key:"_toggleMobileControls",value:function(){y(w(p.prototype),"_toggleMobileControls",this).call(this);var e=this.$inner.children("aside.buttons"),t=this.$inner.children("header");this.$node.hasClass("aside-expanded")?(e.detach(),e.insertBefore(t)):(e.detach(),e.insertAfter(t))}},{key:"_redirectAfterDeleted",value:(a=o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(f.b)(n.notice),e.next=3,u()(150);case 3:d.a.visit(document.location.href.replace(/\/reviews\/\d+$/,"/reviews"),{action:"replace"});case 4:case"end":return e.stop()}}),e)})),c=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){h(i,n,r,o,s,"next",e)}function s(e){h(i,n,r,o,s,"throw",e)}o(void 0)}))},function(e,t){return c.apply(this,arguments)})},{key:"_assignCheckHeightLimits",value:function(){var e=Object(s.isPhone)()?63:0;this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=220+e,this.CHECK_HEIGHT_COLLAPSED_HEIGHT=170+e,this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=115+e}},{key:"_bindFaye",value:function(){y(w(p.prototype),"_bindFaye",this).call(this),this.on("faye:review:converted",this._fayeConverted)}},{key:"_fayeConverted",value:function(t,n){var r=e.t("frontend.shiki_editable.review_converted",{url:"/comments/".concat(n.comment_id)});return this._replace("<div class='b-comment-info b-".concat(this.type,"'><span>").concat(r,"</span>")+"<a class='b-user16' href='/".concat(n.actor,"'><img src='").concat(n.actor_avatar,"' ")+"srcset='".concat(n.actor_avatar_2x," 2x' /><span>").concat(n.actor,"</span></a></div>")),!1}}],r&&m(n.prototype,r),i&&m(n,i),Object.defineProperty(n,"prototype",{writable:!1}),p}(l.a),k(r.prototype,"$checkHeightNode",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"$checkHeightNode"),r.prototype),k(r.prototype,"$body",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"$body"),r.prototype),k(r.prototype,"$editorPlacement",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"$editorPlacement"),r.prototype),k(r.prototype,"_toggleMobileControls",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_toggleMobileControls"),r.prototype),k(r.prototype,"_redirectAfterDeleted",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_redirectAfterDeleted"),r.prototype),k(r.prototype,"_fayeConverted",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_fayeConverted"),r.prototype),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/shiki_editor.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return P}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./node_modules/p-defer/index.js"),l=n("./node_modules/shiki-decorators/index.js"),p=n("./node_modules/shiki-utils/index.js"),d=n("./app/packs/javascripts/utils/axios.js"),f=n("./app/packs/javascripts/utils/prevent_event.js");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=(i=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(y,t);var i,o,s,l,h,m=w(y);function y(){var e;g(this,y);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=m.call.apply(m,[this].concat(n))).initialization=Object(u.a)(),e}return i=y,o=[{key:"initialize",value:(h=_(a.a.mark((function t(){var i,o,s,u,l,h=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.$node,this.$form=i.closest("form"),this.isInnerForm=!1,this.$textarea=this.$("textarea"),this.on("focus",focus),t.next=7,n.e("shiki_editor_v1").then(n.t.bind(null,"./node_modules/paste.js/paste.js",7));case 7:return t.next=9,n.e("shiki_editor_v1").then(n.bind(null,"./node_modules/autosize/dist/autosize.esm.js"));case 9:o=t.sent,s=o.default,this.$textarea.one("focus",(function(){return c()().then((function(){return s(h.$textarea[0])}))})),this.$textarea.on("keypress keydown",this._onKeyPress),this.$form.on("ajax:before",(function(){if(!h.text.replace(/\n| |\r|\t/g,""))return p.flash.error(e.t("frontend.shiki_editor.text_cant_be_blank")),!1;h._shade()})).on("ajax:complete",this._unshade).on("ajax:success",_(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h._hidePreview(),e.next=3,c()();case 3:h.$textarea[0].dispatchEvent(new Event("autosize:update"));case 4:case"end":return e.stop()}}),e)})))),this.$(".editor-controls span").on("click",(function(e){r(e.target).hasClass("selected")||h.$(".editor-controls span.selected").trigger("click")})),this.$(".editor-bold").on("click",(function(){return h.$textarea.insertAtCaret("[b]","[/b]")})),this.$(".editor-italic").on("click",(function(){return h.$textarea.insertAtCaret("[i]","[/i]")})),this.$(".editor-underline").on("click",(function(){return h.$textarea.insertAtCaret("[u]","[/u]")})),this.$(".editor-strike").on("click",(function(){return h.$textarea.insertAtCaret("[s]","[/s]")})),this.$(".editor-spoiler").on("click",(function(){return h.$textarea.insertAtCaret("[spoiler=".concat(e.t("frontend.shiki_editor.spoiler").toLowerCase(),"]"),"[/spoiler]")})),["smiley","link","image","quote","upload"].forEach((function(e){return h.$(".editor-".concat(e)).on("click",(function(t){var n=r(t.target),i=h.$(".".concat(e,"s"));n.hasClass("selected")?i.addClass("hidden"):(i.removeClass("hidden"),i.trigger("click:open")),n.toggleClass("selected")}))})),this.$(".b-button.ok").on("click",(function(e){var t=r(e.target).data("type"),n=h.$(".".concat(t," input[type=text]"));return"images"===t?n.trigger("keypress",[!0]):n.trigger("autocomplete:text",[n.val()])})),this.$(".links").on("click:open",(function(){r(".links input[type=text]",i).val(""),r(h.$('[name="link_type"]:checked')[0]||h.$('[name="link_type"]')[0]).prop("checked",!0).trigger("change")})),this.$(".links input[type=text]").completable().on("autocomplete:success autocomplete:text",(function(e,t){var n=h.$(".links input[type=radio]:checked"),r=n.val(),i=Object.isString(t)?"url"===r?t:void 0:{id:t.id,text:t.name,type:r};if(i)return n.trigger("tag:build",i)})),this.$(".links input[type=radio]").on("change",(function(){var e=r(this),t=r(".links input[type=text]",i);return t.attr({placeholder:e.data("placeholder")}),e.data("autocomplete")?t.data({autocomplete:e.data("autocomplete")}):t.data({autocomplete:null}),t.trigger("flushCache").focus()})),this.$(".links input[type=radio]").on("tag:build",(function(e,t){return h.$(".editor-link").trigger("click")})),this.$(".images").on("click:open",(function(){return h.$(".images input[type=text]").val("").focus()})),this.$(".images input[type=text]").on("keypress",(function(e,t){(10===e.keyCode||13===e.keyCode||t)&&(Object(f.a)(e),h.$textarea.insertAtCaret("","[img]".concat(r(e.target).val(),"[/img]")),h.$(".editor-image").trigger("click"))})),this.$(".quotes").on("click:open",(function(){return h.$(".quotes input[type=text]").val("").focus()})),this.$(".quotes input[type=text]").on("keypress",(function(e){10!==e.keyCode&&13!==e.keyCode||(Object(f.a)(e),h.$textarea.insertAtCaret("[quote"+(!h.value||h.value.isBlank()?"":"=".concat(h.value))+"]","[/quote]"),h.$(".editor-quote").trigger("click"))})),this.$(".quotes input[type=text]").completable().on("autocomplete:success autocomplete:text",(function(e,t){var n=Object.isString(t)?t:t.value;h.$textarea.insertAtCaret("[quote"+(!n||n.isBlank()?"":"=".concat(n))+"]","[/quote]"),h.$(".editor-quote").trigger("click")})),this.$(".links input[value=url]").on("tag:build",(function(e,t){return h.$textarea.insertAtCaret("[url=".concat(t,"]"),"[/url]",t.replace(/^https?:\/\/|\/.*/g,""))})),u=[".links input[value=anime]",".links input[value=manga]",".links input[value=ranobe]",".links input[value=character]",".links input[value=person]"],this.$(u.join(",")).on("tag:build",(function(e,t){return h.$textarea.insertAtCaret("[".concat(t.type,"=").concat(t.id,"]"),"[/".concat(t.type,"]"),t.text)})),this.$(".smileys").one("click:open",this._loadSmileys),this.$(".b-offtopic_marker").on("click",this._onMarkOfftopic),this.$("footer .unpreview").on("click",this._hidePreview),this.$("footer .preview").on("click",(function(){var e={comment:v(v({},h.$node.data("preview_params")||{}),{},{body:h.text})};h._shade(),d.a.post(r("footer .preview",h.$node).data("preview_url"),e).then((function(e){return h._showPreview(e.data)})).catch().then(h._unshade)})),this.$(".item-apply").on("click",(function(e,t){return h.$form.submit()})),this.text.length>0&&c()().then((function(){h.$textarea.focus(),h.$textarea.setCursorPosition(h.text.length)})),l="[".concat(e.t("frontend.shiki_editor.file")," #@]"),this.$textarea.shikiFile({progress:i.find(".b-upload_progress"),input:r(".editor-file input",i),maxfiles:6}).on("upload:started",(function(e,t){var n=l.replace("@",t);h.$textarea.insertAtCaret("",n),h.$textarea.focus()})).on("upload:success",(function(e,t,n){var r=l.replace("@",n);if(-1===h.text.indexOf(r))h.$textarea.insertAtCaret("","[image=".concat(t.id,"]"));else{var i=t.id?"[image=".concat(t.id,"]"):"";h.$textarea.val(h.text.replace(r,i))}h.$textarea.focus()})).on("upload:failed",(function(e,t,n){var r=l.replace("@",n);-1!==h.text.indexOf(r)&&h.$textarea.val(h.text.replace(r,"")),h.$textarea.focus()})),c()().then((function(){return h.initialization.resolve()}));case 43:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"type",get:function(){return this.$textarea.data("item_type")}},{key:"text",get:function(){return this.$textarea.val()}},{key:"reprocessCache",value:function(){}},{key:"_showPreview",value:function(e){this.$node.addClass("previewed"),r(".body .preview",this.$node).html(e).process()}},{key:"_hidePreview",value:function(){this.$node.removeClass("previewed"),!this.$(".editor-controls").is(":appeared")&&this.$node.is(":visible")&&r.scrollTo(this.$node)}},{key:"_onMarkOfftopic",value:function(){this._markOfftopic(this.$(".b-offtopic_marker").hasClass("off"))}},{key:"_loadSmileys",value:function(){var e=this,t=this.$(".smileys");t.load(t.data("href"),(function(){e.$(".smileys img").on("click",(function(t){var n=t.currentTarget,i=r(n).attr("alt");e.$textarea.insertAtCaret("",i),e.$(".editor-smiley").trigger("click")}))}))}},{key:"_onKeyPress",value:function(e){27===e.keyCode&&(Object(f.a)(e),this.$textarea.blur()),(e.metaKey||e.ctrlKey)&&(10!==e.keyCode&&13!==e.keyCode||(Object(f.a)(e),this.$form.submit()),66===e.keyCode&&(Object(f.a)(e),this.$(".editor-bold").click()),73===e.keyCode&&(Object(f.a)(e),this.$(".editor-italic").click()),85===e.keyCode&&(Object(f.a)(e),this.$(".editor-underline").click()),83===e.keyCode&&(Object(f.a)(e),this.$(".editor-spoiler").click()),79===e.keyCode&&(Object(f.a)(e),this.$textarea.insertAtCaret("[code]","[/code]")))}},{key:"_markOfftopic",value:function(e){this.$form.find('input[name="comment[is_offtopic]"]').val(e?"true":"false"),this.$(".b-offtopic_marker").toggleClass("off",!e)}},{key:"focus",value:function(){this.$textarea.focus()}},{key:"cleanup",value:function(){this._markOfftopic(!1),this.$textarea.val("").trigger("update")}},{key:"replyComment",value:(l=_(a.a.mark((function e(t,n){var i,o,s,u,l,d,f,h,v,m,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,o=t.type,s=t.userId,u=t.nickname,l=t.text,d=t.url,n&&this._markOfftopic(!0),d?(h=[i,s].compact(),f="[".concat(o,"=").concat(h.join(";"),"], ")):(v=[i,s,u],m=o[0],y=s?"=".concat(m).concat(v.join(";")):"",f="[quote".concat(y,"]").concat(l,"[/quote]\n")),this.$textarea.val("".concat(this.text,"\n").concat(f).replace(/^\n+/,"")).focus().trigger("update").setCursorPosition(this.text.length),e.next=6,c()();case 6:Object(p.isMobile)()&&!this.$textarea.is(":appeared")&&r.scrollTo(this.$form,null,this.focus);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"destroy",value:function(){}}],o&&b(i.prototype,o),s&&b(i,s),Object.defineProperty(i,"prototype",{writable:!1}),y}(n("./app/packs/javascripts/views/application/shiki_view.js").a),O(i.prototype,"_hidePreview",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_hidePreview"),i.prototype),O(i.prototype,"_onMarkOfftopic",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_onMarkOfftopic"),i.prototype),O(i.prototype,"_loadSmileys",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_loadSmileys"),i.prototype),O(i.prototype,"_onKeyPress",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_onKeyPress"),i.prototype),O(i.prototype,"focus",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"focus"),i.prototype),i)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"),n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/shiki_editor_v2.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return $}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./node_modules/p-defer/index.js"),l=n("./node_modules/shiki-decorators/index.js"),p=n("./node_modules/shiki-utils/index.js"),d=n("./app/packs/javascripts/views/application/view.js"),f=n("./app/packs/javascripts/utils/csrf.js"),h=n("./app/packs/javascripts/utils/axios.js");function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P="vue-node",C="vue-node-initialized",$=(i=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}($,t);var i,o,s,l,d,m,y,k,x,O=w($);function $(){return g(this,$),O.apply(this,arguments)}return i=$,o=[{key:"initialize",value:(x=_(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initialization=Object(u.a)(),this.cacheProcessed=Object(u.a)(),this.processedInitialContent=null,this.isPendingSubmit=!1,this.editorApp=null,e.next=7,this._buildEditor();case 7:return this.initialization.resolve(),e.next=10,this._processCache();case 10:this.cacheProcessed.resolve();case 11:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"$form",get:function(){return this.$node.closest("form")}},{key:"isSessionStorageAvailable",get:function(){return"undefined"!==typeof sessionStorage}},{key:"cacheKey",get:function(){var e=this.node.getAttribute("data-cache_key"),t=this.node.getAttribute("data-field_name");return e?t?"".concat(e,"/").concat(t):e:null}},{key:"editorContent",get:function(){return this.editorApp.exportContent()}},{key:"text",get:function(){return this.editorContent}},{key:"_buildEditor",value:(k=_(a.a.mark((function e(){var t,r,i,o,s,c,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vueNode=this.node.querySelector(".".concat(P)),this.input=this.node.querySelector("input"),this.appPlaceholder=this.node.querySelector(".app-placeholder"),this.vueNode||this._rebuildNodes(),e.next=6,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js")),Promise.all([n.e("vendors"),n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-shiki-editor")]).then(n.bind(null,"./node_modules/shiki-editor/index.js")),n.e(0).then(n.bind(null,"./node_modules/shiki-uploader/src/shiki_uploader.js")),Promise.resolve().then(n.bind(null,"./node_modules/shiki-utils/index.js"))]);case 6:t=e.sent,r=v(t,4),i=r[0],o=i.createApp,s=i.h,c=r[1].ShikiEditorApp,u=r[2].default,l=r[3].ShikiRequest,this.app=this._buildApp({createApp:o,h:s},c,u,l),this.vueNode=this.app.$el,this._bindForm(),this._scheduleDestroy();case 18:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"_rebuildNodes",value:function(){var e;null===(e=this.node.querySelector(".".concat(C)))||void 0===e||e.remove(),this.appPlaceholder.classList.remove("hidden"),this.vueNode=document.createElement("div"),this.vueNode.classList.add(P),this.node.insertBefore(this.vueNode,this.node.querySelector("footer"))}},{key:"replyComment",value:function(t,n){var r=this;this.$node.is(":appeared")?(t.constructor===String?this.editorApp.appendText(t):t.html?this.editorApp.appendQuote(t):this._isNoReply(t)?this.editorApp.appendReply(t):this.editorApp.focus(),n&&this._markOfftopic(!0)):e.scrollTo(this.$node,(function(){return r.replyComment(t,n)}))}},{key:"focus",value:function(){e(this.editorApp.$el).is(":appeared")||e.scrollTo(this.editorApp.$el),this.editorApp.focus()}},{key:"cleanup",value:(y=_(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._markOfftopic(!1),this.editorApp.clearContent();case 2:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"_initialContent",value:function(){return this.input.value}},{key:"reprocessCache",value:(m=_(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._processCache();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return");case 4:this.editorApp.discardUnsavedContent(),this.processedInitialContent="";case 6:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"_processCache",value:(d=_(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSessionStorageAvailable){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c()(10);case 4:if(this.processedInitialContent=this.editorContent,!(t=this._readCacheValue())||t===this.processedInitialContent){e.next=11;break}return this.editorApp.setUnsavedContent(t),e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"_buildShikiUploader",value:function(e){return new e({locale:window.LOCALE,xhrEndpoint:"/api/user_images?linked_type=Comment",xhrHeaders:function(){return Object(f.a)().headers}})}},{key:"_buildApp",value:function(t,n,i,o){var a=this,s=t.createApp,c=t.h,u=this._buildShikiUploader(i),l=new o(window.location.origin,h.a),p="en"===document.body.getAttribute("data-localized_names")?"name":"russian",d=this.$form,f=this.appPlaceholder,v=s({components:{ShikiEditorApp:n},mounted:function(){f.classList.add("hidden")},beforeUnmount:function(){f.classList.remove("hidden")},render:function(){return c(n,{shikiUploader:u,shikiRequest:l,globalSearch:window.globalSearch,content:a._initialContent(),localizationField:p,previewParams:a.$node.data("preview_params"),class:C,onPreview:function(t){var n=t.node,r=t.JS_EXPORTS;e(n).process(r)},onSubmit:function(){d.submit()},ref:function(e){return a.editorApp=e}})}});return v.config.globalProperties.I18n=r,v.mount(this.vueNode),v}},{key:"_bindForm",value:function(){this.$form.on("submit",this._formSubmit).on("ajax:before",this._formAjaxBefore).on("ajax:complete",this._formAjaxComplete).on("ajax:success",this._formAjaxSuccess),this.$(".b-offtopic_marker").on("click",this._onMarkOfftopic)}},{key:"_scheduleDestroy",value:function(){e(document).one("turbolinks:before-cache",this.destroy),e(window).one("beforeunload",this.destroy)}},{key:"_markOfftopic",value:function(e){this.$form.find('input[name$="[is_offtopic]"]').val(e?"true":"false"),this.$(".b-offtopic_marker").toggleClass("off",!e)}},{key:"_readCacheValue",value:function(){return this.cacheKey&&this.isSessionStorageAvailable&&window.sessionStorage.getItem(this.cacheKey)||""}},{key:"_writeCacheValue",value:function(e){var t=null===e||void 0===e?void 0:e.trim();if(!t){if(this.editorApp.unsavedContent)return;return this._clearCacheValue()}this.cacheKey&&this.isSessionStorageAvailable&&t!==this.processedInitialContent&&window.sessionStorage.setItem(this.cacheKey,t)}},{key:"_clearCacheValue",value:function(){this.cacheKey&&this.isSessionStorageAvailable&&window.sessionStorage.removeItem(this.cacheKey)}},{key:"_isNoReply",value:function(e){return!this.editorContent.endsWith("[".concat(e.type,"=").concat(e.id,";").concat(e.userId,"],"))}},{key:"_formSubmit",value:function(){this.input.value=this.editorContent,this.isPendingSubmit=!0}},{key:"_formAjaxBefore",value:function(){return this.input.value.replace(/\n| |\r|\t/g,"")?(this.$node.addClass("b-ajax"),!0):(p.flash.error(r.t("frontend.shiki_editor.text_cant_be_blank")),!1)}},{key:"_formAjaxComplete",value:function(){this.$node.removeClass("b-ajax")}},{key:"_formAjaxSuccess",value:(l=_(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c()();case 2:this.input.value="",this.editorApp.setContent(""),this._clearCacheValue(),e(this.editorApp.$el).is(":visible")&&this.focus();case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"_onMarkOfftopic",value:function(){this._markOfftopic(this.$(".b-offtopic_marker").hasClass("off"))}},{key:"destroy",value:function(){e(document).off("turbolinks:before-cache",this.destroy),e(window).off("beforeunload",this.destroy),this.$form.off("submit",this._formSubmit),this.$form.off("ajax:before",this._formAjaxBefore),this.$form.off("ajax:complete",this._formAjaxComplete),this.$form.off("ajax:success",this._formAjaxSuccess),this.app&&(this.isPendingSubmit?this._clearCacheValue():this._writeCacheValue(this.editorContent))}}],o&&b(i.prototype,o),s&&b(i,s),Object.defineProperty(i,"prototype",{writable:!1}),$}(d.a),O(i.prototype,"$form",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"$form"),i.prototype),O(i.prototype,"isSessionStorageAvailable",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"isSessionStorageAvailable"),i.prototype),O(i.prototype,"cacheKey",[l.d],Object.getOwnPropertyDescriptor(i.prototype,"cacheKey"),i.prototype),O(i.prototype,"_formSubmit",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_formSubmit"),i.prototype),O(i.prototype,"_formAjaxBefore",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_formAjaxBefore"),i.prototype),O(i.prototype,"_formAjaxComplete",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_formAjaxComplete"),i.prototype),O(i.prototype,"_formAjaxSuccess",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_formAjaxSuccess"),i.prototype),O(i.prototype,"_onMarkOfftopic",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_onMarkOfftopic"),i.prototype),O(i.prototype,"destroy",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"destroy"),i.prototype),i)}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/short_dialog.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){var e=this;this._scheduleCheckHeight(!1),this.on("appear",this._appear),this.$(".item-reply").on("click",(function(){e.$(".b-new_marker.active").click()}))}},{key:"_deactivateInaccessibleButtons",value:function(){}},{key:"type",get:function(){return"dialog"}},{key:"commentType",get:function(){return"message"}},{key:"typeLabel",get:function(){return e.t("frontend.dynamic_elements.dialog.type_label")}},{key:"$checkHeightNode",get:function(){return this.$inner}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/dynamic_elements/topic.js").a)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/spoiler_block.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./app/packs/javascripts/views/application/view.js"),s=n("./node_modules/shiki-decorators/index.js"),c=n("./app/packs/javascripts/utils/animated.js");function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function _(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var g=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(m,t);var n,r,i,a,s,p=v(m);function m(){return d(this,m),p.apply(this,arguments)}return n=m,r=[{key:"initialize",value:function(){var e=l(this.node.children,2);this.button=e[0],this.content=e[1],this.button.addEventListener("click",this._toggle),this.node.addEventListener("keypress",this._keypress),this.node.addEventListener("keydown",this._keydown)}},{key:"_toggle",value:(a=o.a.mark((function t(n){var r=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),n.stopImmediatePropagation(),(n.x||n.y)&&this.button.blur(),!this.node.classList.contains("is-opened")){t.next=11;break}return this.node.classList.add("is-closing"),t.next=8,Object(c.a)(this.content);case 8:requestAnimationFrame((function(){r.node.classList.remove("is-opened"),r.node.classList.remove("is-closing")})),t.next=15;break;case 11:return this.node.classList.add("is-opened"),t.next=14,Object(c.b)(this.content);case 14:e(this.content).process_hidden_content();case 15:case"end":return t.stop()}}),t,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){u(i,n,r,o,s,"next",e)}function s(e){u(i,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return s.apply(this,arguments)})},{key:"_keypress",value:function(e){switch(e.keyCode){case 32:case 13:this._toggle(e)}}},{key:"_keydown",value:function(e){27===e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation(),this.button.blur())}}],r&&f(n.prototype,r),i&&f(n,i),Object.defineProperty(n,"prototype",{writable:!1}),m}(a.a),_(r.prototype,"_toggle",[s.a],Object.getOwnPropertyDescriptor(r.prototype,"_toggle"),r.prototype),_(r.prototype,"_keypress",[s.a],Object.getOwnPropertyDescriptor(r.prototype,"_keypress"),r.prototype),_(r.prototype,"_keydown",[s.a],Object.getOwnPropertyDescriptor(r.prototype,"_keydown"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/swiper.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=(n("./node_modules/delay/index.js"),n("./node_modules/shiki-decorators/index.js")),s=n("./app/packs/javascripts/views/application/view.js"),c=n("./app/packs/javascripts/views/wall/view.js"),u=n("./app/packs/javascripts/views/wall/cluster.js"),l=n("./app/packs/javascripts/utils/load_image.js");function p(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function g(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var b="swiper",j=!1,w=16/9;function k(){j=!0,e(document).on("resize:debounced orientationchange",x)}function x(){e(".".concat("b-shiki_swiper")).each((function(t,n){var r;return null===(r=e(n).data(b))||void 0===r?void 0:r.update()}))}var O=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(g,t);var r,i,a,s,p,y,_=m(g);function g(){var e;f(this,g);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=_.call.apply(_,[this].concat(n))).isPlaceholder=!1,e.areaWidth=null,e.areaHeight=null,e.wall=null,e.swiper=null,e}return r=g,i=[{key:"initialize",value:(y=d(o.a.mark((function e(){var t,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(r.length>0&&void 0!==r[0])||r[0],j||k(),this.$node.data(b,this),this.isGlobalUpdate=t,this._computeSizes(),this.root.classList.add("is-loading"),e.next=8,this._loadImages();case 8:n=e.sent,this.root.classList.remove("is-loading"),(n&&1===this.$images.length||!this.$images.length)&&(this.isPlaceholder=!0),this._initializeContent(),this.update();case 13:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"width",get:function(){return this.$root.width().floor()}},{key:"isEagerCropping",get:function(){return 1===this.$images.length&&this.isAlignCover}},{key:"isAlignCover",get:function(){return"cover"===this.align}},{key:"align",get:function(){return this.$root.data("swiper-align")||"contain"}},{key:"desiredHeight",get:function(){return this.$root.data("swiper-height")||0}},{key:"isVideo",get:function(){return this.$root.children(".b-video").length}},{key:"isVideoShrinked",get:function(){return this.isVideo&&this.$root.children(".b-video.shrinked").length}},{key:"$links",get:function(){return this.$root.children()}},{key:"$images",get:function(){return this.$links.find("img")}},{key:"update",value:function(e){(e||this.isGlobalUpdate)&&((this.swiper||this.wall)&&this.destroy(),this._computeSizes(),this._initializeContent())}},{key:"destroy",value:function(){this.wall?(this.wall.destroy(),this.wall=null):(this.$images.each((function(t,n){return e(n).removeAttr("style")})),this.$node.removeAttr("style")),this.swiper&&(this.swiper.destroy(),this.swiper=null,this.$links.unwrap())}},{key:"_initializeContent",value:function(){this.isPlaceholder?this.root.classList.add("is-placeholder"):this.isEagerCropping?this._initializeEagerCroppedImage():this._initializeWallOrSwiper()}},{key:"_initializeEagerCroppedImage",value:function(){var e=this.$images[0],t=e.naturalWidth/(!this.isAlignCover&&this.isVideoShrinked?.744047619*e.naturalHeight:e.naturalHeight),n=this.areaWidth/this.areaHeight,r=t>n;t<n&&(this.isAlignCover?this._alignVertical(t):this.$images.css("height",this.areaHeight)),r&&(this.isAlignCover?this._alignHorizontal(t):this.$images.css("width",this.areaWidth)),this.isVideo?this.$links.shikiVideo():this.$links.shikiImage()}},{key:"_initializeWallOrSwiper",value:function(){this.wall&&(this.wall.destroy(),this.wall=null),this.swiper&&(this.swiper.destroy(),this.swiper=null),this.wall=this._buildWall(),this.wall.images.length?this.width<this.areaWidth&&this.isAlignCover?this._scaleWall(this.wall,this.areaWidth):this.wall.images.length>1&&this._buildSwiper():this._setPlaceholder()}},{key:"_buildWall",value:function(){var e=null;if(this.isVideo){var t=this.$images[0],n=t.naturalWidth,r=n/t.naturalHeight;n>this.areaWidth&&(e=this.areaWidth/r*(this.isVideoShrinked?.744047619:1))}return new c.a(this.$root,{isOneCluster:!0,maxWidth:9999,maxHeight:e||9999,awaitImagesLoaded:!1})}},{key:"_setPlaceholder",value:function(e,t){this.$root.css({width:e,height:t}).addClass("is-placeholder")}},{key:"_scaleWall",value:function(e,t){var n=e.images.first();1===e.images.length&&n.ratio>w||new c.a(this.$root,{isOneCluster:!0,maxWidth:t,maxHeight:9999,awaitImagesLoaded:!1}).images.forEach((function(e,t){t>0&&e.$root.css({left:"","margin-left":u.a.MARGIN})}))}},{key:"_buildSwiper",value:(p=d(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$root.children().addClass("swiper-slide").removeAttr("style").wrapAll('<div class="swiper-wrapper" />'),e.next=3,n.e("app-swiper").then(n.bind(null,"./app/packs/javascripts/vendor/async/swiper.js"));case 3:t=e.sent,r=t.default,this.swiper=new r(this.root,{slidesPerView:"auto",spaceBetween:u.a.MARGIN,a11y:!1});case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"_alignVertical",value:function(e){var t=this.areaWidth/e,n=this.areaHeight/t,r=[10,((100-100*n)/2/n).round(2)].min();this.isVideo||this.$links.css("margin-top",r>0?"-".concat(r,"%"):""),this.$images.css("width",this.areaWidth)}},{key:"_alignHorizontal",value:function(e){var t=this.areaHeight*e,n=this.areaWidth/t,r=((100-100*n)/2/n).round(2);this.isVideo||this.$links.css("margin-left",r>0?"-".concat(r,"%"):""),this.$images.css("height",this.areaHeight)}},{key:"_computeSizes",value:function(){var e,t=this.width;0!==this.desiredHeight?e=this.desiredHeight:this.isEagerCropping&&(e=(t/w).floor()),this.areaWidth=t,e&&(this.areaHeight=e,this.$root.css("max-height",this.areaHeight))}},{key:"_loadImages",value:(s=d(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,Object(l.c)(this.root).catch((function(){return t=!0}));case 3:if(!this.$(".dynamically-replaced").length){e.next=6;break}return e.next=6,Object(l.c)(this.root).catch((function(){return t=!0}));case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}],i&&h(r.prototype,i),a&&h(r,a),Object.defineProperty(r,"prototype",{writable:!1}),g}(s.a),g(r.prototype,"isEagerCropping",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"isEagerCropping"),r.prototype),g(r.prototype,"isAlignCover",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"isAlignCover"),r.prototype),g(r.prototype,"align",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"align"),r.prototype),g(r.prototype,"desiredHeight",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"desiredHeight"),r.prototype),g(r.prototype,"isVideo",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"isVideo"),r.prototype),g(r.prototype,"isVideoShrinked",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"isVideoShrinked"),r.prototype),g(r.prototype,"$links",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"$links"),r.prototype),g(r.prototype,"$images",[a.d],Object.getOwnPropertyDescriptor(r.prototype,"$images"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/switcher.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){var t=this,n=this.$root.data("switcher");this.on("click",(function(){e('.active[data-switcher="'.concat(n,'"]')).removeClass("active"),t.$root.addClass("active")}))}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/tabs.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){var e=this;this.$tabs=this.$("[data-tab]"),this.$tabSwitches=this.$("[data-tab-switch]"),this.$tabSwitches.on("click",(function(t){var n=t.currentTarget;return e._switchTab(n)}))}},{key:"_switchTab",value:function(t){var n=this.$tabSwitches.toArray().indexOf(t),r=e(this.$tabs[n]);this.$tabSwitches.removeClass("active"),t.classList.add("active"),this.$tabs.addClass("hidden"),r.removeClass("hidden"),r.process_hidden_content()}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/text_annotated.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){var e=this;this.$node.data("texts").forEach((function(t){return e.addText(t)}))}},{key:"addText",value:function(t){var n=null==t.group_index?"":".cc-collection-groups[data-index=".concat(t.group_index,"]");this.$("\n      ".concat(n,"\n      .b-catalog_entry.c-").concat(t.linked_type,"#").concat(t.linked_id,"\n      .image-decor\n    ")).each((function(n,r){return e(r).append("<div class='text'>".concat(t.text,"</div>")).children(".text").process()}))}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/topic.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return C}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./node_modules/shiki-decorators/index.js"),l=n("./app/packs/javascripts/views/application/shiki_editable.js"),d=(n("./node_modules/shiki-utils/index.js"),n("./app/packs/javascripts/utils/axios.js")),f=n("./app/packs/javascripts/utils/animated.js");n("./app/packs/javascripts/utils/load_image.js");function h(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){h(o,r,i,a,s,"next",e)}function s(e){h(o,r,i,a,s,"throw",e)}a(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function x(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var O="frontend.dynamic_elements.topic",P=["topics_show","collections_show","critiques_show","reviews_show"],C=(i=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(g,t);var i,o,s,u,l,h=j(g);function g(){return m(this,g),h.apply(this,arguments)}return i=g,o=[{key:"initialize",value:function(){var t=this;if(this.model=this.$node.data("model")||this.defaultModel,window.SHIKI_USER.isUserIgnored(this.model.user_id)||window.SHIKI_USER.isTopicIgnored(this.model.id)){if(!P.includes(document.body.id))return void(this.$node.parent().length?this.$node.remove():c()().then((function(){return t.$node.remove()})));this._toggleIgnored(!0)}this.$editorContainer=this.$(".editor-container"),this.$editor=this.$(".shiki_editor-selector"),this.$editorForm=this.$editor.closest("form"),this.$footerVote=this.$inner.find(".b-footer_vote"),this.$commentsLoader=this.$(".comments-loader"),window.SHIKI_USER.isSignedIn&&window.SHIKI_USER.isDayRegistered&&this.$editor.length?this.editor=this.$editor.process().view():(this.$editorForm.length&&this.$editorForm.replaceWith("<div class='b-nothing_here'>".concat(e.t("frontend.shiki_editor.not_available"),"</div>")),this.$editor=null,this.$editorForm=null),this.model&&!this.model.is_viewed&&this._activateAppearMarker(),this.model&&this.$footerVote.length&&this._actualizeVoting(),this.$checkHeightNode.length&&(this.isPreview||this.isClubPage)&&this._scheduleCheckHeight(!0),this.isCosplay&&!this.isPreview&&n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/application/shiki_gallery.js")).then((function(e){return new(0,e.ShikiGallery)(t.$(".b-cosplay_gallery .b-gallery"))})),this.$editorForm&&this.$editorForm.on("ajax:success",(function(e,n){var i=r(n.content).process(n.JS_EXPORTS);t.$(".b-comments").find(".b-nothing_here").remove(),t.$editor.is(":last-child")?t.$(".b-comments").append(i):t.$(".b-comments").prepend(i),i.yellowFade(),t.editor.cleanup(),t._hideEditor()})),r(".item-ignore",this.$inner).on("ajax:before",(function(){r(this).toggleClass("selected")})).on("ajax:success",(function(e,n){n.is_ignored?window.SHIKI_USER.ignoreTopic(n.topic_id):window.SHIKI_USER.unignoreTopic(n.topic_id),t._toggleIgnored(n.is_ignored)})),this.$footerVote.length&&this._bindVotes(),this.on("appear",this._appear),this.on("comment:reply",(function(e,n,r){t.editor&&(t._showEditor(),n?t.editor.replyComment(n,r):t.editor.focus())})),this.$(".shiki_editor-selector").on("click",".hide",this._hideEditor),this.on("clickloaded:before",".comments-loader",this._beforeCommentsClickload),this.on("clickloaded:success",".comments-loader",this._commentsClickloaded),this.on("click",".comments-loader",(function(){"clickloaded"!==t.$commentsLoader.data("dynamic")&&(t.$commentsLoader.addClass("hidden"),t.$(".comments-loaded").each((function(e,t){return Object(f.b)(t)})),t.$commentsHider.show())})),this.$commentsCollapser.on("click",(function(){t.$commentsCollapser.addClass("hidden"),t.$commentsLoader.addClass("hidden"),t.$commentsExpander.show(),t.$(".comments-loaded").each((function(e,t){return Object(f.a)(t)}))})),this.$commentsHider.on("click",(function(){t.$commentsHider.hide(),t.$(".comments-loaded").each((function(e,t){return Object(f.a)(t)})),t.$commentsExpander.show()})),this.$commentsExpander.on("click",(function(){t.$commentsExpander.hide(),t.$(".comments-loaded").each((function(e,t){return Object(f.b)(t)})),t.$commentsLoader?(t.$commentsLoader.removeClass("hidden"),t.$commentsCollapser.removeClass("hidden")):t.$commentsHider.show()})),this._bindReturnClick()}},{key:"_showReturnButton",value:(l=v(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()(300);case 2:r("span.return-to-reply").css("visibility",r(this.repliedNode).is(":appeared")?"hidden":"visible");case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"_saveRepliablePosition",value:function(e){this.repliedNode=e}},{key:"_returnToReplyComment",value:function(){this.repliedNode&&r.scrollTo(r(this.repliedNode)),r("span.return-to-reply").css("visibility","hidden"),this.repliedNode=null}},{key:"_bindReturnClick",value:function(){var e=this;this.on("click","span.item-reply, span.item-quote, span.item-quote-mobile",(function(t){var n=r(t.target).closest(".inner");e._saveRepliablePosition(n),e._showReturnButton()})),this.$("span.return-to-reply").on("click",(function(){e._returnToReplyComment()}))}},{key:"defaultModel",get:function(){return{can_destroy:!1,can_edit:!1,id:parseInt(this.node.id),is_viewed:!0,user_id:this.$node.data("user_id"),voted_yes:!1,voted_no:!1}}},{key:"type",get:function(){return"topic"}},{key:"commentType",get:function(){return"comment"}},{key:"typeLabel",get:function(){return e.t("".concat(O,".type_label"))}},{key:"reloadUrl",get:function(){return"/".concat(this.type,"s/").concat(this.$node.attr("id"),"/reload?is_preview=").concat(this.isPreview,"&is_mini=").concat(this.isMini)}},{key:"$body",get:function(){return this.$inner.children(".body")}},{key:"isPreview",get:function(){return this.$node.hasClass("b-topic-preview")}},{key:"isMini",get:function(){return this.$node.hasClass("b-topic-minified")}},{key:"isCosplay",get:function(){return this.$node.hasClass("b-cosplay-topic")}},{key:"isClubPage",get:function(){return this.$node.hasClass("b-club_page-topic")}},{key:"isCritique",get:function(){return this.$node.hasClass("b-critique-topic")}},{key:"isReview",get:function(){return this.$node.hasClass("b-review-topic")}},{key:"$commentsHider",get:function(){return this.$(".comments-hider")}},{key:"$commentsCollapser",get:function(){return this.$(".comments-collapser")}},{key:"$commentsExpander",get:function(){return this.$(".comments-expander")}},{key:"$checkHeightNode",get:function(){return this.$body}},{key:"_assignCheckHeightLimits",value:function(){this.isReview||this.isCritique?(this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=220,this.CHECK_HEIGHT_COLLAPSED_HEIGHT=120,this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=120):_(k(g.prototype),"_assignCheckHeightLimits",this).call(this)}},{key:"_bindFaye",value:function(){var e=this;_(k(g.prototype),"_bindFaye",this).call(this),this.on(["faye:".concat(this.commentType,":updated"),"faye:".concat(this.commentType,":deleted"),"faye:".concat(this.commentType,":converted"),"faye:".concat(this.commentType,":set_replies")].join(" "),(function(t,n){t.stopImmediatePropagation();var r=t.type.match(/comment|message/)[0],i=n["".concat(r,"_id")];t.target===e.$node[0]&&e.$(".b-".concat(r,"#").concat(i)).trigger(t.type,n)})),this.on("faye:".concat(this.commentType,":created"),(function(t,n){t.stopImmediatePropagation();var i=t.type.match(/comment|message/)[0],o=n["".concat(i,"_id")];if(!e.$(".b-".concat(i,"#").concat(o)).exists()){var a=e._fayePlaceholder(o,i);r(document.body).trigger("faye:added"),window.SHIKI_USER.isCommentsAutoLoaded&&a.is(":appeared")&&!r("textarea:focus").val()&&a.click()}})),this.on("faye:comment:marked",(function(e,t){e.stopImmediatePropagation(),r(".b-comment#".concat(t.comment_id)).view().mark(t.mark_kind,t.mark_value)}))}},{key:"_toggleIgnored",value:function(e){r(".item-ignore",this.$inner).toggleClass("selected",e).data({method:e?"DELETE":"POST"}),this.$(".b-anime_status_tag.ignored").toggleClass("hidden",!e)}},{key:"_filterPresentEntries",value:function(e){var t="b-comment",n=r(".".concat(t),this.$node).toArray().map((function(e){return e.id})).filter((function(e){return e})).map((function(e){return".".concat(t,"#").concat(e)})).join(",");e.children().filter(n).remove()}},{key:"_showEditor",value:function(){this.isPreview&&!this.$editorContainer.is(":visible")&&this.$editorContainer.show()}},{key:"_hideEditor",value:function(){this.isPreview&&this.$editorContainer.hide()}},{key:"_fayePlaceholder",value:function(t,n){var i;this.$(".b-comments .b-nothing_here").remove();var o=this.$(".b-comments .faye-loader");if(o.exists()||(o=r('<div class="faye-loader to-process" data-dynamic="clickloaded"></div>').appendTo(this.$(".b-comments")).data({ids:[]}).process().on("clickloaded:success",(function(e,t){var n=r(t.content).process(t.JS_EXPORTS);o.replaceWith(n),n.process()}))),-1===(null===(i=o.data("ids"))||void 0===i?void 0:i.indexOf(t))){var a=o.data("ids").add(t);o.data({ids:a,"clickloaded-url":"/".concat(n,"s/chosen/").concat(a.join(","))});var s=o.data("ids").length;o.html("message"===n?p(s,e.t("".concat(O,".new_message_added.one"),{count:s}),e.t("".concat(O,".new_message_added.few"),{count:s}),e.t("".concat(O,".new_message_added.many"),{count:s})):p(s,e.t("".concat(O,".new_comment_added.one"),{count:s}),e.t("".concat(O,".new_comment_added.few"),{count:s}),e.t("".concat(O,".new_comment_added.many"),{count:s})))}return o}},{key:"_appear",value:(u=v(a.a.mark((function e(t,n,i){var o,s,u,l,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=n.not((function(){return r(this).data("disabled")||!(this.classList.contains("b-appear_marker")&&this.classList.contains("active"))}))).exists()){e.next=3;break}return e.abrupt("return");case 3:if(s=i?1:1500,u=o.closest("[data-appear_type]"),l=u.find(".b-new_marker.active"),p=u.map((function(){var e=r(this).data("appear_type");return"".concat(e,"-").concat(this.id)})).toArray(),d.a.post(l.data("appear_url"),{ids:p.join(",")}),o.remove(),!l.data("reappear")){e.next=13;break}l.addClass("off"),e.next=20;break;case 13:return e.next=15,c()(s);case 15:return l.css({opacity:0}),e.next=18,c()(500);case 18:l.hide(),l.removeClass("active");case 20:case"end":return e.stop()}}),e)}))),function(e,t,n){return u.apply(this,arguments)})},{key:"_beforeCommentsClickload",value:function(){var e=this.$commentsLoader.data("clickloaded-url-template").replace("SKIP",this.$commentsLoader.data("skip"));this.$commentsLoader.data("clickloaded-url",e)}},{key:"_commentsClickloaded",value:function(e,t){var n=r("<div class='comments-loaded'></div>").html(t.content);this._filterPresentEntries(n),n.process(t.JS_EXPORTS).insertAfter(this.$commentsLoader),Object(f.b)(n[0]),this._updateCommentsLoader(t)}},{key:"_actualizeVoting",value:function(){this.$inner.find(".b-footer_vote .vote.yes, .user-vote .voted-for").toggleClass("selected",this.model.voted_yes),this.$inner.find(".b-footer_vote .vote.no, .user-vote .voted-against").toggleClass("selected",this.model.voted_no),null!=this.model.votes_for&&this.$inner.find(".votes-for").html("".concat(this.model.votes_for)),null!=this.model.votes_against&&this.$inner.find(".votes-against").html("".concat(this.model.votes_against))}},{key:"_updateCommentsLoader",value:function(t){var n=this.$commentsLoader.data("limit"),r=this.$commentsLoader.data("count")-n;if(r>0){this.$commentsLoader.data({skip:this.$commentsLoader.data("skip")+n,count:r});var i=Math.min(n,r),o=p(i,e.t("".concat(O,".comment.one")),e.t("".concat(O,".comment.few")),e.t("".concat(O,".comment.many"))),a=r>n?"".concat(e.t("".concat(O,".of"))," ").concat(r):"",s=e.t("".concat(O,".load_comments"),{comment_count:i,of_total_comments:a,comment_word:o});this.$commentsLoader.html(s),this.$commentsCollapser.removeClass("hidden")}else this.$commentsLoader.remove(),this.$commentsLoader=null,this.$commentsHider.show(),this.$commentsCollapser.remove()}},{key:"_bindVotes",value:function(){var e,t=this;(null===(e=window.SHIKI_USER)||void 0===e?void 0:e.id)===this.model.user_id&&this.$footerVote.remove(),this.$footerVote.find(".vote").on("ajax:before",(function(e){t.$footerVote.addClass("b-ajax");var n=r(e.target),i=n.hasClass("yes"),o=null;i?t.model.voted_yes?(o="unvote",t.model.votes_for-=1):(o="yes",t.model.votes_for+=1,t.model.voted_no&&(t.model.votes_against-=1)):t.model.voted_no?(o="unvote",t.model.votes_against-=1):(o="no",t.model.votes_against+=1,t.model.voted_yes&&(t.model.votes_for-=1)),n.data("action",n.data("action").replace(/vote=\w+/,"vote=".concat(o))),t.model.voted_yes=!t.model.voted_yes&&i,t.model.voted_no=!t.model.voted_no&&!i,t._actualizeVoting()})).on("ajax:complete",(function(){t.$footerVote.removeClass("b-ajax")}))}}],o&&y(i.prototype,o),s&&y(i,s),Object.defineProperty(i,"prototype",{writable:!1}),g}(l.a),x(i.prototype,"$body",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"$body"),i.prototype),x(i.prototype,"isPreview",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isPreview"),i.prototype),x(i.prototype,"isMini",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isMini"),i.prototype),x(i.prototype,"isCosplay",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isCosplay"),i.prototype),x(i.prototype,"isClubPage",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isClubPage"),i.prototype),x(i.prototype,"isCritique",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isCritique"),i.prototype),x(i.prototype,"isReview",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"isReview"),i.prototype),x(i.prototype,"$commentsHider",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"$commentsHider"),i.prototype),x(i.prototype,"$commentsCollapser",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"$commentsCollapser"),i.prototype),x(i.prototype,"$commentsExpander",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"$commentsExpander"),i.prototype),x(i.prototype,"$checkHeightNode",[u.d],Object.getOwnPropertyDescriptor(i.prototype,"$checkHeightNode"),i.prototype),x(i.prototype,"_hideEditor",[u.a],Object.getOwnPropertyDescriptor(i.prototype,"_hideEditor"),i.prototype),x(i.prototype,"_beforeCommentsClickload",[u.a],Object.getOwnPropertyDescriptor(i.prototype,"_beforeCommentsClickload"),i.prototype),x(i.prototype,"_commentsClickloaded",[u.a],Object.getOwnPropertyDescriptor(i.prototype,"_commentsClickloaded"),i.prototype),i)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"),n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/user_rates/button.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return k}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./node_modules/shiki-utils/index.js"),l=n("./node_modules/shiki-decorators/index.js"),p=n("./app/packs/javascripts/services/user_rates/tracker.js"),d=n("./app/packs/javascripts/views/application/view.js"),f=n("./app/packs/javascripts/utils/jst.js"),h=n("./app/packs/javascripts/dynamic_elements/authorized_action.js");function v(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function w(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var k=(i=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(b,t);var n,i,o,s,l,d=g(b);function b(){return m(this,b),d.apply(this,arguments)}return n=b,i=[{key:"initialize",value:function(){this.model=this.$root.data("model"),this._render(),this.on("click",".trigger-arrow",this._toggleList),this.on("click",".edit-trigger",this._toggleList),this.on("click",".add-trigger",this._submitStatus),this.on("ajax:before",this._ajaxBefore),this.on("ajax:error",this._ajaxComplete),this.on("ajax:success",this._ajaxSuccess)}},{key:"isPersisted",get:function(){return!!this.model.id}},{key:"_toggleList",value:(s=a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$(".b-add_to_list").toggleClass("expanded"),this.$(".expanded-options").data("height")||this.$(".expanded-options").data("height",this.$(".expanded-options").height()).css("height",0).show(),e.next=4,c()();case 4:t=this.$(".b-add_to_list").hasClass("expanded")?this.$(".expanded-options").data("height"):0,this.$(".expanded-options").css("height",t);case 6:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){v(i,n,r,o,a,"next",e)}function a(e){v(i,n,r,o,a,"throw",e)}o(void 0)}))},function(){return l.apply(this,arguments)})},{key:"_submitStatus",value:function(t){var n=e(t.target).closest("form");n.find('input[name="user_rate[status]"]').val(e(t.currentTarget).data("status")),n.submit()}},{key:"_ajaxBefore",value:function(){if(!window.SHIKI_USER.isSignedIn)return u.flash.info(r.t("".concat(h.b,".register_to_complete_action"))),!1;this.$root.addClass("b-ajax")}},{key:"_ajaxComplete",value:function(){this.$root.removeClass("b-ajax")}},{key:"_ajaxSuccess",value:function(e,t){p.a.update(t||this._newUserRate()),this._ajaxComplete()}},{key:"update",value:function(e){this.model=e,this._render()}},{key:"_render",value:function(){this.html(f.a["user_rates/button"](this._renderParams())).process()}},{key:"_renderParams",value:function(){var e=this.isPersisted?"/api/v2/user_rates/".concat(this.model.id):"/api/v2/user_rates";return{model:this.model,user_id:window.SHIKI_USER.id,statuses:r.t("".concat("activerecord.attributes.user_rate.statuses",".").concat(this.model.target_type.toLowerCase())),form_url:e,form_method:this.isPersisted?"PATCH":"POST",destroy_url:this.isPersisted?"/api/v2/user_rates/".concat(this.model.id):void 0,extended_html:this._extendedHtml()}}},{key:"_newUserRate",value:function(){return{status:"planned",target_id:this.model.target_id,target_type:this.model.target_type}}},{key:"_extendedHtml",value:function(){}}],i&&y(n.prototype,i),o&&y(n,o),Object.defineProperty(n,"prototype",{writable:!1}),b}(d.a),w(i.prototype,"_toggleList",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_toggleList"),i.prototype),w(i.prototype,"_submitStatus",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_submitStatus"),i.prototype),w(i.prototype,"_ajaxBefore",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_ajaxBefore"),i.prototype),w(i.prototype,"_ajaxComplete",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_ajaxComplete"),i.prototype),w(i.prototype,"_ajaxSuccess",[l.a],Object.getOwnPropertyDescriptor(i.prototype,"_ajaxSuccess"),i.prototype),i)}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/dynamic_elements/wall_or_swiper.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n("./app/packs/javascripts/dynamic_elements/swiper.js"),i=n("./app/packs/javascripts/views/application/view.js"),o=n("./app/packs/javascripts/views/wall/view.js"),a=n("./node_modules/shiki-utils/index.js");function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var f=!1,h="wall_or_swiper";function v(){e(".".concat("b-shiki_swiper,.b-shiki_wall")).each((function(t,n){var r;return null===(r=e(n).data(h))||void 0===r?void 0:r.update()}))}var m=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(m,t);var n,i,p,d=l(m);function m(){return s(this,m),d.apply(this,arguments)}return n=m,(i=[{key:"initialize",value:function(){f||(f=!0,e(document).on("resize:debounced orientationchange",v)),this.$node.data(h,this),this.update()}},{key:"isPhone",get:function(){return Object(a.isPhone)()}},{key:"update",value:function(){this.isPhone&&!this.$node.data("wall_always")?this._updatePhone():this._updateDesktop()}},{key:"_updatePhone",value:function(){this.wall&&(this.wall.destroy(),this.wall=null),this.swiper?this.swiper.update(!0):this._buildSwiper()}},{key:"_updateDesktop",value:function(){this.swiper&&(this.swiper.destroy(),this.swiper=null),this.wall?this.wall.update():this._buildWall()}},{key:"_buildSwiper",value:function(){this.node.classList.remove("b-shiki_wall"),this.node.classList.add("b-shiki_swiper"),this.swiper=new r.a(this.node,!1)}},{key:"_buildWall",value:function(){this.node.classList.add("b-shiki_wall"),this.node.classList.remove("b-shiki_swiper"),this.wall=new o.a(this.node)}}])&&c(n.prototype,i),p&&c(n,p),Object.defineProperty(n,"prototype",{writable:!1}),m}(i.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/dynamic_elements/week_registered_action.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r,i=n("./node_modules/shiki-decorators/index.js"),o=n("./node_modules/shiki-utils/index.js"),a=n("./app/packs/javascripts/views/application/view.js"),s=n("./app/packs/javascripts/dynamic_elements/authorized_action.js");function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h,v,m,y,_,g,b=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(d,t);var n,r,i,a=p(d);function d(){return c(this,d),a.apply(this,arguments)}return n=d,(r=[{key:"initialize",value:function(){this.$node.on("click",this.onClick)}},{key:"onClick",value:function(t){window.SHIKI_USER.isSignedIn?window.SHIKI_USER.isWeekRegistered||(o.flash.info(e.t("".concat("frontend.dynamic_elements.week_registered_action",".action_will_be_available"))),t.stopImmediatePropagation(),t.preventDefault()):(o.flash.info(e.t("".concat(s.b,".register_to_complete_action"))),t.stopImmediatePropagation(),t.preventDefault())}}])&&u(n.prototype,r),i&&u(n,i),Object.defineProperty(n,"prototype",{writable:!1}),d}(a.a),h=r.prototype,v="onClick",m=[i.a],y=Object.getOwnPropertyDescriptor(r.prototype,"onClick"),_=r.prototype,g={},Object.keys(y).forEach((function(e){g[e]=y[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=m.slice().reverse().reduce((function(e,t){return t(h,v,e)||e}),g),_&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(_):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(h,v,g),g=null),r)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/i18n/translations.js":function(e,t,n){(function(e){e.translations||(e.translations={}),e.translations.en=e.extend(e.translations.en||{},JSON.parse('{"activerecord":{"attributes":{"collection_link":{"group":"Group","text":"Comment"},"external_link":{"url":"Url"},"user_rate":{"chapters":"Chapters","episodes":"Episodes","rereads":"Number of Rereads","rewatches":"Number of Rewatches","score":"Score","scores":{"0":"","1":"Worst Ever","10":"Masterpiece!","2":"Terrible","3":"Very Bad","4":"Bad","5":"So-so","6":"Fine","7":"Good","8":"Excellent","9":"Great"},"status":"Status","statuses":{"anime":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Watch","rewatching":"Rewatching","watching":"Watching"},"manga":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Read","rewatching":"Rereading","watching":"Reading"},"ranobe":{"completed":"Completed","dropped":"Dropped","on_hold":"On Hold","planned":"Planned to Read","rewatching":"Rereading","watching":"Reading"}},"text":"Comments","volumes":"Volumes"}}},"frontend":{"about":{"comments_per_day":"Comments per day","new_users_per_day":"New users per day","unique_visitors":"Unique visitors","views":"Views","visits":"Visits"},"achievements":{"title":{"gained":"Achievement Gained","lost":"Achievement Lost"}},"actions":{"add":"Add"},"application":{"sure_to_leave_page":"You have not saved your comment!\\nAre you sure you want to leave this page?"},"blocks":{"click_loader":{"loading":"Loading..."},"feedback":{"message_sent":"Message sent"},"main_search":{"animes":"Anime search...","characters":"Character search...","mangakas":"Mangaka search...","mangas":"Manga search...","people":"Person search...","producers":"Producer search...","ranobe":"Ranobe search...","seyu":"Seyu search...","users":"User search..."},"tooltip":{"loading":"Loading..."}},"collections":{"autocomplete":{"anime":"Anime title","character":"Character name","manga":"Manga title","person":"Person name","ranobe":"Light Novel title"},"disabled_add_group_hint":"To add a new group, fill in the blank group name","group_name":"Group name","json_warning":"Do not edit this if you are not sure what you are doing! Inserting invalid data will break the page.","kind":{"anime":"Anime","character":"Characters","manga":"Manga","person":"People","ranobe":"Light Novel and Novel"}},"coub_tags":{"name":"Name","nothing_here":"No names"},"desynced":{"name":"Field name","nothing_here":"No fields"},"dynamic_elements":{"authorized_action":{"register_to_complete_action":"Please \\u003ca href=\\"/users/sign_up\\"\\u003eregister\\u003c/a\\u003e to complete this action."},"check_height":{"expand":"expand"},"comment":{"marked_as_offtopic":"Comment has been marked as offtopic","marked_as_summary":"Comment has been marked as summary","multiple_marked_as_offtopic":"Comments have been marked as offtopic","not_marked_as_offtopic":"Removed offtopic marking","not_marked_as_summary":"Removed summary marking","type_label":"Comment"},"day_registered_action":{"action_will_be_available":"Action will be available one day after \\u003ca href=\\"/users/sign_up\\"\\u003eregistration\\u003c/a\\u003e."},"dialog":{"type_label":"Dialog"},"message":{"type_label":"Message"},"not_implemented_yet_action":"This action is temporarily not available","review":{"type_label":"Review"},"shiki_editable":{"your_request_will_be_considered":"Your request will be considered. Domo arigato."},"topic":{"comment":{"few":"comments","many":"comments","one":"comment"},"load_comments":"Load next %{comment_count} %{of_total_comments} %{comment_word}","new_comment_added":{"few":"%{count} new comments added","many":"%{count} new comments added","one":"%{count} new comment added"},"new_message_added":{"few":"%{count} new messages added","many":"%{count} new messages added","one":"%{count} new message added"},"of":"of","type_label":"Topic"},"week_registered_action":{"action_will_be_available":"Action will be available one day after \\u003ca href=\\"/users/sign_up\\"\\u003eregistration\\u003c/a\\u003e."}},"external_links":{"groups":{"links":"Links","watch_online":"Online Watching"},"nothing_here":"No external links","warn":{"watch_online":"Link to the playlist/online player/official channel with online watching","youtube":"Link to the official channel with episodes of online watching"}},"fandubbers":{"name":"Name","nothing_here":"No names"},"fansubbers":{"name":"Name","nothing_here":"No names"},"images":{"cancel":"Cancel","confirm":"Confirm","delete":"Delete"},"lib":{"comments_notifier":{"number_of_unread_comments":"Number of unread comments"},"file_uploader":{"drop_picture_here":"Drop picture here","drop_pictures_here":"Drop pictures here","file_type_not_allowed":"The file is not an image","uploading_file":"uploading file %{filename} (%{filesize} kb)...","uploading_files":"uploading files %{uploadedCount} of %{totalCount} (%{kbUploaded} / %{kbTotal} kb)"},"jquery_shiki_file":{"browser_not_supported":"Error occured or maybe your browser is too old","drop_pictures_here":"Drop pictures here","file_type_not_allowed":"The file is not an image","loading_file":"loading file %{filename} (%{filesize} kB)...","please_try_again_later":"Error. Please try again later","too_large_file":"File is too large: 4 MB max","too_many_files":"Too many files: max %{count} files at once","wait_till_loaded":"Wait till files are loaded"},"jquery_shiki_forum":{"new_topics_added":{"few":"%{count} new topics added","many":"%{count} new topics added","one":"%{count} new topic added"}},"loading":"Loading...","nothing_found":"Nothing found","please_try_again_later":"Error. Please try again later","postloader":{"loading":"Loading..."},"rails_ujs_modified":{"body":"Text","created_at":"","email":"E-mail","forbidden":"","invalid_login_or_password":"Invalid login or password","nickname":"Nickname","password":"Password","subject":"Subject","title":"Title","you_are_not_authorized":"You are not authorized to perform this action"}},"licensors":{"name":"Name","nothing_here":"No names"},"options":{"name":"Option name","nothing_here":"No options"},"pages":{"p_animes":{"hentai":"Hentai / Roskomnadzor","licensed":"Licensed in Russia","no_data":"No data","watch_online":"Watch Online"},"p_contests":{"candidate":{"few":"%{count} candidates","many":"%{count} candidates","one":"%{count} candidate","other":"%{count} candidates"}},"p_profiles":{"day":{"few":"days","many":"days","one":"day"},"hour":{"few":"hours","many":"hours","one":"hour"},"label":{"full":"%{hours} %{hourWord} since %{fromDate} till %{toDate} (%{days} %{dayWord})","short":"%{hours} %{hourWord} on %{date}"},"page_is_reloading":"Page is reloading..."},"p_recommendations_index":{"dont_recommend_franchise":"Don\'t recommend this franchise any more"},"p_user_rates":{"changes_saved":"Changes saved","error_occurred":"Error occurred","insufficient_data":"Insufficient data","reread":{"few":"re-reads","many":"re-reads","one":"re-read"},"rewatch":{"few":"rewatches","many":"rewatches","one":"rewatch"}}},"poll_variants":{"name":"Text","nothing_here":"No options"},"polls":{"abstain":"Abstain","vote":"Vote"},"search":{"mode":{"anime":"Anime","character":"Character","index":"This page","manga":"Manga","person":"Person","ranobe":"Ranobe"},"nothing_found":"Nothing found."},"shiki_editable":{"changed":"is changed by","click_to_reload":"Click to reload.","comment_converted":"Comment is converted into \\u003ca class=\'b-link\' href=\'%{url}\'\\u003ereview\\u003c/a\\u003e by","deleted":"is deleted by","message_changed":"is changed by","message_deleted":"is deleted by","review_converted":"Review is converted into \\u003ca class=\'b-link\' href=\'%{url}\'\\u003ecomment\\u003c/a\\u003e by"},"shiki_editor":{"blockquote":"Quote","bold":"Bold","bullet_list":"List","code_block":"Code block","code_inline":"Code","color":"Color","colors":{"black":"Black","blue":"Blue","brown":"Brown","gray":"Gray","green":"Green","orange":"Orange","pink":"Pink","red":"Red","violet":"Violet","yellow":"Yellow"},"file":"file","headline":"Headline","headlines":{"header_1":"# Large header","header_2":"## Medium header","header_3":"### Small header","headline":"#### Headline","midheadline":"##### Subheadline"},"huge_content_mode":"Text is too large. The visual editor will fail and has therefore been disabled.","huge_content_pasted":"Text is too large. The visual editor will fail and therefore paste has been cancelled.","image":"Image by link","italic":"Italic","link":"Link","normal_content_mode":"The visual editor is available again","not_available":"Commenting will be available one day after registering","preview":"Preview","prompt":{"image_url":"Image URL","link_url":"Link URL","spoiler_label":"Spoiler label"},"redo":"Redo last change","shiki_link":"Shiki link","smiley":"Smiley","source":"Source code","spoiler":"Spoiler","spoiler_block":"Spoiler block","spoiler_inline":"Spoiler","strike":"Deleted","text_cant_be_blank":"Text can\'t be blank","underline":"Underlined","undo":"Undo last change","unsaved_content":{"draft":"Draft","label":"The editor has unsaved draft. Restore it?","no":false,"yes":true},"upload":"Images upload"},"statistics":{"anime_in_year":"%{count} %{type} in %{year}","anime_of_type":"\\u003cb\\u003e%{count}\\u003c/b\\u003e anime of type \\u003cb\\u003e%{type}\\u003c/b\\u003e","anime_with_rating_in_year":"%{count} %{rating} anime in %{year}","anime_with_score":"\\u003cb\\u003e%{count}\\u003c/b\\u003e anime scored \\u003cb\\u003e%{score}\\u003c/b\\u003e","genres_share":"%{percent}% share of %{genre} in %{year}","number":"Number","ratings_share":"%{percent}% share of %{rating} in %{year}","share":"Share"},"synonyms":{"name":"Name","nothing_here":"No names"},"tags_input":{"label":"Tags"},"user_rates":{"button":{"add_to_list":"Add to My List","remove_from_my_list":"Remove from My List"}}}}')),e.translations.ru=e.extend(e.translations.ru||{},JSON.parse('{"activerecord":{"attributes":{"collection_link":{"group":"\u0413\u0440\u0443\u043f\u043f\u0430","text":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},"external_link":{"url":"\u0421\u0441\u044b\u043b\u043a\u0430"},"user_rate":{"chapters":"\u0413\u043b\u0430\u0432\u044b","episodes":"\u042d\u043f\u0438\u0437\u043e\u0434\u044b","rereads":"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u0447\u0442\u0435\u043d\u0438\u0439","rewatches":"\u041a\u043e\u043b-\u0432\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432","score":"\u041e\u0446\u0435\u043d\u043a\u0430","scores":{"0":"","1":"\u0425\u0443\u0436\u0435 \u043d\u0435\u043a\u0443\u0434\u0430","10":"\u042d\u043f\u0438\u043a \u0432\u0438\u043d!","2":"\u0423\u0436\u0430\u0441\u043d\u043e","3":"\u041e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e","4":"\u041f\u043b\u043e\u0445\u043e","5":"\u0411\u043e\u043b\u0435\u0435-\u043c\u0435\u043d\u0435\u0435","6":"\u041d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e","7":"\u0425\u043e\u0440\u043e\u0448\u043e","8":"\u041e\u0442\u043b\u0438\u0447\u043d\u043e","9":"\u0412\u0435\u043b\u0438\u043a\u043e\u043b\u0435\u043f\u043d\u043e"},"status":"\u0421\u0442\u0430\u0442\u0443\u0441","statuses":{"anime":{"completed":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043e","dropped":"\u0411\u0440\u043e\u0448\u0435\u043d\u043e","on_hold":"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043e","planned":"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e","rewatching":"\u041f\u0435\u0440\u0435\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u044e","watching":"\u0421\u043c\u043e\u0442\u0440\u044e"},"manga":{"completed":"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043e","dropped":"\u0411\u0440\u043e\u0448\u0435\u043d\u043e","on_hold":"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043e","planned":"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e","rewatching":"\u041f\u0435\u0440\u0435\u0447\u0438\u0442\u044b\u0432\u0430\u044e","watching":"\u0427\u0438\u0442\u0430\u044e"},"ranobe":{"completed":"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043e","dropped":"\u0411\u0440\u043e\u0448\u0435\u043d\u043e","on_hold":"\u041e\u0442\u043b\u043e\u0436\u0435\u043d\u043e","planned":"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e","rewatching":"\u041f\u0435\u0440\u0435\u0447\u0438\u0442\u044b\u0432\u0430\u044e","watching":"\u0427\u0438\u0442\u0430\u044e"}},"text":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","volumes":"\u0422\u043e\u043c\u0430"}}},"frontend":{"about":{"comments_per_day":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u0437\u0430 \u0434\u0435\u043d\u044c","new_users_per_day":"\u041d\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0437\u0430 \u0434\u0435\u043d\u044c","unique_visitors":"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0438","views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b","visits":"\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u0438\u044f"},"achievements":{"title":{"gained":"\u041e\u0442\u043a\u0440\u044b\u0442\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435","lost":"\u041f\u043e\u0442\u0435\u0440\u044f\u043d\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435"}},"actions":{"add":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"application":{"sure_to_leave_page":"\u0417\u0434\u0435\u0441\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d \u0438 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439!\\n\u0422\u043e\u0447\u043d\u043e \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443?"},"blocks":{"click_loader":{"loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},"feedback":{"message_sent":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"},"main_search":{"animes":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0430\u043d\u0438\u043c\u0435...","characters":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430\u043c...","mangakas":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0430\u043d\u0433\u0430\u043a\u0430\u043c...","mangas":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0430\u043d\u0433\u0435...","people":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0432\u0441\u0435\u043c \u043b\u044e\u0434\u044f\u043c...","producers":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0440\u0435\u0436\u0438\u0441\u0441\u0451\u0440\u0430\u043c...","ranobe":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0440\u0430\u043d\u043e\u0431\u044d...","seyu":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u044d\u0439\u044e...","users":"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c..."},"tooltip":{"loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}},"collections":{"autocomplete":{"anime":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0430\u043d\u0438\u043c\u0435","character":"\u0418\u043c\u044f \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430","manga":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u043d\u0433\u0438","person":"\u0418\u043c\u044f \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","ranobe":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0430\u043d\u043e\u0431\u044d"},"disabled_add_group_hint":"\u0414\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0433\u0440\u0443\u043f\u043f\u044b \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0443\u0441\u0442\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","group_name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","json_warning":"\u041d\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0439 \u044d\u0442\u043e, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0432\u0435\u0440\u0435\u043d(\u0430) \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0448\u044c! \u0412\u0441\u0442\u0430\u0432\u043a\u0430 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0441\u043b\u043e\u043c\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.","kind":{"anime":"\u0410\u043d\u0438\u043c\u0435","character":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0438","manga":"\u041c\u0430\u043d\u0433\u0430","person":"\u041b\u044e\u0434\u0438","ranobe":"\u0420\u0430\u043d\u043e\u0431\u044d \u0438 \u041d\u043e\u0432\u0435\u043b\u043b\u044b"}},"coub_tags":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439"},"desynced":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044f","nothing_here":"\u041d\u0435\u0442 \u043f\u043e\u043b\u044f"},"dynamic_elements":{"authorized_action":{"register_to_complete_action":"\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0442\u0435\u0431\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \\u003ca href=\\"/users/sign_up\\"\\u003e\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f\\u003c/a\\u003e \u043d\u0430 \u0441\u0430\u0439\u0442\u0435."},"check_height":{"expand":"\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c"},"comment":{"marked_as_offtopic":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u043e\u043c\u0435\u0447\u0435\u043d \u043e\u0444\u0444\u0442\u043e\u043f\u0438\u043a\u043e\u043c","marked_as_summary":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u043e\u043c\u0435\u0447\u0435\u043d \u043e\u0442\u0437\u044b\u0432\u043e\u043c","multiple_marked_as_offtopic":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u044b \u043e\u0444\u0444\u0442\u043e\u043f\u0438\u043a\u043e\u043c","not_marked_as_offtopic":"\u041c\u0435\u0442\u043a\u0430 \u043e\u0444\u0444\u0442\u043e\u043f\u0438\u043a\u0430 \u0441\u043d\u044f\u0442\u0430","not_marked_as_summary":"\u041c\u0435\u0442\u043a\u0430 \u043e\u0442\u0437\u044b\u0432\u0430 \u0441\u043d\u044f\u0442\u0430","type_label":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},"day_registered_action":{"action_will_be_available":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u0441\u0443\u0442\u043a\u0438 \u043f\u043e\u0441\u043b\u0435 \\u003ca href=\\"/users/sign_up\\"\\u003e\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438\\u003c/a\\u003e."},"dialog":{"type_label":"\u0414\u0438\u0430\u043b\u043e\u0433"},"message":{"type_label":"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},"not_implemented_yet_action":"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e","review":{"type_label":"\u041e\u0442\u0437\u044b\u0432"},"shiki_editable":{"your_request_will_be_considered":"\u0422\u0432\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d. \u0414\u043e\u043c\u043e \u0430\u0440\u0438\u0433\u0430\u0442\u043e."},"topic":{"comment":{"few":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f","many":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432","one":"\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},"load_comments":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451 %{comment_count} %{of_total_comments} %{comment_word}","new_comment_added":{"few":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u044b\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f","many":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u044b\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432","one":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d %{count} \u043d\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},"new_message_added":{"few":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f","many":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439","one":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"},"of":"\u0438\u0437","type_label":"\u0422\u043e\u043f\u0438\u043a"},"week_registered_action":{"action_will_be_available":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u0442\u0430\u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u0434\u0435\u043b\u044e \u043f\u043e\u0441\u043b\u0435 \\u003ca href=\\"/users/sign_up\\"\\u003e\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438\\u003c/a\\u003e."}},"external_links":{"groups":{"links":"\u0421\u0441\u044b\u043b\u043a\u0438","watch_online":"\u041e\u043d\u043b\u0430\u0439\u043d-\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"},"nothing_here":"\u041d\u0435\u0442 \u0441\u0441\u044b\u043b\u043e\u043a","warn":{"watch_online":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442/\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0441 \u043f\u043b\u0435\u0435\u0440\u043e\u043c/\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b \u0441 \u043e\u043d\u043b\u0430\u0439\u043d-\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u043c","youtube":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b, \u0433\u0434\u0435 \u0432\u044b\u043b\u043e\u0436\u0435\u043d\u044b \u0441\u0435\u0440\u0438\u0438 \u0434\u043b\u044f \u043e\u043d\u043b\u0430\u0439\u043d-\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430"}},"fandubbers":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439"},"fansubbers":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439"},"images":{"cancel":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","confirm":"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c","delete":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},"lib":{"comments_notifier":{"number_of_unread_comments":"\u0427\u0438\u0441\u043b\u043e \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"},"file_uploader":{"drop_picture_here":"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439 \u0441\u044e\u0434\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443","drop_pictures_here":"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439 \u0441\u044e\u0434\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438","file_type_not_allowed":"\u0424\u0430\u0439\u043b \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c","uploading_file":"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430 %{filename} (%{filesize} kb)","uploading_files":"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 %{uploadedCount} \u0438\u0437 %{totalCount} (%{kbUploaded} / %{kbTotal} kb)"},"jquery_shiki_file":{"browser_not_supported":"\u0421\u043b\u0443\u0447\u0438\u043b\u0430\u0441\u044c \u043e\u0448\u0438\u0431\u043a\u0430, \u0438\u043b\u0438 \u0432\u0435\u0440\u0441\u0438\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430","drop_pictures_here":"\u041f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0439 \u0441\u044e\u0434\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438","file_type_not_allowed":"\u0424\u0430\u0439\u043b \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\u043c","loading_file":"\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u0430 %{filename} (%{filesize} \u041a\u0431)...","please_try_again_later":"\u041e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435","too_large_file":"\u0424\u0430\u0439\u043b \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439: \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 4 \u043c\u0435\u0433\u0430\u0431\u0430\u0439\u0442\u0430","too_many_files":"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u043e\u0432: \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c %{count} \u0437\u0430 \u0440\u0430\u0437","wait_till_loaded":"\u0414\u043e\u0436\u0434\u0438\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432"},"jquery_shiki_forum":{"new_topics_added":{"few":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b %{count} \u043d\u043e\u0432\u044b\u0445 \u0442\u043e\u043f\u0438\u043a\u0430","many":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e %{count} \u043d\u043e\u0432\u044b\u0445 \u0442\u043e\u043f\u0438\u043a\u043e\u0432","one":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d %{count} \u043d\u043e\u0432\u044b\u0439 \u0442\u043e\u043f\u0438\u043a"}},"loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...","nothing_found":"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e","please_try_again_later":"\u041e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435","postloader":{"loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."},"rails_ujs_modified":{"body":"\u0422\u0435\u043a\u0441\u0442","created_at":"","email":"E-mail","forbidden":"","invalid_login_or_password":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c","nickname":"\u041b\u043e\u0433\u0438\u043d","password":"\u041f\u0430\u0440\u043e\u043b\u044c","subject":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","title":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","you_are_not_authorized":"\u0423 \u0442\u0435\u0431\u044f \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"}},"licensors":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439"},"options":{"name":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a"},"pages":{"p_animes":{"hentai":"\u0425\u0435\u043d\u0442\u0430\u0439 / \u0420\u043e\u0441\u043a\u043e\u043c\u043d\u0430\u0434\u0437\u043e\u0440","licensed":"\u041b\u0438\u0446\u0435\u043d\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0420\u0424","no_data":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445","watch_online":"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u043d\u043b\u0430\u0439\u043d"},"p_contests":{"candidate":{"few":"%{count} \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430","many":"%{count} \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432","one":"%{count} \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a","other":"%{count} \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"}},"p_profiles":{"day":{"few":"\u0434\u043d\u044f","many":"\u0434\u043d\u0435\u0439","one":"\u0434\u0435\u043d\u044c"},"hour":{"few":"\u0447\u0430\u0441\u0430","many":"\u0447\u0430\u0441\u043e\u0432","one":"\u0447\u0430\u0441"},"label":{"full":"%{hours} %{hourWord} \u0441 %{fromDate} \u043f\u043e %{toDate} (%{days} %{dayWord})","short":"%{hours} %{hourWord} %{date}"},"page_is_reloading":"\u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b..."},"p_recommendations_index":{"dont_recommend_franchise":"\u0411\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u0443 \u0444\u0440\u0430\u043d\u0448\u0438\u0437\u0443"},"p_user_rates":{"changes_saved":"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","error_occurred":"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430","insufficient_data":"\u041d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u0430\u043d\u043d\u044b\u0445","reread":{"few":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u044f","many":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u0439","one":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u0435"},"rewatch":{"few":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430","many":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432","one":"\u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"}}},"poll_variants":{"name":"\u0422\u0435\u043a\u0441\u0442","nothing_here":"\u041d\u0435\u0442 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"},"polls":{"abstain":"\u0412\u043e\u0437\u0434\u0435\u0440\u0436\u0430\u0442\u044c\u0441\u044f","vote":"\u0413\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u0442\u044c"},"search":{"mode":{"anime":"\u0410\u043d\u0438\u043c\u0435","character":"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436","index":"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430","manga":"\u041c\u0430\u043d\u0433\u0430","person":"\u0427\u0435\u043b\u043e\u0432\u0435\u043a","ranobe":"\u0420\u0430\u043d\u043e\u0431\u044d"},"nothing_found":"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."},"shiki_editable":{"changed":"\u0438\u0437\u043c\u0435\u043d\u0451\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c","click_to_reload":"\u041a\u043b\u0438\u043a\u043d\u0438 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f.","comment_converted":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d \u0432 \\u003ca class=\'b-link\' href=\'%{url}\'\\u003e\u043e\u0442\u0437\u044b\u0432\\u003c/a\\u003e","deleted":"\u0443\u0434\u0430\u043b\u0451\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c","message_changed":"\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c","message_deleted":"\u0443\u0434\u0430\u043b\u0435\u043d\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c","review_converted":"\u041e\u0442\u0437\u044b\u0432 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d \u0432 \\u003ca class=\'b-link\' href=\'%{url}\'\\u003e\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\\u003c/a\\u003e"},"shiki_editor":{"blockquote":"\u0426\u0438\u0442\u0430\u0442\u0430","bold":"\u0416\u0438\u0440\u043d\u044b\u0439","bullet_list":"\u0421\u043f\u0438\u0441\u043e\u043a","code_block":"\u0411\u043b\u043e\u043a \u043a\u043e\u0434\u0430","code_inline":"\u041a\u043e\u0434","color":"\u0426\u0432\u0435\u0442","colors":{"black":"\u0427\u0451\u0440\u043d\u044b\u0439","blue":"\u0421\u0438\u043d\u0438\u0439","brown":"\u041a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439","gray":"\u0421\u0435\u0440\u044b\u0439","green":"\u0417\u0435\u043b\u0451\u043d\u044b\u0439","orange":"\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439","pink":"\u0420\u043e\u0437\u043e\u0432\u044b\u0439","red":"\u041a\u0440\u0430\u0441\u043d\u044b\u0439","violet":"\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439","yellow":"\u0416\u0451\u043b\u0442\u044b\u0439"},"file":"\u0444\u0430\u0439\u043b","headline":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","headlines":{"header_1":"# \u0411\u043e\u043b\u044c\u0448\u043e\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","header_2":"## \u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","header_3":"### \u041c\u0430\u043b\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","headline":"#### \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","midheadline":"##### \u041f\u043e\u0434\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"},"huge_content_mode":"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430. \u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043d\u0435 \u0441\u043f\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043e\u0442\u043a\u043b\u044e\u0447\u0451\u043d.","huge_content_pasted":"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430. \u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043d\u0435 \u0441\u043f\u0440\u0430\u0432\u0438\u0442\u0441\u044f, \u0438 \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0442\u0430\u0432\u043a\u0430 \u0431\u044b\u043b\u0430 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430.","image":"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435","italic":"\u041a\u0443\u0440\u0441\u0438\u0432","link":"\u0421\u0441\u044b\u043b\u043a\u0430","normal_content_mode":"\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u0441\u043d\u043e\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d","not_available":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u0441\u0443\u0442\u043a\u0438 \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438","preview":"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440","prompt":{"image_url":"URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438","link_url":"URL \u0441\u0441\u044b\u043b\u043a\u0438","spoiler_label":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043f\u043e\u0439\u043b\u0435\u0440\u0430"},"redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435","shiki_link":"\u0428\u0438\u043a\u0438 \u0441\u0441\u044b\u043b\u043a\u0430","smiley":"\u0421\u043c\u0430\u0439\u043b\u0438\u043a","source":"\u041a\u043e\u0434","spoiler":"\u0421\u043f\u043e\u0439\u043b\u0435\u0440","spoiler_block":"\u0411\u043b\u043e\u043a \u0441\u043f\u043e\u0439\u043b\u0435\u0440\u0430","spoiler_inline":"\u0421\u043f\u043e\u0439\u043b\u0435\u0440","strike":"\u0417\u0430\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439","text_cant_be_blank":"\u0422\u0435\u043a\u0441\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c","underline":"\u041f\u043e\u0434\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439","undo":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435","unsaved_content":{"draft":"\u0422\u0435\u043a\u0441\u0442","label":"\u0412 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 \u043e\u0441\u0442\u0430\u043b\u0441\u044f \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442. \u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c?","no":"\u041d\u0435\u0442","yes":"\u0414\u0430"},"upload":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a"},"statistics":{"anime_in_year":"%{count} %{type} \u0437\u0430 %{year} \u0433\u043e\u0434","anime_of_type":"\\u003cb\\u003e%{count}\\u003c/b\\u003e \u0430\u043d\u0438\u043c\u0435 \u0442\u0438\u043f\u0430 \\u003cb\\u003e%{type}\\u003c/b\\u003e","anime_with_rating_in_year":"%{count} \u0430\u043d\u0438\u043c\u0435 \u0443 %{rating} \u0437\u0430 %{year} \u0433\u043e\u0434","anime_with_score":"\\u003cb\\u003e%{count}\\u003c/b\\u003e \u0430\u043d\u0438\u043c\u0435 \u0441 \u043e\u0446\u0435\u043d\u043a\u043e\u0439 \\u003cb\\u003e%{score}\\u003c/b\\u003e","genres_share":"%{percent}% \u0443 %{genre} \u0437\u0430 %{year} \u0433\u043e\u0434","number":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e","ratings_share":"%{percent}% \u0443 %{rating} \u0437\u0430 %{year} \u0433\u043e\u0434","share":"\u041f\u0440\u043e\u0446\u0435\u043d\u0442"},"synonyms":{"name":"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435","nothing_here":"\u041d\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439"},"tags_input":{"label":"\u0422\u0435\u0433\u0438"},"user_rates":{"button":{"add_to_list":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043e\u043a","remove_from_my_list":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430"}}}}'))}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/jquery.plugins sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./jquery.bar":"./app/packs/javascripts/jquery.plugins/jquery.bar.js","./jquery.bar.js":"./app/packs/javascripts/jquery.plugins/jquery.bar.js","./jquery.change_tag":"./app/packs/javascripts/jquery.plugins/jquery.change_tag.js","./jquery.change_tag.js":"./app/packs/javascripts/jquery.plugins/jquery.change_tag.js","./jquery.completable":"./app/packs/javascripts/jquery.plugins/jquery.completable.js","./jquery.completable.js":"./app/packs/javascripts/jquery.plugins/jquery.completable.js","./jquery.exists":"./app/packs/javascripts/jquery.plugins/jquery.exists.js","./jquery.exists.js":"./app/packs/javascripts/jquery.plugins/jquery.exists.js","./jquery.form_navigate":"./app/packs/javascripts/jquery.plugins/jquery.form_navigate.js","./jquery.form_navigate.js":"./app/packs/javascripts/jquery.plugins/jquery.form_navigate.js","./jquery.gallery_options":"./app/packs/javascripts/jquery.plugins/jquery.gallery_options.js","./jquery.gallery_options.js":"./app/packs/javascripts/jquery.plugins/jquery.gallery_options.js","./jquery.image_editable":"./app/packs/javascripts/jquery.plugins/jquery.image_editable.js","./jquery.image_editable.js":"./app/packs/javascripts/jquery.plugins/jquery.image_editable.js","./jquery.insert_at_caret":"./app/packs/javascripts/jquery.plugins/jquery.insert_at_caret.js","./jquery.insert_at_caret.js":"./app/packs/javascripts/jquery.plugins/jquery.insert_at_caret.js","./jquery.livetime":"./app/packs/javascripts/jquery.plugins/jquery.livetime.js","./jquery.livetime.js":"./app/packs/javascripts/jquery.plugins/jquery.livetime.js","./jquery.magnific_rel_gallery":"./app/packs/javascripts/jquery.plugins/jquery.magnific_rel_gallery.js","./jquery.magnific_rel_gallery.js":"./app/packs/javascripts/jquery.plugins/jquery.magnific_rel_gallery.js","./jquery.magnific_webm":"./app/packs/javascripts/jquery.plugins/jquery.magnific_webm.js","./jquery.magnific_webm.js":"./app/packs/javascripts/jquery.plugins/jquery.magnific_webm.js","./jquery.normalize_image":"./app/packs/javascripts/jquery.plugins/jquery.normalize_image.js","./jquery.normalize_image.js":"./app/packs/javascripts/jquery.plugins/jquery.normalize_image.js","./jquery.process":"./app/packs/javascripts/jquery.plugins/jquery.process.js","./jquery.process.js":"./app/packs/javascripts/jquery.plugins/jquery.process.js","./jquery.process_hiddent_content":"./app/packs/javascripts/jquery.plugins/jquery.process_hiddent_content.js","./jquery.process_hiddent_content.js":"./app/packs/javascripts/jquery.plugins/jquery.process_hiddent_content.js","./jquery.rateable":"./app/packs/javascripts/jquery.plugins/jquery.rateable.js","./jquery.rateable.js":"./app/packs/javascripts/jquery.plugins/jquery.rateable.js","./jquery.scroll_to":"./app/packs/javascripts/jquery.plugins/jquery.scroll_to.js","./jquery.scroll_to.js":"./app/packs/javascripts/jquery.plugins/jquery.scroll_to.js","./jquery.set_cursor_position":"./app/packs/javascripts/jquery.plugins/jquery.set_cursor_position.js","./jquery.set_cursor_position.js":"./app/packs/javascripts/jquery.plugins/jquery.set_cursor_position.js","./jquery.shiki_file":"./app/packs/javascripts/jquery.plugins/jquery.shiki_file.js","./jquery.shiki_file.js":"./app/packs/javascripts/jquery.plugins/jquery.shiki_file.js","./jquery.shiki_image":"./app/packs/javascripts/jquery.plugins/jquery.shiki_image.js","./jquery.shiki_image.js":"./app/packs/javascripts/jquery.plugins/jquery.shiki_image.js","./jquery.shiki_video":"./app/packs/javascripts/jquery.plugins/jquery.shiki_video.js","./jquery.shiki_video.js":"./app/packs/javascripts/jquery.plugins/jquery.shiki_video.js","./jquery.show_more":"./app/packs/javascripts/jquery.plugins/jquery.show_more.js","./jquery.show_more.js":"./app/packs/javascripts/jquery.plugins/jquery.show_more.js","./jquery.spoiler":"./app/packs/javascripts/jquery.plugins/jquery.spoiler.js","./jquery.spoiler.js":"./app/packs/javascripts/jquery.plugins/jquery.spoiler.js","./jquery.tag_name":"./app/packs/javascripts/jquery.plugins/jquery.tag_name.js","./jquery.tag_name.js":"./app/packs/javascripts/jquery.plugins/jquery.tag_name.js","./jquery.trigger_with_return":"./app/packs/javascripts/jquery.plugins/jquery.trigger_with_return.js","./jquery.trigger_with_return.js":"./app/packs/javascripts/jquery.plugins/jquery.trigger_with_return.js","./jquery.view":"./app/packs/javascripts/jquery.plugins/jquery.view.js","./jquery.view.js":"./app/packs/javascripts/jquery.plugins/jquery.view.js","./jquery.yellow_fade":"./app/packs/javascripts/jquery.plugins/jquery.yellow_fade.js","./jquery.yellow_fade.js":"./app/packs/javascripts/jquery.plugins/jquery.yellow_fade.js","./rails_ujs_modified":"./app/packs/javascripts/jquery.plugins/rails_ujs_modified.js","./rails_ujs_modified.js":"./app/packs/javascripts/jquery.plugins/rails_ujs_modified.js"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./app/packs/javascripts/jquery.plugins sync recursive ^\\.\\/.*$"},"./app/packs/javascripts/jquery.plugins/jquery.bar.js":function(e,t,n){(function(e){function t(e,t){var n,r,i;e.addClass("bar simple ".concat(t.type));var o=t.field||"value",a=e.data("stats");if(a&&t.map&&(a=a.map((function(e){return t.map(e)}))),a&&a.length){var s=e.data("intervals_count"),c=null===(n=a.max((function(e,t){return e[o]})))||void 0===n?void 0:n[o],u=!1;if(e.data("flattened")){var l=a.map((function(e,t){return e[o]})).filter((function(e){return e>0&&e!==c})).average();c>5*l&&l>0&&(r=c,c=3*l,u=!0)}if(t.before&&t.before(a,t,e),t.y_axis){for(var p=[],d=-1;d<10;)i=-1!==d?100-10*d:0,p.push("<div class='y_label' style='top: ".concat(100-i,"%;'>")+t.y_axis(i,c,r)+"</div>"),d+=1;e.append(p.join(""))}t.filter&&(a=a.filter((function(e){return i=.01*parseInt(e[o]/c*100*100),t.filter(e,i)}))),a.forEach((function(n,l){i=.01*parseInt(n[o]/c*100*100),u&&(i*=.9)>100&&(i=90+10*n[o]/r);var p=function(e){if(e<=80&&e>60)return"s1";if(e<=60&&e>30)return"s2";if(e<=30)return"s3";return"s0"}(i),d="vertical"===t.type?"height":"width",f=t.xAxis?t.xAxis(n,l,a,t):n.name,h=String(n[o]).replace(/\.0+$/,""),v=t.title?t.title(n,i):h,m=i>25||i>17&&n[o]<1e3||i>10&&n[o]<100||i>5&&n[o]<10?h:"",y="vertical"===t.type?' style="width: '.concat(100/s,'%;"'):"",_=["value",i<10?"narrow":null,n[o]>99?"mini":null].compact();e.append('<div class="line"'.concat(y,">")+'<div class="x_label">'.concat(f,"</div>")+'<div class="bar-container">'+'<div class="bar '.concat(p).concat(i>0?" min":"",'"')+' style="'.concat(d,": ").concat(i,'%" title="').concat(v,'">')+'<div class="'.concat(_.join(" "),'">').concat(m,"</div>")+"</div></div></div>")}))}else t.noData&&t.noData(e)}e.fn.extend({bar:function(n){return this.each((function(){var r=e(this);switch(r.data("bar")){case"horizontal":t(r,Object.add(n||{},{type:"horizontal"}));break;case"vertical":t(r,Object.add(n||{},{type:"vertical"}));break;default:throw"unknown bar-type: "+r.data("bar")}}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.change_tag.js":function(e,t,n){(function(e){e.fn.extend({changeTag:function(t){return this.map((function(){for(var n=document.createElement(t),r=0;r<this.attributes.length;r+=1){var i=this.attributes[r],o=i.name;"a"===t&&("data-href"===o&&(o="href"),"data-title"===o&&(o="title")),n.setAttribute(o,i.value)}for(;this.childNodes.length;)n.appendChild(this.childNodes[0]);return e(this).replaceWith(n),n}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.completable.js":function(e,t,n){(function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=/\/(animes|mangas|characters|people|ranobe|clubs|collections)\/[A-z]*(\d+)([\w-]*)/,s={animes:{en:"Anime",ru:"\u0410\u043d\u0438\u043c\u0435"},mangas:{en:"Manga",ru:"\u041c\u0430\u043d\u0433\u0430"},characters:{en:"Character",ru:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436"},people:{en:"Person",ru:"\u0427\u0435\u043b\u043e\u0432\u0435\u043a"},ranobe:{en:"Ranobe",ru:"\u0420\u0430\u043d\u043e\u0431\u044d"},clubs:{en:"Club",ru:"\u041a\u043b\u0443\u0431"},collections:{en:"Collection",ru:"\u041a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044f"}};function c(e){var t=i(e,4),n=(t[0],t[1]),r=t[2];return t[3].split("-").filter((function(e){return!Object.isEmpty(e)})).map((function(e){return e.capitalize()})).join(" ")||"".concat(s[n][window.LOCALE],"#").concat(r)}var u={cacheLength:0,delay:10,max:30,matchContains:1,matchSubset:1,minChars:2,dataType:"JSON",$anchor:null,selectFirst:!1};e.fn.extend({completable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.each((function(){var r=e(this);return r.autocomplete("data-autocomplete",n(n({},u),{},{formatItem:function(e){return e.label},parse:function(e){return r.trigger("parse"),e.reverse()}},t)).on("result",(function(e,t){if(t)return t.id=t.data,t.name=t.value,void r.trigger("autocomplete:success",[t]);if(this.value){var n=this.value.match(a);if(n)return void r.trigger("autocomplete:success",[{url:this.value,id:n[2],name:c(n)}]);r.trigger("autocomplete:text",[this.value])}}))}))},completableVariant:function(){return this.each((function(){return e(this).completable().on("autocomplete:success",(function(t,n){var r=e(this).parent().find(".variants"),i=e(this).data("variant_name");r.find('[value="'.concat(n.id,'"]')).exists()||(e('<div class="variant"><input type="checkbox" name="'+i+'" value="'+n.id+'" checked="true" /><a class="b-link" href="'+n.url+'" class="bubbled">'+n.name+"</a></div>").appendTo(r).process(),this.value="")}))}))},completablePlain:function(){return this.each((function(){var t=e(this);return t.autocomplete("data-autocomplete",n(n({},u),{},{minChars:1,parse:function(e){return e.map((function(e){return{value:e}}))},formatItem:function(e){return e.value}})).on("result",(function(e,n){n&&t.trigger("autocomplete:text",[n.value])}))}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.exists.js":function(e,t,n){(function(e){e.fn.exists=function(){return this.length>0}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.form_navigate.js":function(e,t,n){(function(e){window.history&&window.history.navigationMode&&(window.history.navigationMode="compatible"),e.extend({formNavigate:function(t){e(document.body).on("change paste keypress","textarea",(function(t){var n=t.currentTarget;e(n).data("navigate_check_required",!0)})),e(document.body).on("submit","form",(function(t){var n=t.currentTarget;e(n).find("textarea").data("navigate_check_required",!1)})),e(window).on("beforeunload turbolinks:before-visit",(function(n){var r=!1;e("textarea:visible").each((function(n,i){var o=e(i);o.data("navigate_check_required")&&(o.data("navigate_check_required",!1),i.value.length>t.size&&(r=!0))})),r&&!window.confirm(t.message)&&n.preventDefault()}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.gallery_options.js":function(e,t,n){(function(e){e.extend({galleryOptions:{cyclic:!0,hideOnContentClick:!0,transitionIn:"elastic",transitionOut:"elastic",speedIn:400,speedOut:200}}),e.extend({youtubeOptions:e.extend({},e.galleryOptions,{padding:0,autoScale:!1,width:680,showNavArrows:!1,hideOnContentClick:!1,height:495,type:"swf",swf:{wmode:"transparent",allowfullscreen:!0},onStart:function(){return e("#fancybox-expand").hide(),!0},onComplete:function(){e("#fancybox-expand").hide()}})}),e.extend({vkOptions:e.extend({},e.youtubeOptions,{type:"iframe"})})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.image_editable.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}e.fn.extend({imageEditable:function(){return this.each((function(){var t=e(this);t.data("imageEditable")||(t.data("imageEditable",!0),e(".mobile-edit",t).on("click",(function(){return t.toggleClass("mobile-editing"),!1})),e(".delete",t).on("click",(function(){return t.addClass("deletable"),!1})),e(".cancel",t).on("click",(function(){return t.removeClass("deletable").removeClass("mobile-editing"),!1})),e(".confirm",t).on("click",(function(){return e(this).data("remote")?e(this).callRemote():t.removeClass("deletable").addClass("deleted"),!1})),e(".confirm",t).on("ajax:before",s(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.removeClass("deletable").addClass("deleted"),!(n=t.closest(".packery").data("packery"))){e.next=7;break}return n.remove(t[0]),e.next=6,o()(250);case 6:n.layout();case 7:case"end":return e.stop()}}),e)})))),e(".move-left",t).on("click",(function(){return t.insertBefore(t.prev()),!1})),e(".move-right",t).on("click",(function(){return t.insertAfter(t.next()),!1})))}))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.insert_at_caret.js":function(e,t,n){(function(e){e.fn.extend({insertAtCaret:function(t,n,r){return this.each((function(){if(document.selection){this.focus();var i=document.selection.createRange();i.text=t+(""===i.text&&r?r:i.text)+n,this.focus()}else if(this.selectionStart||"0"===this.selectionStart||0===this.selectionStart){var o=this.selectionStart,a=this.selectionEnd,s=this.scrollTop,c=this.value.substring(o,a);c=""===c&&r?r:c,this.value=this.value.substring(0,o)+t+c+n+this.value.substring(a,this.value.length),this.focus(),this.selectionEnd=o+t.length+c.length+n.length,this.selectionStart=this.selectionEnd,this.scrollTop=s}else this.value+=t+n,this.focus();e(this).trigger("change")}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.livetime.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./app/packs/javascripts/utils/dayjs.js"),i={ru:"D MMMM YYYY, H:mm:ss",en:"MMMM D YYYY, h:mm:ss a"},o={ru:"ll",en:"ll"},a=!1;function s(){e("time").each((function(e,t){return c(t)}))}function c(n){var i,a=e(n),s=function(e){return e.data("timeinfo")||function(e){var t={},n=u(e);return t.dayjs=Object(r.default)().isBefore(n)&&!e.data("allow-future-time")?Object(r.default)():n,t.value=e.text(),t.format=e.data("format"),e.data({timeinfo:t}),t}(e)}(a);(i="1_day_absolute"===s.format?s.dayjs.unix()>Object(r.default)().subtract(1,"day").unix()?s.dayjs.fromNow():s.dayjs.format(o[t.locale]):s.dayjs.fromNow())!==s.value&&(a.text(i),s.value=i)}function u(e){return Object(r.default)(e.attr("datetime")).subtract(window.MOMENT_DIFF).add(2,"seconds")}e.fn.extend({livetime:function(){return a||(setInterval(s,6e4),a=!0),this.each((function(n,r){return c(r),e(r).one("mouseover",(function(){var n=u(e(this)),r=i[t.locale];e(this).data("no-tooltip")||e(this).attr({title:n.format(r)})}))}))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/jquery.plugins/jquery.magnific_rel_gallery.js":function(e,t,n){(function(e){var t=function(e){return e.src=e.el.data("href")||e.src};e.fn.extend({magnificRelGallery:function(){return this.each((function(){var n=e(this);if(!n.data("magnificPopup"))return n.magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,fixedBgPos:!0,gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},callbacks:{beforeOpen:function(){var t=this.items[this.index];t.rel&&1===this.items.length&&(this.items=e("a[rel='".concat(t.rel,"']")).toArray(),this.index=this.items.indexOf(t))},afterClose:function(){},elementParse:t},mainClass:"mfp-no-margins mfp-img-mobile"})}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.magnific_webm.js":function(e,t,n){(function(e){var t="webm";e.magnificPopup.registerModule(t,{options:{settings:null,cursor:"mfp-ajax-cur"},proto:{initWebm:function(){return this.types.push(t)},getWebm:function(t){var r=e('<div class="mfp-figure mfp-webm-holder mfp-image-holder"><button title="Close (Esc)" type="button" class="mfp-close">\xd7</button><figure><div class="mfp-img"><div class="b-fancy_loader"></div></div></figure></div>'),i=r.find(".mfp-img"),o=e("<video>").attr({class:"mfp-webm",src:t.el.data("video"),controls:"controls",autoplay:!0});n.e("html5player").then(n.bind(null,"./app/packs/javascripts/views/application/shiki_html5_video.js")).then((function(e){return new(0,e.ShikiHtml5Video)(o)})),o.appendTo(i);var a=!1;o.one("loadedmetadata play playing canplay",(function(){a||(a=!0,r.addClass("loaded"))})),o.on("error",(function(){i.html('<p style="color: #fff;">broken video link</p>')})),this.appendContent(r),this.updateStatus("ready")}}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.normalize_image.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./app/packs/javascripts/utils/load_image.js");function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function u(t,n){var r=e(t),i=t.naturalWidth||r.width(),o=t.naturalHeight||r.height();if(i>300&&!r.attr("width")&&!r.attr("height")){var a=i>o?"normalized_width":"normalized_height";r.addClass(a)}var s=r.parent();n.appendMarker&&s.attr("href")&&!s.children(".marker").exists()&&i>300&&o>300&&s.append("<span class='marker'><span class='marker-text'>".concat(i,"x").concat(o,"</span></span>")),i<300&&o<300&&"a"===s.tagName()&&s.prop("href")===r.prop("src")&&r.unwrap()}e.fn.extend({normalizeImage:function(t){return this.each(c(r.a.mark((function n(){var i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=this,n.next=3,Object(a.a)(i);case 3:return n.next=5,o()();case 5:"lazy"!==i.loading||i.naturalWidth||i.complete?u(i,t):e(i).on("load",(function(){return u(i,t)}));case 6:case"end":return n.stop()}}),n,this)}))))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.process.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./node_modules/js-cookie/dist/js.cookie.js"),s=n.n(a),c=n("./app/packs/javascripts/services/user_rates/tracker.js"),u=n("./app/packs/javascripts/services/topics/tracker.js"),l=n("./app/packs/javascripts/services/reviews/tracker.js"),p=n("./app/packs/javascripts/services/comments/tracker.js"),d=n("./app/packs/javascripts/services/polls/tracker.js"),f=n("./app/packs/javascripts/dynamic_elements/_parser.js"),h=(n("./app/packs/javascripts/utils/load_image.js"),n("./app/packs/javascripts/utils/tooltip_options.js")),v=n("./node_modules/shiki-utils/index.js"),m=n("./app/packs/javascripts/utils/with.js");function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function g(){return g=_(r.a.mark((function t(){var n,i,a,y,_=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_.length>0&&void 0!==_[0]?_[0]:document.body,i=_.length>1&&void 0!==_[1]?_[1]:window.JS_EXPORTS,a=e(n),c.a.track(i,a),u.a.track(i,a),l.a.track(i,a),p.a.track(i,a),d.a.track(i,a),Object(m.a)(".b-video.unprocessed",a).shikiVideo(),new f.a(Object(m.a)(".to-process",a)),Object(m.a)("time",a).livetime(),Object(m.a)(".linkeable",a).changeTag("a").removeClass("linkeable"),Object(m.a)(".b-tooltipped.unprocessed",a).removeClass("unprocessed").each((function(){if(!Object(v.isMobile)()||this.classList.contains("mobile")){var t=e(this),n=function(){switch(t.data("direction")){case"top":return"s";case"bottom":return"n";case"right":return"w";default:return"e"}}(),r=t.data("tipsy-size"),i=r?"tipsy-".concat(r):null;t.tipsy({gravity:n,className:i,html:!0,prependTo:document.body})}})),Object(m.a)(".anime-tooltip",a).tooltip(h.a).removeClass("anime-tooltip").addClass("anime-tooltip-processed").removeAttr("title"),Object(m.a)(".bubbled",a).addClass("bubbled-processed").removeClass("bubbled").tooltip(Object.add(h.b,{offset:[-48,10,-10]})),Object(m.a)(".b-spoiler.unprocessed",a).spoiler(),Object(m.a)("img.check-width",a).removeClass("check-width").normalizeImage({appendMarker:!0}),Object(m.a)(".b-image.unprocessed",a).removeClass("unprocessed").magnificRelGallery(),Object(m.a)(".b-show_more.unprocessed",a).removeClass("unprocessed").showMore(),!(y=s.a.get("collapses"))){t.next=24;break}return t.next=23,o()();case 23:y.replace(/;$/,"").split(";").forEach((function(t){return e("#collapse-".concat(t)).filter(":not(.triggered)").trigger("click",!0)}));case 24:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}e.fn.extend({process:function(e){return function(){g.apply(this,arguments)}(this,e),this}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.process_hiddent_content.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}e.fn.extend({process_hidden_content:function(){return this.each(i(t.mark((function r(){var i,o;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e(this),t.next=3,n.e("aligned_posters").then(n.bind(null,"./app/packs/javascripts/dynamic_elements/aligned_posters.js"));case 3:o=t.sent,i.find(".".concat(o.GLOBAL_SELECTOR)).each((function(){var t=e(this).data(o.DATA_KEY);t&&t.process()}));case 5:case"end":return t.stop()}}),r,this)}))))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.rateable.js":function(e,t,n){(function(e){function t(e){return e.attr("class").replace(/\s?score-\d+/,"")}e.fn.extend({rateable:function(){return this.each((function(){var n=e(".stars-container",this),r=e(".hover",this),i=e(".hoverable-trigger",this),o=e(".score",this),a=e(".score-value",this),s=e(".score-notice",this),c=e(this).data("notices"),u=e(this).data("input_selector"),l=!!u,p=parseInt(a.text())||0,d=null;i.on("mousemove",(function(i){var o=e(i.target).offset().left,u=10*(i.clientX-o)/n.width();d=u>.5?[Math.floor(u)+1,10].min():0,s.html(c[d]||"&nbsp;"),r.attr("class","".concat(t(r)," score-").concat(d)),a.html(d).attr("class","".concat(t(a)," score-").concat(d))})).on("mouseover",(function(e){o.addClass("hovered")})).on("mouseout",(function(e){o.removeClass("hovered"),s.html(c[p]||"&nbsp;"),r.attr("class",t(r)),o.attr("class","".concat(t(o)," score-").concat(p)),a.attr("class","".concat(t(a)," score-").concat(p)).html(p)})).on("click",(function(t){var n=t.currentTarget;l&&(p=d,e(n).trigger("mouseout"),e(n).closest("form").find(u).val(d)),e(n).trigger("rate:change",d)}))}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.scroll_to.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e.extend({scrollTo:function(t,n){return(i=r.a.mark((function i(){var a,s,c;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("number"===typeof t?a=t:(s=e(t),a=s.length?s.offset().top-10:0),c=e(".l-top_menu-v2"),0!==a&&"sticky"==c.css("position")&&(a-=c.height()),e("html, body").animate({scrollTop:a},300),!n){r.next=8;break}return r.next=7,o()(300);case 7:n();case 8:case"end":return r.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function s(e){a(o,n,r,s,c,"next",e)}function c(e){a(o,n,r,s,c,"throw",e)}s(void 0)}))})();var i}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.set_cursor_position.js":function(e,t,n){(function(e){e.fn.extend({setCursorPosition:function(t){var n=e(this).get(0);if(n){var r=!1;try{n.setSelectionRange&&(n.setSelectionRange(t,t),r=!0)}catch(o){}if(!r&&n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.shiki_file.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=n("./node_modules/shiki-utils/index.js"),c=n("./app/packs/javascripts/utils/csrf.js");function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}var p="frontend.lib.jquery_shiki_file",d={maxfiles:150,progress:null,input:null},f=!1;e.fn.extend({shikiFile:function(n){return this.each((function(){var r=e.extend({},d,n),o=e(this),u=null,h=e(r.progress),v=h.children();e(r.input).change((function(){this.files.length>0&&o.trigger("drop",[this.files])}));var m=Object(c.a)();o.filedrop({url:o.data("upload_url"),paramname:"image",data:m.post,headers:m.headers,allowedfiletypes:["image/jpg","image/jpeg","image/png"],error:function(e,n,i,o,a){switch(this.afterAll(),e){case"TooManyFiles":s.flash.error(t.t("".concat(p,".too_many_files"),{count:r.maxfiles}));break;case"FileTooLarge":s.flash.error(t.t("".concat(p,".too_large_file")));break;case"Unprocessable Entity":a?s.flash.error(a):s.flash.error(t.t("".concat(p,".please_try_again_later")));break;case"FileTypeNotAllowed":s.flash.error(t.t("".concat(p,".file_type_not_allowed")));break;default:s.flash.error(t.t("".concat(p,".browser_not_supported")))}f=!1},maxfiles:r.maxfiles,maxfilesize:4,queuefiles:1,refresh:50,beforeEach:function(e){var n=e.name,r=Math.ceil(e.size/10)/100;return v.html(t.t("".concat(p,".loading_file"),{filename:n,filesize:r}))},drop:function(){return!f&&(f=!0,o.trigger("upload:before"),e(document.body).trigger("dragleave"),h.addClass("active"),!0)},afterAll:function(){return l(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.trigger("upload:after"),f=!1,h.removeClass("active"),e.next=5,a()(250);case 5:v.width("0%");case 6:case"end":return e.stop()}}),e)})))()},docOver:function(n){return l(i.a.mark((function n(){var r,s,c,l;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o.data("placeholder_displayed")&&o.is(":visible")){n.next=2;break}return n.abrupt("return");case 2:return o.data({placeholder_displayed:!0}),r=o.outerHeight(),s=o.outerWidth(),c=f?t.t("".concat(p,".wait_till_loaded")):t.t("".concat(p,".drop_pictures_here")),l=f?"disallowed":"allowed",u=e("<div data-text='".concat(c,"' class='shiki-file_uploader-drop_placeholder ").concat(l,"' style='width:").concat(s,"px!important;height:").concat(r,"px;line-height:").concat(Math.max(r,75),"px;'></div>")).css({opacity:0}).on("drop",(function(e){return o.trigger(e)})).on("dragenter",(function(){return e(this).addClass("hovered")})).on("dragleave",(function(){return e(this).removeClass("hovered")})).insertBefore(o),n.next=10,a()();case 10:u.css({opacity:.75});case 11:case"end":return n.stop()}}),n)})))()},docLeave:function(e){o.data("placeholder_displayed")&&(u=o.parent().find(".shiki-file_uploader-drop_placeholder").css({opacity:0}),a()(350).then((function(){return u.remove()})),o.data({placeholder_displayed:!1}))},uploadStarted:function(e,t,n){return o.trigger("upload:started",e)},uploadFinished:function(e,t,n,r){Object.isString(n)||"error"in n?o.trigger("upload:failed",[n,e]):o.trigger("upload:success",[n,e])},progressUpdated:function(e,t,n){n>85||e>0?v.width("100%"):v.width(n+"%")}}),o.pastableTextarea(),o.on("pasteImage",(function(e,t){var n=new File([t.blob],"pasted_file.".concat(t.blob.type.split("/")[1]),{type:t.blob.type,lastModified:Date.now()});o.trigger("drop",[[n]])}))}))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/jquery.plugins/jquery.shiki_image.js":function(e,t,n){(function(e){e.fn.extend({shikiImage:function(){return this.each((function(){return e(this).magnificRelGallery().imageEditable()}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.shiki_video.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/load_image.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}var s=function(e,t){return{index:"".concat(e,"/"),src:"%id%",id:function(e){return t}}};e.fn.extend({shikiVideo:function(){return this.each(a(r.a.mark((function t(){var n,o,a,c,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=e(n=this)).hasClass("unprocessed")){t.next=4;break}return t.abrupt("return");case 4:return o.removeClass("unprocessed"),(a=o.find(".video-link")).magnificPopup({preloader:!1,type:"iframe",iframe:{markup:'\n            <div class=\'mfp-iframe-scaler\'>\n              <div class="mfp-close"></div>\n              <iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe>\n            </div>\n          ',srcAction:"iframe_src",patterns:(r=a.data("href"),{youtube:s("youtube.com",r),vimeo:s("vimeo.com",r),youtu_be:s("youtu.be",r),vk_com:s("vk.com",r),vkontakte_ru:s("vkontakte.ru",r),coub_com:s("coub.com",r),myvi_ru:s("myvi.ru",r),myvi_tv:s("myvi.tv",r),myvi_top:s("myvi.top",r),sibnet:s("sibnet.ru",r),yandex_ru:s("yandex.ru",r),ok_ru:s("ok.ru",r),stormo_xyz:s("stormo.xyz",r),stormo_tv:s("stormo.tv",r)})}}),c=n.querySelector("img"),t.next=10,Object(i.a)(c);case 10:if(!o.hasClass("youtube")||120!==c.naturalWidth||90!==c.naturalHeight){t.next=14;break}return c.src="/assets/globals/missing_video.png",o.addClass("shrinked-1_3 dynamically-replaced"),t.abrupt("return");case 14:1.3===(u=(1*c.naturalWidth/c.naturalHeight).round(1))&&o.addClass("shrinked-1_3"),1.5===u&&o.addClass("shrinked-1_5");case 17:case"end":return t.stop()}var r}),t,this)}))))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.show_more.js":function(e,t,n){(function(e){e.fn.extend({showMore:function(){return this.each((function(){var t=e(this),n=t.next().find(".hide-more");return t.on("click",(function(){t.hide(),n.parent().show()})),n.on("click",(function(){t.show(),n.parent().hide()}))}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.spoiler.js":function(e,t,n){(function(e){e.fn.extend({spoiler:function(){return this.each((function(){var t=e(this);if(t.hasClass("unprocessed")){t.removeClass("unprocessed");var n=t.children("label"),r=n.next();t.on("spoiler:open",(function(){return n.click()})),n.on("click",(function(t){(t.target===n[0]||e(this).closest(n).exists())&&(n.hide(),r.css({display:"inline"}),r.process_hidden_content())})),r.hasClass("only-show")||r.on("click",(function(t){(t.target===r[0]||e(t.target).parent()[0]===r[0]||e(t.target).hasClass("inner-prgrph"))&&(n.css({display:"inline"}),r.hide())}))}}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.tag_name.js":function(e,t,n){(function(e){e.fn.extend({tagName:function(){return this.get(0).tagName.toLowerCase()}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.trigger_with_return.js":function(e,t,n){(function(e){e.fn.extend({triggerWithReturn:function(t,n){var r=new e.Event(t);return this.trigger(r,n),r.result}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.view.js":function(e,t,n){(function(e){e.fn.extend({view:function(e){return e?this.data("view_object",e):this.data("view_object")}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/jquery.yellow_fade.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}e.fn.extend({yellowFade:function(){return this.each(s(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e(this)).hasClass("yellow-fade")){t.next=3;break}return t.abrupt("return");case 3:return n.addClass("yellow-fade"),t.next=6,o()(50);case 6:return n.addClass("yellow-fade-animated"),t.next=9,o()(1e3);case 9:n.removeClass("yellow-fade yellow-fade-animated");case 10:case"end":return t.stop()}}),t,this)}))))}})}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/jquery.plugins/rails_ujs_modified.js":function(e,t,n){"use strict";n.r(t),function(e,t,r){var i=n("./node_modules/shiki-utils/index.js"),o=n("./app/packs/javascripts/utils/in_new_tab.js");e(document).ajaxSend((function(t,n,r){var i=e("meta[name='csrf-token']").attr("content");n.setRequestHeader("X-CSRF-Token",i),"SHIKI_FAYE_LOADER"in window&&SHIKI_FAYE_LOADER.id&&n.setRequestHeader("X-Faye-Token",SHIKI_FAYE_LOADER.id)})),t((function(e){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e.fn.extend({triggerAndReturn:function(t,n){var r=new e.Event(t);return this.trigger(r,n),!1!==r.result},callRemote:function(t){var n=e(this),o=n.is("form"),a=o,s=this;if(n.data("disabled"))return!1;if(!s.triggerAndReturn("ajax:before"))return!1;if(!a||!n.data("ajax:locked")){n.data("ajax:locked",!0);var c=o?s.serializeArray():n.data("form")||[],u=s.data("method")||s.attr("method")||"GET",l=s.data("action")||s.attr("action")||s.attr("href"),p=s.data("type")||"script";if(void 0===l)return!1;e.ajax({url:l,data:c,dataType:p,type:u.toUpperCase(),beforeSend:function(e){s.trigger("ajax:loading",{xhr:e,ajax:this}),"abort"==e.statusText&&n.data("ajax:locked",!1)},success:function(e,t,r){n.data("ajax:locked",!1),!Object.isString(e)&&e&&"notice"in e&&e.notice&&i.flash.notice(e.notice),s.trigger("ajax:success",[e,t,r])},complete:function(e){n.data("ajax:locked",!1),s.trigger("ajax:complete",e)},error:function(e,t,o){if(n.data("ajax:locked",!1),e.responseText&&e.responseText.match(/invalid/))i.flash.error(r.t("frontend.lib.rails_ujs_modified.invalid_login_or_password"));else if(403==e.status){try{var a=JSON.parse(e.responseText)}catch(u){a={}}Object.isObject(a)&&a.message?i.flash.error(a.message):i.flash.error("Forbidden"!=e.responseText?e.responseText:r.t("frontend.lib.rails_ujs_modified.you_are_not_authorized"))}else if(500==e.status)i.flash.error(r.t("frontend.lib.please_try_again_later"));else{try{a=JSON.parse(e.responseText)}catch(u){a={}}if("errors"in a?a=a.errors:"error"in a&&(a=[a.error]),Object.size(a))if(Object.isArray(a))i.flash.error(a.join("<br />"));else{var c=a.map((function(e,t){return"base"==t?e:"<strong>"+r.t("frontend.lib.rails_ujs_modified."+t,{defaultValue:t})+"</strong> "+(Object.isArray(e)?e.join(", "):e)})).join("<br />");i.flash.error(c)}else i.flash.error(r.t("frontend.lib.please_try_again_later"))}s.trigger("ajax:failure",[e,t,o])}}),s.trigger("ajax:after")}}}),e(document).on("click","a[data-method]:not([data-remote]),span[data-method]:not([data-remote])",(function(r){var i=e(this),o=i.attr("href")||i.data("action"),a=i.attr("data-method"),s=e('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';if(i.attr("data-confirm")&&!confirm(i.attr("data-confirm")))return r.stopImmediatePropagation(),!1;null!=n&&null!=t&&(c+='<input name="'+n+'" value="'+t+'" type="hidden" />'),s.hide().append(c).appendTo("body"),r.preventDefault(),r.stopImmediatePropagation(),s.submit()})),e(document).on("click","a[data-confirm]:not([data-remote]),input[data-confirm]",(function(){var t=e(this);if(t.triggerAndReturn("confirm")&&!confirm(t.attr("data-confirm")))return!1})),e(document).on("submit","form[data-remote]",(function(t){e(this).callRemote(),t.preventDefault()})),e(document).on("click","a[data-remote],input[data-remote],span[data-remote],div[data-remote],li[data-remote],button[data-remote],tr[data-remote]",(function(t){if(!Object(o.a)(t))if("A"!=t.target.tagName||e(t.target).data("remote")){var n=e(this);if(n.attr("data-confirm")&&!confirm(n.attr("data-confirm")))return!1;!1!==n.callRemote()&&t.preventDefault()}else t.stopImmediatePropagation()}));var a="input[data-disable-with]",s="form[data-remote]:has(input[data-disable-with])",c=function(){e(this).find(a).each((function(){var t=e(this);t.data("enable-with",t.val()).attr("value",t.attr("data-disable-with")).attr("disabled","disabled")}))};e(document).on("ajax:before",s,c),e(document).on("submit","form:not([data-remote]):has(input[data-disable-with])",c),e(document).on("ajax:complete",s,(function(){e(this).find(a).each((function(){var t=e(this);t.removeAttr("disabled").val(t.data("enable-with"))}))}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/models/shiki_user.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var i=["id","url","is_moderator","is_day_registered","is_week_registered","is_comments_auto_collapsed","is_comments_auto_loaded"],o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.isSignedIn=!!this.data.id,i.forEach((function(e){return n[e.camelize(!1)]=n.data[e]}))}var t,n,o;return t=e,(n=[{key:"isTopicIgnored",value:function(e){return-1!==this.data.ignored_topics.indexOf(e)}},{key:"isUserIgnored",value:function(e){return-1!==this.data.ignored_users.indexOf(e)}},{key:"ignoreTopic",value:function(e){return this.data.ignored_topics.push(parseInt(e))}},{key:"unignoreTopic",value:function(e){return this.data.ignored_topics.remove(parseInt(e))}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/pages sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./p-animes":"./app/packs/javascripts/pages/p-animes.js","./p-animes.js":"./app/packs/javascripts/pages/p-animes.js","./p-animes/art":"./app/packs/javascripts/pages/p-animes/art.js","./p-animes/art.js":"./app/packs/javascripts/pages/p-animes/art.js","./p-animes/cosplay":"./app/packs/javascripts/pages/p-animes/cosplay.js","./p-animes/cosplay.js":"./app/packs/javascripts/pages/p-animes/cosplay.js","./p-animes/coub":"./app/packs/javascripts/pages/p-animes/coub.js","./p-animes/coub.js":"./app/packs/javascripts/pages/p-animes/coub.js","./p-animes/edit":"./app/packs/javascripts/pages/p-animes/edit.js","./p-animes/edit.js":"./app/packs/javascripts/pages/p-animes/edit.js","./p-animes/files":"./app/packs/javascripts/pages/p-animes/files.js","./p-animes/files.js":"./app/packs/javascripts/pages/p-animes/files.js","./p-animes/franchise":"./app/packs/javascripts/pages/p-animes/franchise.js","./p-animes/franchise.js":"./app/packs/javascripts/pages/p-animes/franchise.js","./p-animes/screenshots":"./app/packs/javascripts/pages/p-animes/screenshots.js","./p-animes/screenshots.js":"./app/packs/javascripts/pages/p-animes/screenshots.js","./p-animes/show":"./app/packs/javascripts/pages/p-animes/show.js","./p-animes/show.js":"./app/packs/javascripts/pages/p-animes/show.js","./p-animes_collection-index":"./app/packs/javascripts/pages/p-animes_collection-index.js","./p-animes_collection-index.js":"./app/packs/javascripts/pages/p-animes_collection-index.js","./p-articles/_form":"./app/packs/javascripts/pages/p-articles/_form.js","./p-articles/_form.js":"./app/packs/javascripts/pages/p-articles/_form.js","./p-characters":"./app/packs/javascripts/pages/p-characters.js","./p-characters.js":"./app/packs/javascripts/pages/p-characters.js","./p-clubs/_menu":"./app/packs/javascripts/pages/p-clubs/_menu.js","./p-clubs/_menu.js":"./app/packs/javascripts/pages/p-clubs/_menu.js","./p-clubs/broadcast":"./app/packs/javascripts/pages/p-clubs/broadcast.js","./p-clubs/broadcast.js":"./app/packs/javascripts/pages/p-clubs/broadcast.js","./p-clubs/edit":"./app/packs/javascripts/pages/p-clubs/edit.js","./p-clubs/edit.js":"./app/packs/javascripts/pages/p-clubs/edit.js","./p-clubs/images":"./app/packs/javascripts/pages/p-clubs/images.js","./p-clubs/images.js":"./app/packs/javascripts/pages/p-clubs/images.js","./p-clubs/show":"./app/packs/javascripts/pages/p-clubs/show.js","./p-clubs/show.js":"./app/packs/javascripts/pages/p-clubs/show.js","./p-collections/_form":"./app/packs/javascripts/pages/p-collections/_form.js","./p-collections/_form.js":"./app/packs/javascripts/pages/p-collections/_form.js","./p-contests/_form":"./app/packs/javascripts/pages/p-contests/_form.js","./p-contests/_form.js":"./app/packs/javascripts/pages/p-contests/_form.js","./p-contests/_proposing":"./app/packs/javascripts/pages/p-contests/_proposing.js","./p-contests/_proposing.js":"./app/packs/javascripts/pages/p-contests/_proposing.js","./p-contests/grid":"./app/packs/javascripts/pages/p-contests/grid.js","./p-contests/grid.js":"./app/packs/javascripts/pages/p-contests/grid.js","./p-contests/show":"./app/packs/javascripts/pages/p-contests/show.js","./p-contests/show.js":"./app/packs/javascripts/pages/p-contests/show.js","./p-critiques/_form":"./app/packs/javascripts/pages/p-critiques/_form.js","./p-critiques/_form.js":"./app/packs/javascripts/pages/p-critiques/_form.js","./p-dashboards/show":"./app/packs/javascripts/pages/p-dashboards/show.js","./p-dashboards/show.js":"./app/packs/javascripts/pages/p-dashboards/show.js","./p-dashboards/show_v2":"./app/packs/javascripts/pages/p-dashboards/show_v2.js","./p-dashboards/show_v2.js":"./app/packs/javascripts/pages/p-dashboards/show_v2.js","./p-db_entries/edit":"./app/packs/javascripts/pages/p-db_entries/edit.js","./p-db_entries/edit.js":"./app/packs/javascripts/pages/p-db_entries/edit.js","./p-db_entries/edit_field":"./app/packs/javascripts/pages/p-db_entries/edit_field.js","./p-db_entries/edit_field.js":"./app/packs/javascripts/pages/p-db_entries/edit_field.js","./p-dialogs":"./app/packs/javascripts/pages/p-dialogs.js","./p-dialogs.js":"./app/packs/javascripts/pages/p-dialogs.js","./p-list_imports":"./app/packs/javascripts/pages/p-list_imports.js","./p-list_imports.js":"./app/packs/javascripts/pages/p-list_imports.js","./p-messages":"./app/packs/javascripts/pages/p-messages.js","./p-messages.js":"./app/packs/javascripts/pages/p-messages.js","./p-moderations":"./app/packs/javascripts/pages/p-moderations.js","./p-moderations.js":"./app/packs/javascripts/pages/p-moderations.js","./p-oauth_applications":"./app/packs/javascripts/pages/p-oauth_applications.js","./p-oauth_applications.js":"./app/packs/javascripts/pages/p-oauth_applications.js","./p-pages/about":"./app/packs/javascripts/pages/p-pages/about.js","./p-pages/about.js":"./app/packs/javascripts/pages/p-pages/about.js","./p-pages/development":"./app/packs/javascripts/pages/p-pages/development.js","./p-pages/development.js":"./app/packs/javascripts/pages/p-pages/development.js","./p-pages/hentai":"./app/packs/javascripts/pages/p-pages/hentai.js","./p-pages/hentai.js":"./app/packs/javascripts/pages/p-pages/hentai.js","./p-pages/oauth":"./app/packs/javascripts/pages/p-pages/oauth.js","./p-pages/oauth.js":"./app/packs/javascripts/pages/p-pages/oauth.js","./p-people":"./app/packs/javascripts/pages/p-people.js","./p-people.js":"./app/packs/javascripts/pages/p-people.js","./p-polls":"./app/packs/javascripts/pages/p-polls.js","./p-polls.js":"./app/packs/javascripts/pages/p-polls.js","./p-profiles/comments":"./app/packs/javascripts/pages/p-profiles/comments.js","./p-profiles/comments.js":"./app/packs/javascripts/pages/p-profiles/comments.js","./p-profiles/edit":"./app/packs/javascripts/pages/p-profiles/edit.js","./p-profiles/edit.js":"./app/packs/javascripts/pages/p-profiles/edit.js","./p-profiles/favorites":"./app/packs/javascripts/pages/p-profiles/favorites.js","./p-profiles/favorites.js":"./app/packs/javascripts/pages/p-profiles/favorites.js","./p-profiles/moderation":"./app/packs/javascripts/pages/p-profiles/moderation.js","./p-profiles/moderation.js":"./app/packs/javascripts/pages/p-profiles/moderation.js","./p-profiles/show":"./app/packs/javascripts/pages/p-profiles/show.js","./p-profiles/show.js":"./app/packs/javascripts/pages/p-profiles/show.js","./p-profiles/videos":"./app/packs/javascripts/pages/p-profiles/videos.js","./p-profiles/videos.js":"./app/packs/javascripts/pages/p-profiles/videos.js","./p-recommendations-index":"./app/packs/javascripts/pages/p-recommendations-index.js","./p-recommendations-index.js":"./app/packs/javascripts/pages/p-recommendations-index.js","./p-reviews-critiques":"./app/packs/javascripts/pages/p-reviews-critiques.js","./p-reviews-critiques.js":"./app/packs/javascripts/pages/p-reviews-critiques.js","./p-statistics":"./app/packs/javascripts/pages/p-statistics/index.js","./p-statistics/":"./app/packs/javascripts/pages/p-statistics/index.js","./p-statistics/index":"./app/packs/javascripts/pages/p-statistics/index.js","./p-statistics/index.js":"./app/packs/javascripts/pages/p-statistics/index.js","./p-statistics/lists":"./app/packs/javascripts/pages/p-statistics/lists.js","./p-statistics/lists.js":"./app/packs/javascripts/pages/p-statistics/lists.js","./p-tests":"./app/packs/javascripts/pages/p-tests.js","./p-tests.js":"./app/packs/javascripts/pages/p-tests.js","./p-tests/achievements_notification":"./app/packs/javascripts/pages/p-tests/achievements_notification.js","./p-tests/achievements_notification.js":"./app/packs/javascripts/pages/p-tests/achievements_notification.js","./p-tests/editor":"./app/packs/javascripts/pages/p-tests/editor.js","./p-tests/editor.js":"./app/packs/javascripts/pages/p-tests/editor.js","./p-tests/momentjs":"./app/packs/javascripts/pages/p-tests/momentjs.js","./p-tests/momentjs.js":"./app/packs/javascripts/pages/p-tests/momentjs.js","./p-tests/news":"./app/packs/javascripts/pages/p-tests/news.js","./p-tests/news.js":"./app/packs/javascripts/pages/p-tests/news.js","./p-tests/show":"./app/packs/javascripts/pages/p-tests/show.js","./p-tests/show.js":"./app/packs/javascripts/pages/p-tests/show.js","./p-tests/vue":"./app/packs/javascripts/pages/p-tests/vue.js","./p-tests/vue.js":"./app/packs/javascripts/pages/p-tests/vue.js","./p-topics":"./app/packs/javascripts/pages/p-topics/index.js","./p-topics/":"./app/packs/javascripts/pages/p-topics/index.js","./p-topics/_critique_form":"./app/packs/javascripts/pages/p-topics/_critique_form.js","./p-topics/_critique_form.js":"./app/packs/javascripts/pages/p-topics/_critique_form.js","./p-topics/_extended_form":"./app/packs/javascripts/pages/p-topics/_extended_form.js","./p-topics/_extended_form.js":"./app/packs/javascripts/pages/p-topics/_extended_form.js","./p-topics/_form":"./app/packs/javascripts/pages/p-topics/_form.js","./p-topics/_form.js":"./app/packs/javascripts/pages/p-topics/_form.js","./p-topics/index":"./app/packs/javascripts/pages/p-topics/index.js","./p-topics/index.js":"./app/packs/javascripts/pages/p-topics/index.js","./p-topics/show":"./app/packs/javascripts/pages/p-topics/show.js","./p-topics/show.js":"./app/packs/javascripts/pages/p-topics/show.js","./p-translations":"./app/packs/javascripts/pages/p-translations.js","./p-translations.js":"./app/packs/javascripts/pages/p-translations.js","./p-user_rates":"./app/packs/javascripts/pages/p-user_rates/index.js","./p-user_rates/":"./app/packs/javascripts/pages/p-user_rates/index.js","./p-user_rates/index":"./app/packs/javascripts/pages/p-user_rates/index.js","./p-user_rates/index.js":"./app/packs/javascripts/pages/p-user_rates/index.js","./p-userlist_comparer":"./app/packs/javascripts/pages/p-userlist_comparer.js","./p-userlist_comparer.js":"./app/packs/javascripts/pages/p-userlist_comparer.js","./p-users/similar":"./app/packs/javascripts/pages/p-users/similar.js","./p-users/similar.js":"./app/packs/javascripts/pages/p-users/similar.js"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./app/packs/javascripts/pages sync recursive ^\\.\\/.*$"},"./app/packs/javascripts/pages/p-animes.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}pageLoad(".animes",".mangas",".ranobe",i(t.mark((function r(){var i,o;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e(".b-animes-menu").exists()){t.next=6;break}return t.next=3,n.e("db_entries_menu").then(n.bind(null,"./app/packs/javascripts/views/db_entries/menu.js"));case 3:i=t.sent,new(0,i.AnimesMenu)(".b-animes-menu");case 6:if(!e(".b-reviews_navigation").exists()){t.next=12;break}return t.next=9,n.e("reviews_navigation").then(n.bind(null,"./app/packs/javascripts/views/db_entries/reviews_navigation.js"));case 9:o=t.sent,new(0,o.ReviewsNavigation)(".b-reviews_navigation");case 12:case"end":return t.stop()}}),r)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/art.js":function(e,t,n){var r,i=n("./node_modules/@babel/runtime/regenerator/index.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("animes_art","mangas_art","ranobe_art",a(i.mark((function e(){var t,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/imageboards_gallery.js"));case 2:t=e.sent,o=t.ImageboardsGallery,r=new o(".b-gallery");case 5:case"end":return e.stop()}}),e)})))),pageUnload("animes_art","mangas_art","ranobe_art",(function(){r.destroy(),r=null}))},"./app/packs/javascripts/pages/p-animes/cosplay.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}pageLoad("animes_cosplay","mangas_cosplay",o(r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("animes_cosplay").then(n.bind(null,"./app/packs/javascripts/views/animes/cosplay.js"));case 2:t=e.sent,new(0,t.Cosplay)(".l-content");case 5:case"end":return e.stop()}}),e)}))))},"./app/packs/javascripts/pages/p-animes/coub.js":function(e,t,n){(function(e){pageLoad("animes_coub",(function(){e.force_appear()}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/edit.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/tiny-uri/dist/tiny-uri.js"),r=n("./app/packs/javascripts/utils/dayjs.js"),i="DD.MM.YYYY HH:mm";pageLoad("animes_edit",(function(){e(".increment-episode").on("click",(function(n){var o=Object(r.default)(new Date).format(i),a=e(n.currentTarget),s=prompt(a.data("custom_confirm_text"),o);if(s){var c=new t.a(a.attr("href")).query.set("aired_at",Object(r.default)(s,i).toString()).toString();a.attr("href",c)}else n.stopImmediatePropagation(),n.preventDefault()}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/files.js":function(e,t,n){(function(e){pageLoad("animes_files","mangas_files",(function(){e(".b-options-floated.collapse").trigger("click")}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/franchise.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}function o(t,n,r){var i=e(".graph").empty();r.json(i.data("api_url"),(function(t,o){new n(o).render_to(i[0]),e(".sticky-tooltip .close").on("click",(function(){var t=e(".node.selected")[0];r.select(t).on("click")(t.__data__)}))}))}pageLoad("animes_franchise","mangas_franchise","ranobe_franchise",i(t.mark((function e(){var r,i,a,s,c;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("vendors_async-d3~franchise").then(n.t.bind(null,"./node_modules/d3/d3.js",7));case 2:return r=e.sent,e.next=5,Promise.all([n.e("vendors_async-d3~franchise"),n.e("franchise")]).then(n.bind(null,"./app/packs/javascripts/services/shiki_math.js"));case 5:return i=e.sent,a=i.ShikiMath,e.next=9,Promise.all([n.e("vendors_async-d3~franchise"),n.e("franchise")]).then(n.bind(null,"./app/packs/javascripts/services/franchise/graph.js"));case 9:s=e.sent,c=s.FranchiseGraph,e.prev=11,o(a,c,r),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(11),document.write("".concat(e.t0.name,": ").concat(e.t0.message||JSON.stringify(e.t0))),e.t0;case 19:case"end":return e.stop()}}),e,null,[[11,15]])}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/screenshots.js":function(e,t,n){(function(e){pageLoad("animes_screenshots",(function(){e(".c-screenshot").magnificRelGallery()}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes/show.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/check_height.js"),o=n("./app/packs/javascripts/utils/dayjs.js");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("animes_show","mangas_show","ranobe_show",u(r.a.mark((function t(){var s,c,u,l,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(".b-notice").tipsy({gravity:"s"}),e(".c-screenshot").magnificRelGallery(),Object(i.a)(e(".text"),{maxHeight:200}),s=e(".new_critique"),window.SHIKI_USER.isSignedIn?(c=s.attr("href").replace(/%5Buser_id%5D=(\d+|ID)/,"%5Buser_id%5D=".concat(window.SHIKI_USER.id)),s.attr({href:c})):s.hide(),e(".l-content").on("postloaded:success",".resources-loader",(function(){return e(".c-screenshot").magnificRelGallery()})),e(".other-names").on("clickloaded:success",(function(t,n){var r=t.currentTarget;e(r).closest(".line").replaceWith(n)})),e(".b-subposter-actions .new_comment").on("click",(function(){e(".shiki_editor-selector").view().focus()})),e(".local-time").each((function(e,t){var n=Object(o.default)(t.getAttribute("data-datetime")).subtract(window.MOMENT_DIFF);t.innerHTML=n.format({ru:"D MMM HH:mm",en:"MMM D HH:mm"}[window.LOCALE])})),t.next=11,Promise.all([n.e("db_entries_show").then(n.bind(null,"./app/packs/javascripts/views/db_entries/favorite_star.js")),n.e("db_entries_show").then(n.bind(null,"./app/packs/javascripts/views/db_entries/lang_trigger.js"))]);case 11:u=t.sent,l=a(u,2),p=l[0].FavoriteStar,new(0,l[1].LangTrigger)(".b-lang_trigger"),new p(e(".b-subposter-actions .fav-add"),gon.is_favoured);case 17:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-animes_collection-index.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/js-cookie/dist/js.cookie.js"),r=n.n(t),i=n("./app/packs/javascripts/views/animes/paginated_catalog.js");function o(){var t=e(".b-collection-filters").data("base_path");window.location.pathname.match(/\/recommendations\//)?t=window.location.pathname.split("/").first(5).join("/"):window.location.pathname.match(/\/comparer\//)&&(t=window.location.pathname.split("/").first(6).join("/")),new i.a(t)}pageLoad("animes_collection_index","recommendations_index","userlist_comparer_show",(function(){e(".l-menu [data-dynamic=postloaded]").exists()?e(".l-menu").one("postloaded:success",o):o(),e(".b-search-results").on("click",".b-age_restricted .censored-rejected",(function(e){var t=e.currentTarget;r.a.set(t.getAttribute("data-cookie"),"true",{expires:9999,path:"/"}),window.location.reload()}))})),pageUnload("animes_collection_index","recommendations_index","userlist_comparer_show",(function(){var t=e(".block-filter.item-add"),n=t.siblings(".b-block_list");n.find(".filter").length===n.find(".item-minus").length&&t.removeClass("item-add").addClass("item-minus")}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-articles/_form.js":function(e,t,n){"use strict";n.r(t),function(e){var t,r=n("./app/packs/javascripts/pages/p-topics/_extended_form.js");pageUnload("articles_new","articles_edit","articles_create","articles_update",(function(){t&&t.$destroy()})),pageLoad("articles_new","articles_edit","articles_create","articles_update",(function(){var n=e(".b-form.edit_article, .b-form.new_article"),i=n.find(".b-shiki_wall"),o=Object(r.initVideo)("article",n,i);Object(r.initWall)(n,i),Object(r.initTagsApp)("article").then((function(e){return t=e})),Object(r.initForm)("article",n,i,o)}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-characters.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/check_height.js");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}pageLoad("characters_show",c(r.a.mark((function t(){var a,s,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(i.a)(e(".text"),{maxHeight:200}),e(".b-subposter-actions .new_comment").on("click",(function(){e(".shiki_editor-selector").view().focus()})),t.next=4,Promise.all([n.e("db_entries_show").then(n.bind(null,"./app/packs/javascripts/views/db_entries/favorite_star.js")),n.e("db_entries_show").then(n.bind(null,"./app/packs/javascripts/views/db_entries/lang_trigger.js"))]);case 4:a=t.sent,s=o(a,2),c=s[0].FavoriteStar,new(0,s[1].LangTrigger)(".b-lang_trigger"),new c(e(".b-subposter-actions .fav-add"),gon.is_favoured);case 10:case"end":return t.stop()}}),t)})))),pageLoad("characters_art",c(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/imageboards_gallery.js"));case 2:t=e.sent,new(0,t.ImageboardsGallery)(".b-gallery");case 5:case"end":return e.stop()}}),e)})))),pageLoad("characters_cosplay",c(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("animes_cosplay").then(n.bind(null,"./app/packs/javascripts/views/animes/cosplay.js"));case 2:t=e.sent,new(0,t.Cosplay)(".l-content");case 5:case"end":return e.stop()}}),e)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-clubs/_menu.js":function(e,t,n){(function(e){pageLoad(".clubs",(function(){var t=e(".b-clubs-menu"),n=e(".b-subposter-actions",t),r=t.children(".invite"),i=e("#club_invite_dst_id",r);e(".invite",n).on("click",(function(){n.hide(),r.show(),i.focus()})),e(".cancel",r).on("click",(function(){n.show(),r.hide()})),e("form",r).on("ajax:success",(function(){i.val(""),e(".cancel",r).click()})),i.completable().on("autocomplete:success autocomplete:text",(function(e,t){t.constructor===Object&&t.name&&i.val(t.name),i.closest("form").submit()})).on("keydown",(function(t){27===t.keyCode&&e(".cancel",r).click()})),e(".upload input",t).on("change",(function(t){var n=t.currentTarget;e(n).closest("form").submit()}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-clubs/broadcast.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/turbolinks/dist/turbolinks.js"),r=n.n(t);pageLoad(".clubs-broadcast",(function(){e(".b-form.new_comment").on("ajax:success",(function(t,n){var i=t.currentTarget,o=e(i).data("next-url")+"#comment-"+n.id;r.a.visit(o)}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-clubs/edit.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}pageLoad("clubs_edit",i(t.mark((function r(){var i;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e(".edit-page.links").exists()&&(e(".anime-suggest").completableVariant(),e(".manga-suggest").completableVariant(),e(".ranobe-suggest").completableVariant(),e(".character-suggest").completableVariant(),e(".club-suggest").completableVariant(),e(".collection-suggest").completableVariant()),e(".edit-page.members").exists()&&(e(".moderator-suggest").completableVariant(),e(".admin-suggest").completableVariant(),e(".kick-suggest").completableVariant(),e(".ban-suggest").completableVariant()),!e(".edit-page.styles").exists()){t.next=8;break}return t.next=5,n.e("app-edit_styles").then(n.bind(null,"./app/packs/javascripts/views/styles/edit.js"));case 5:i=t.sent,new(0,i.EditStyles)(".b-edit_styles");case 8:case"end":return t.stop()}}),r)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-clubs/images.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}var a=null;pageUnload("clubs_images",o(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&(a.destroy(),a=null);case 1:case"end":return e.stop()}}),e)})))),pageLoad("clubs_images",o(r.mark((function e(){var t,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/preloaded_gallery.js"));case 2:t=e.sent,i=t.PreloadedGallery,a=new i(".b-gallery");case 5:case"end":return e.stop()}}),e)}))))},"./app/packs/javascripts/pages/p-clubs/show.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}var o=null;pageUnload("clubs_show",i(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&(o.destroy(),o=null);case 1:case"end":return e.stop()}}),e)})))),pageLoad("clubs_show",i(t.mark((function r(){var i,a;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e(".b-gallery").exists()){t.next=6;break}return t.next=3,n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/preloaded_gallery.js"));case 3:i=t.sent,a=i.PreloadedGallery,o=new a(".b-gallery");case 6:case"end":return t.stop()}}),r)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-collections/_form.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./app/packs/javascripts/pages/p-topics/_extended_form.js");function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function u(){e('[id*="submit_collection"]').removeAttr("disabled")}function l(){return(l=c(o.a.mark((function r(){var i,a,s,c,l,p,d,f,h,v,m,y;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e("#vue_collection_links").exists()){r.next=3;break}return u(),r.abrupt("return");case 3:return r.next=5,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 5:return i=r.sent,a=i.createApp,r.next=9,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-vuex")]).then(n.bind(null,"./node_modules/vuex/dist/vuex.esm-browser.js"));case 9:return s=r.sent,c=s.createStore,r.next=13,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-sortable.esm.js"),n.e("vendors_async-vuex"),n.e("vendors_async-vuedraggable.umd.js"),n.e(5)]).then(n.bind(null,"./app/packs/javascripts/vue/components/collections/collection_links.vue"));case 13:return l=r.sent,p=l.default,r.next=17,n.e(11).then(n.t.bind(null,"./app/packs/javascripts/vue/stores/collection_links.js",7));case 17:d=r.sent,f=e("#collection_form").data("collection"),h=e("#collection_form").data("autocomplete_url"),v=e("#collection_form").data("max_links"),(m=c(d)).state.collection=f,(y=a(p,{maxLinks:v,autocompleteUrl:h})).use(m),y.config.globalProperties.I18n=t,y.mount("#vue_collection_links"),u();case 28:case"end":return r.stop()}}),r)})))).apply(this,arguments)}pageUnload("collections_new","collections_edit","collections_create","collections_update",(function(){r&&r.$destroy()})),pageLoad("collections_new","collections_edit","collections_create","collections_update",(function(){!function(){l.apply(this,arguments)}(),Object(a.initTagsApp)("collection").then((function(e){return r=e}));var t=e(".coauthor-suggest");t.length&&t.completable().on("autocomplete:success",(function(t,n){var r=e("#new_collection_role");r.find("#collection_role_user_id").val(n.id),r.submit()}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-contests/_form.js":function(e,t,n){(function(e,t){function n(){var n=e("#contest_member_ids_").next().find("input:checked").length;e(".members_count").html(t.t("frontend.pages.p_contests.candidate",{count:n}))}pageLoad("contests_edit",(function(){e(".edit .proposing .hidden").removeClass("hidden"),e("form").on("click","input[type=checkbox]",(function(){return n()})),e("form .proposing .take").on("click",(function(t){var n=t.currentTarget;e(n).parent().hide(),e(".member-suggest").trigger("autocomplete:success",[{id:e(n).data("id"),name:e(n).data("text")}]),e(".member-suggest").trigger("blur")})),e(".member-suggest").completableVariant().on("autocomplete:success",(function(e,t){return n()})),n()}))}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-contests/_proposing.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/axios.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(t){return e(t).parents(".suggestion").find(".voters-container")}function s(t){return e(t).parents(".suggestion").find(".hide")}function c(t){return e(t).parents(".suggestion").find(".show")}pageLoad("contests_show","contests_edit",(function(){e(".proposing").exists()&&(e(".proposing .suggestion .show").on("click",(function(e){var t=e.currentTarget;a(t).show(),s(t).show(),c(t).hide()})),e(".proposing .suggestion .hide").on("click",(function(e){var t=e.currentTarget;a(t).hide(),s(t).hide(),c(t).show()})),e(".proposing .suggestion .show.ajaxable").on("click",function(){var t,n=(t=r.a.mark((function t(n){var o,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.currentTarget,e(o).hasClass("ajaxable")){t.next=3;break}return t.abrupt("return");case 3:return e(o).removeClass("ajaxable"),t.next=6,i.a.get(e(o).data("href"));case 6:a=t.sent,s=a.data,e(o).trigger("ajax:success",s);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))});return function(e){return n.apply(this,arguments)}}()),e(".proposing .suggestion .show").on("ajax:success",(function(e,t){a(e.currentTarget).html(t)})))})),pageLoad("contests_show",(function(){e(".proposing").exists()&&(e(".proposing .item-suggest").completable().on("autocomplete:success",(function(t,n){var r=t.currentTarget;e(r).val(n.name),e(r).parents("form").find("#contest_suggestion_item_id").val(n.id),e(r).parents("form").submit()})),e(".proposing form").on("submit",(function(t){Object.isEmpty(e(this).find("#contest_suggestion_item_id").val())&&t.preventDefault()})))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-contests/grid.js":function(e,t,n){(function(e){function t(){var t,n=e(".contest-grid"),r=n.find(".final"),i=n.find(".winners .round:last-child .entry:first-child"),o=n.find(".losers .round:last-child .entry:first-child");o.length?t=o.offset().top-i.offset().top+1:(i=n.find(".winners .round:last-child .entry:first-child"),t=(o=n.find(".winners .round:last-child .entry:last-child p:first-child")).offset().top-i.offset().top-23),r.css({height:t,width:1,top:i.offset().top+i.outerHeight()-1,left:i.offset().left+i.outerWidth()});var a=r.find(".entry");a.css({marginTop:t/2-a.outerHeight()})}pageLoad("contests_grid",(function(){t(),e(window).on("resize",t)})),pageUnload("contests_grid",(function(){e(window).off("resize",t)}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-contests/show.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./app/packs/javascripts/views/contests/round.js");pageLoad("contests_show",(function(){e(".contest_round").length&&new t.a(e(".contest_round"),gon.votes)}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-critiques/_form.js":function(e,t,n){(function(e){pageLoad("critiques_new","critiques_edit","critiques_create","critiques_update",(function(){e(".b-rate").rateable()}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-dashboards/show.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./app/packs/javascripts/utils/load_image.js");function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function u(e,t){var n=t.find(".b-topic"),r=e.outerHeight();n.length&&r<t.outerHeight()&&(n.last().remove(),u(e,t))}pageLoad("dashboards_show",c(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e(".p-dashboards-show .v2").length){t.next=2;break}return t.abrupt("return");case 2:return e(".l-page").on("click",".user_list .switch",(function(t){var n=t.currentTarget;e(n).closest(".list-type").toggleClass("hidden").siblings(".list-type").toggleClass("hidden")})),t.next=5,o()(500);case 5:return Object(a.d)(".cc-news").then((function(){u(e(".c-news_topics"),e(".c-generated_news"))})),t.next=8,o()(500);case 8:(n=e(".y-sponsored")).children().length&&n.addClass("block");case 10:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-dashboards/show_v2.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/shiki-utils/index.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}var s=[];function c(){return u.apply(this,arguments)}function u(){return(u=a(r.a.mark((function e(){var t,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(),Object(i.isMobile)()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.e("app-swiper").then(n.bind(null,"./app/packs/javascripts/vendor/async/swiper.js"));case 5:t=e.sent,o=t.default,Object(i.isMobile)()&&(s.push(new o(".fc-ongoings",{slidesPerView:"auto",slidesPerColumn:1,spaceBetween:0,wrapperClass:"inner",slideClass:"b-catalog_entry",navigation:{nextEl:".mobile-slider-next",prevEl:".mobile-slider-prev"}})),s.push(new o(".db-updates",{slidesPerView:"auto",slidesPerColumn:2,spaceBetween:30,wrapperClass:"inner",slideClass:"db-update",navigation:{nextEl:".mobile-slider-next",prevEl:".mobile-slider-prev"}}))),Object(i.isPhone)()&&(s.push(new o(".content-updates",{slidesPerView:"auto",slidesPerColumn:3,spaceBetween:30,wrapperClass:"inner",slideClass:"b-news_line-topic",navigation:{nextEl:".mobile-slider-next",prevEl:".mobile-slider-prev"}})),s.push(new o(".hot-topics",{slidesPerView:"auto",slidesPerColumn:3,spaceBetween:30,wrapperClass:"inner",slideClass:"b-news_line-topic",navigation:{nextEl:".mobile-slider-next",prevEl:".mobile-slider-prev"}})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){s.forEach((function(e){return e.destroy()})),s=[]}pageLoad("dashboards_show",(function(){if(e(".p-dashboards-show .v2").length){c(),e(document).on("resize:debounced orientationchange",c);var t=document.querySelector(".create-topic");t&&(t.href=t.href.replace("USER_ID",window.SHIKI_USER.id)),e(".fc-user-sections .f-user").on("postloaded:success",(function(){var t=e(".fc-user-sections .f-user .devise");if(t.length&&!location.hostname.match(/^shikimori.(?:one|local|org)$/)){var n=function(){return"__UNEXISTING"in window?window.__UNEXISTING:"mori"};t.html('<p class="auth-alert">\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 <a href="https://shiki'+n()+'.one">shiki'+n()+".one</a> \u0434\u043e\u043c\u0435\u043d\u0435</p>")}}))}})),pageUnload("dashboards_show",(function(){e(".p-dashboards-show .v2").length&&(l(),e(document).off("resize:debounced orientationchange",c))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-db_entries/edit.js":function(e,t,n){(function(e){function t(e,t,r){e.prop("disabled",!n(t,r))}function n(e,t){return!!e.val()&&(!t.length||!!t.val())}pageLoad(".db_entries-edit",(function(){e(".merge_target_id").each((function(r,i){var o=e(i),a=o.closest("form"),s=a.find("input[type=submit]"),c=a.find("input[name=target_id]"),u=a.find("input[name=episode]");a.find("input[data-autocomplete]").completable().on("autocomplete:success",(function(n,r){var i=n.currentTarget,a=o.data("type"),l="".concat(a.toLowerCase(),"s").replace("ranobes","ranobe").replace("persons","people");c.val(r.id),o.append("\n            <a href='/".concat(l,"/").concat(r.id,"' class='bubbled b-link'>\n              ").concat(r.name,"\n            </a>\n          ")).process(),e(i).remove(),t(s,c,u)})),a.on("submit",(function(e){n(c,u)||(e.preventDefault(),e.stopImmediatePropagation())})),u.on("keyup change",(function(){t(s,c,u)}))}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-db_entries/edit_field.js":function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"initArrayFieldApp",(function(){return f}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}function d(){return(d=p(a.a.mark((function t(){var i,o,s,u,l,p,d,f,h,v,m,y,_;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 2:return i=t.sent,o=i.createApp,t.next=6,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-vuex")]).then(n.bind(null,"./node_modules/vuex/dist/vuex.esm-browser.js"));case 6:return s=t.sent,u=s.createStore,t.next=10,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-sortable.esm.js"),n.e("vendors_async-vuex"),n.e("vendors_async-vuedraggable.umd.js"),n.e(6)]).then(n.bind(null,"./app/packs/javascripts/vue/components/external_links/external_links.vue"));case 10:return l=t.sent,p=l.default,t.next=14,n.e(2).then(n.bind(null,"./app/packs/javascripts/vue/stores/collection.js"));case 14:d=t.sent,f=d.default,h=e("#vue_external_links"),v=h.data("external_links").map((function(e){return c(c({},e),{},{key:e.id})})),(m=u(f)).state.collection=v,(y=o(p,{kindOptions:h.data("kind_options"),resourceType:h.data("resource_type"),entryType:h.data("entry_type"),entryId:h.data("entry_id"),watchOnlineKinds:h.data("watch_online_kinds")})).use(m),y.config.globalProperties.I18n=r,_=y.mount("#vue_external_links"),e(".external_link-wrapper .delete").on("click",(function(t){var n=t.currentTarget,r=e(n).closest(".external_link-wrapper");_.cleanupLink({kind:r.find("select").val(),url:r.find("input").val()})}));case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return h=p(a.a.mark((function t(){var i,o,s,c,u,l,d,f,h,v,m,y,_;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 2:return i=t.sent,o=i.createApp,s=i.nextTick,t.next=7,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-vuex")]).then(n.bind(null,"./node_modules/vuex/dist/vuex.esm-browser.js"));case 7:return c=t.sent,u=c.createStore,t.next=11,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-sortable.esm.js"),n.e("vendors_async-vuex"),n.e("vendors_async-vuedraggable.umd.js"),n.e(4)]).then(n.bind(null,"./app/packs/javascripts/vue/components/array_field.vue"));case 11:return l=t.sent,d=l.default,t.next=15,n.e(2).then(n.bind(null,"./app/packs/javascripts/vue/stores/collection.js"));case 15:f=t.sent,h=f.default,v=e("#vue_app"),m=v.data("values"),(y=u(h)).state.collection=m.map((function(e,t){return{key:t,value:e}})),(_=o(d,{resourceType:v.data("resource_type"),field:v.data("field"),autocompleteUrl:v.data("autocomplete_url"),autocompleteType:v.data("autocomplete_type")})).use(y),_.config.globalProperties.I18n=r,_.mount("#vue_app"),e("form").one("submit",function(){var e=p(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopImmediatePropagation(),e.next=4,y.dispatch("cleanup");case 4:return e.next=6,s();case 6:t.currentTarget.submit();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 26:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function v(){return(v=p(a.a.mark((function t(r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.length){t.next=2;break}return t.abrupt("return");case 2:return e("form",r).on("submit",(function(){var t=e(".c-screenshot:not(.deleted) img",r).map((function(){return e(this).data("id")}));r.find("#entry_ids").val(e.makeArray(t).join(","))})),t.next=5,n.e("vendors_async-sortable.esm.js").then(n.bind(null,"./node_modules/sortablejs/modular/sortable.esm.js"));case 5:i=t.sent,new(0,i.default)(r.find(".cc")[0],{draggable:".b-image",handle:".drag-handle"});case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=p(a.a.mark((function t(r){var i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"./app/packs/javascripts/views/file_uploader.js"));case 2:i=t.sent,new(0,i.FileUploader)(r[0],{isResetAfterUpload:!1}).on("upload:file:success",(function(t,n){var i=n.response;return e(i.html).appendTo(e(".cc",r)).shikiImage()})).on("upload:complete",(function(){return r.find(".thank-you").show()}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=p(a.a.mark((function t(){var i,o,s,c,u,l,p,d,f,h,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 2:return i=t.sent,o=i.createApp,t.next=6,Promise.all([n.e("vendors"),n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-cropper.js"),n.e(7)]).then(n.bind(null,"./app/packs/javascripts/vue/components/poster_field.vue"));case 6:s=t.sent,c=s.default,u=e("#vue_app"),l=u.closest("form"),p=l.find("input[id$=_poster_crop_data]"),d=l.find("input[id$=_poster_data_uri]"),f=l.find("input[id$=_poster_id]"),(h=o(c,{src:u.data("src"),previewTemplateHTML:e(".template-html").html(),cropData:JSON.parse(p.val()),posterId:parseInt(f.val()),previewWidth:u.data("preview-width"),previewHeight:u.data("preview-height")})).config.globalProperties.I18n=r,v=h.mount("#vue_app"),l.on("submit",(function(e){e.currentTarget;f.val(v.posterId()),p.val(JSON.stringify(v.cropData())),d.val(v.toDataURI())}));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}pageUnload(".db_entries-edit_field",(function(){i&&(i.destroy(),i=null)})),pageLoad(".db_entries-edit_field",(function(){var t=e(".edit-page.description_ru, .edit-page.description_en");if(t.exists()&&e("form",t).on("submit",(function(){var n=e(this),r=function(e,t){return t?"".concat(e,"[source]").concat(t,"[/source]"):"".concat(e)};t.hasClass("description_ru")?e('[name$="description_ru]"]',n).val(r(e('.shiki_editor-selector[data-field_name$="description_ru_text]"]',n).view().text,e('[name$="description_ru_source]"]',n).val())):e('[name$="description_en]"]',n).val(r(e('.shiki_editor-selector[data-field_name$="description_en_text]"]',n).view().text,e('[name$="description_en_source]"]',n).val()))})),e(".edit-page.screenshots").exists()&&(e(".c-screenshot").shikiImage(),function(e){v.apply(this,arguments)}(e(".screenshots-positioner")),function(e){m.apply(this,arguments)}(e(".screenshots-uploader"))),e(".edit-page.videos").exists()&&e(".videos-deleter .b-video").imageEditable(),e(".edit-page.imageboard_tag").exists()){var r=e(".b-gallery"),o=r.html();r.data("imageboard_tag")&&n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/imageboards_gallery.js")).then((function(e){var t=e.ImageboardsGallery;i&&i.destroy(),i=new t(r)})),e("#anime_imageboard_tag, #manga_imageboard_tag, #character_imageboard_tag").completable().on("autocomplete:success autocomplete:text",(function(e,t){this.value=Object.isString(t)?t:t.value,r.data({imageboard_tag:this.value}),r.html(o),n.e("galleries").then(n.bind(null,"./app/packs/javascripts/views/images/imageboards_gallery.js")).then((function(e){var t=e.ImageboardsGallery;i&&i.destroy(),i=new t(r)}))}))}if(e(".edit-page.genre_ids").exists()){var a=e(".c-current_genres").children().last(),s=e(".c-all_genres").children().last();a.on("click",".remove",(function(){var t=e(this).closest(".genre").remove();s.find("#".concat(t.attr("id"))).removeClass("included").yellowFade()})),a.on("click",".up",(function(){var t=e(this).closest(".genre"),n=t.prev();t.detach().insertBefore(n).yellowFade()})),a.on("click",".down",(function(){var t=e(this).closest(".genre"),n=t.next();t.detach().insertAfter(n).yellowFade()})),s.on("click",".name",(function(){var t=e(this).closest(".genre");t.hasClass("included")?a.find("#".concat(t.attr("id")," .remove")).click():(t.clone().appendTo(a).yellowFade(),t.addClass("included"))})),e("form.new_version").on("submit",(function(){var t=e(".item_diff"),n=a.children().map((function(){return parseInt(this.id)})).toArray(),r={genre_ids:[t.data("current_ids"),n]};t.find("input").val(JSON.stringify(r))}))}e(".edit-page.external_links").exists()&&function(){d.apply(this,arguments)}(),e(".edit-page.poster").exists()&&function(){y.apply(this,arguments)}();e(["synonyms","licensors","coub_tags","fansubbers","fandubbers","desynced","options"].map((function(e){return".edit-page.".concat(e)})).join(",")).exists()&&f()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-dialogs.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("dialogs_show",s(r.a.mark((function t(){var n,i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o()(25);case 2:return n=e(".shiki_editor-selector").view(),t.next=5,n.initialization.promise;case 5:if(!n.cacheProcessed){t.next=8;break}return t.next=8,n.cacheProcessed.promise;case 8:i=gon,a=i.reply,gon.reply?(n.replyComment(a),n.reprocessCache(),(s=window.location.href.replace(/\/reply\/.*$/,""))!==window.location.href&&window.history.replaceState({turbolinks:!0,url:s},"",s)):n.focus();case 10:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-list_imports.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./node_modules/turbolinks/dist/turbolinks.js"),s=n.n(a);function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("list_imports_show",u(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e(".b-nothing_here").exists()){t.next=5;break}return n=document.location.href,t.next=4,o()(5e3);case 4:n===document.location.href&&s.a.visit(document.location.href);case 5:e(".b-options-floated.collapse .action").click();case 6:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-messages.js":function(e,t,n){(function(e){function t(){e(".item-request-confirm, .item-request-reject").on("ajax:success",(function(t){var r=t.currentTarget;n(e(r).closest(".b-message"))})),e(".item-request-reject.friend-request").on("click",(function(t){var r=t.currentTarget;n(e(r).closest(".b-message"))}))}function n(e){var t=e.find(".b-appear_marker").data({disabled:!1});e.trigger("appear",[t,!0]),e.find(".main-controls").children(":not(.item-delete)").remove(),e.find(".main-controls").children(".item-delete").show()}pageLoad("messages_index",(function(){t(),e(".l-page").on("postloader:success",t)}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-moderations.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/tiny-uri/dist/tiny-uri.js"),o=n("./node_modules/turbolinks/dist/turbolinks.js"),a=n.n(o),s=n("./node_modules/js-cookie/dist/js.cookie.js"),c=n.n(s),u=n("./node_modules/delay/index.js"),l=n.n(u),p=n("./app/packs/javascripts/pages/p-db_entries/edit_field.js"),d=n("./app/packs/javascripts/views/search/collection.js"),f=n("./app/packs/javascripts/utils/check_height.js"),h=n("./app/packs/javascripts/views/application/date_picker.js"),v=n("./app/packs/javascripts/utils/animated.js");function m(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("moderations_show",(function(){var t=e("form#sync");c.a.get("sync_type")&&t.find("select").val(c.a.get("sync_type")),t.find("select").on("change",(function(e){var t=e.currentTarget;return c.a.set("sync_type",t.value,{expires:1,path:"/"})})),t.find("input,select").on("change keyup paste",(function(){var n=e("form#sync select").val(),r=e("form#sync input[type=text]").val();t.prop("action",t.data("url_template").replace("anime",n).replace("persons","people")),t.find("input[type=submit]").prop("disabled",!r)})).trigger("change")})),pageLoad("versions_index","users_index",(function(){e(".date-filter").exists()&&new h.a(".date-filter").on("date:picked",(function(){var e=new i.a(window.location.href).query.set("created_on",this.value||null).toString();a.a.visit(e)}))})),pageLoad("versions_show","user_rate_logs_show",y(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l()();case 2:e(".collapsed.spoiler",".b-log_entry, .b-user_rate_log").click();case 3:case"end":return t.stop()}}),t)})))),pageLoad(".moderations-index",(function(){Object(f.a)(e(".b-brief"),{maxHeight:150}),e(".expand-all").on("click",(function(){e(this).parent().next().next().find(".collapsed.spoiler:visible").click(),e(this).remove()})),e(".l-page").on("ajax:before",".b-log_entry .link.destroy",function(){var t=y(r.a.mark((function t(n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.currentTarget,e(i).closest(".b-log_entry").addClass("b-ajax");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).on("ajax:success",".b-log_entry .link.destroy",function(){var t=y(r.a.mark((function t(n){var i,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.currentTarget,o=e(i).closest(".b-log_entry"),t.next=4,Object(v.a)(o[0]);case 4:o.remove();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).on("ajax:complete",".b-log_entry .link.destroy",function(){var t=y(r.a.mark((function t(n){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.currentTarget,e(i).closest(".b-log_entry").removeClass("b-ajax");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var t=e("form#versions_form").removeClass("b-ajax");t.length&&(["user_id","moderator_id"].forEach((function(n){var r=e("#version_".concat(n)),i=e(".".concat(n,"-suggest")),o=i.parent().find(".placeholder");i.completable({minChars:1}).on("autocomplete:success",(function(e,n){var a=n.id,s=n.name,c=n.url;r.val(a),i.addClass("hidden"),o.removeClass("hidden"),o.find(".nickname").html('<a href="'.concat(c,'">').concat(s,"</a>")),t.addClass("b-ajax").submit()})),o.find(".b-js-action.remove").on("click",(function(){r.val(""),o.addClass("hidden"),i.removeClass("hidden").val(""),t.addClass("b-ajax").submit()}))})),e("#version_field").on("change",(function(n){var r=n.currentTarget.selectedOptions[0].getAttribute("data-item_type");e("#version_item_type").val(r),t.addClass("b-ajax").submit()})))})),pageLoad("roles_show",(function(){new d.a(".b-collection_search"),e(".l-page").on("ajax:before",".b-user",(function(t){var n=t.currentTarget;e(".b-user[id=".concat(n.id,"]")).addClass("b-ajax")})).on("ajax:success",".b-user",(function(t,n){var r=t.currentTarget,i=n.content;e(".b-user[id=".concat(r.id,"]")).replaceWith(i)}))})),pageLoad("users_index",(function(){e(".b-collection_search").length&&new d.a(".b-collection_search")})),pageLoad("studios_edit","publishers_edit",(function(){Object(p.initArrayFieldApp)()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-oauth_applications.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./app/packs/javascripts/utils/check_height.js");pageLoad("oauth_applications_new","oauth_applications_create","oauth_applications_edit","oauth_applications_update",(function(){e(".oauth_application_redirect_uri .hint .sample").on("click",(function(t){var n=t.currentTarget;e(".oauth_application_redirect_uri input").val(n.innerHTML)}))})),pageLoad("oauth_applications_show",(function(){Object(t.a)(e(".description"),{maxHeight:200})}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-pages/about.js":function(e,t,n){(function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function a(n){var r=e(".comments-chart").data("stats"),i=n.getOptions().colors[3];e(".comments-chart").highcharts(u({series:[{name:t.t("frontend.about.comments_per_day"),pointInterval:864e5,pointStart:new Date(r.first().date).getTime(),data:r.map((function(e){return e.count})),color:i,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,i],[1,n.Color(i).setOpacity(0).get("rgba")]]}}],legend:{enabled:!1}}))}function s(n){var r=e(".users-chart").data("stats"),i=n.getOptions().colors[4];e(".users-chart").highcharts(u({series:[{name:t.t("frontend.about.new_users_per_day"),pointInterval:864e5,pointStart:new Date(r.first().date).getTime(),data:r.map((function(e){return[new Date(e.date).getTime(),e.count]})),color:i,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,i],[1,n.Color(i).setOpacity(0).get("rgba")]]}}],legend:{enabled:!1}}))}function c(n){var r=e(".traffic-chart").data("stats"),i=[n.getOptions().colors[2],n.getOptions().colors[1],n.getOptions().colors[0]];return e(".traffic-chart").highcharts(u({series:[{name:t.t("frontend.about.views"),pointInterval:864e5,pointStart:new Date(r.first().date).getTime(),data:r.map((function(e){return e.page_views})),visible:!1,color:i[0],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,i[0]],[1,n.Color(i[0]).setOpacity(0).get("rgba")]]}},{name:t.t("frontend.about.visits"),pointInterval:864e5,pointStart:new Date(r.first().date).getTime(),data:r.map((function(e){return e.visits})),visible:!1,color:i[1],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,i[1]],[1,n.Color(i[1]).setOpacity(0).get("rgba")]]}},{name:t.t("frontend.about.unique_visitors"),pointInterval:864e5,pointStart:new Date(r.first().date).getTime(),data:r.map((function(e){return e.visitors})),color:i[2],fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,i[2]],[1,n.Color(i[2]).setOpacity(0).get("rgba")]]}}]}))}pageLoad("pages_about",o(r.mark((function e(){var t,i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("vendors_async-highcharts").then(n.t.bind(null,"./node_modules/highcharts/highcharts.js",7));case 2:return t=e.sent,e.next=5,n.e("vendors_async-highcharts").then(n.bind(null,"./app/packs/javascripts/vendor/highcharts_colors.js"));case 5:i=e.sent,o=i.colors,t.getOptions().colors.length=0,o.forEach((function(e){return t.getOptions().colors.push(e)})),c(t),a(t),s(t);case 12:case"end":return e.stop()}}),e)}))));var u=function(e){return Object.merge({chart:{zoomType:"x",type:"areaspline"},title:null,xAxis:{type:"datetime",title:null,maxZoom:12096e5,dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b",year:"%Y"}},yAxis:{title:null,gridLineColor:"#eaeaea",min:0},tooltip:{shared:!0},legend:{borderRadius:0,borderWidth:0},plotOptions:{areaspline:{lineWidth:1,fillOpacity:.5,marker:{enabled:!1},shadow:!1,states:{hover:{lineWidth:1}},threshold:null}},credits:!1},e,{deep:!0})}}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-pages/development.js":function(e,t,n){(function(e){pageLoad("pages_development",(function(){var t=e(".b-ajax"),n=e("iframe"),r=e(window).height()-t.offset().top-5;t.css({width:"100%",height:r-10}),n.prop({width:"100%",height:r}),n.on("load",(function(){t.hide(),n.removeClass("hidden")}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-pages/hentai.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}function o(){e(".c-screenshot").shikiImage()}pageLoad("pages_hentai",i(t.mark((function n(){return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(".edit-page").on("postloader:success",o),o(),e(".edit-page").on("click",".delete-all",(function(t){var n=t.currentTarget;window.confirm("\u0422\u043e\u0447\u043d\u043e?")&&e(n).prev().find(".confirm").click()}));case 3:case"end":return t.stop()}}),n)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-pages/oauth.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/axios/index.js"),r=n.n(t);function i(e){return"<div class='to-process' data-dynamic='code_highlight'><code class='b-code-v2' data-language='json'>"+e+"</code></div>"}pageLoad("pages_oauth",(function(){e('select#oauth_application_id, input[name="scopes[]"]').on("change",(function(t){var n=t.currentTarget;e(".l-page").addClass("b-ajax"),e(n).closest("form").submit()})),e("#request_acces_token").on("click",(function(t){var n=t.currentTarget,o=e(n),a=e(".access-token-response").html("").addClass("b-ajax").show();r.a.request({url:o.data("token_url"),method:"post",headers:{},data:{grant_type:"authorization_code",client_id:o.data("client_id"),client_secret:o.data("client_secret"),code:o.data("code"),redirect_uri:o.data("redirect_uri")},responseType:"json",validateStatus:function(e){return e>=200&&e<300||401===e}}).then((function(t){a.removeClass("b-ajax").html(i(JSON.stringify(t.data))).process(),e("#access_token").val(t.data.access_token),e("#refresh_token").val(t.data.refresh_token)})).catch((function(e){return a.removeClass("b-ajax").html(i(e.toString()))}))})),e("#refresh_acces_token").on("click",(function(t){var n=t.currentTarget,o=e(n),a=e(".refresh-token-response").html("").addClass("b-ajax").show();r.a.request({url:o.data("token_url"),method:"post",headers:{},data:{grant_type:"refresh_token",client_id:o.data("client_id"),client_secret:o.data("client_secret"),refresh_token:o.data("refresh_token")},responseType:"json",validateStatus:function(e){return e>=200&&e<300||401===e}}).then((function(e){return a.removeClass("b-ajax").html(i(JSON.stringify(e.data))).process()})).catch((function(e){return a.removeClass("b-ajax").html(i(e.toString()))}))}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-people.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/check_height.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("people_show",a(r.a.mark((function t(){var o,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(i.a)(e(".c-info-left .b-entry-info"),{maxHeight:101,isNoShade:!0}),Object(i.a)(e(".c-info-right .b-entry-info"),{maxHeight:101,isNoShade:!0}),e(".b-subposter-actions .new_comment").on("click",(function(){e(".shiki_editor-selector").view().focus()})),t.next=5,n.e("db_entries_show").then(n.bind(null,"./app/packs/javascripts/views/db_entries/favorite_star.js"));case 5:o=t.sent,a=o.FavoriteStar,Object.keys(gon.is_favoured).forEach((function(t){if(gon.person_role[t]||gon.is_favoured[t]){var n=e(".b-subposter-actions .fav-add[data-kind='".concat(t,"']"));n.show(),new a(n,gon.is_favoured[t])}}));case 8:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-polls.js":function(e,t,n){(function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}pageLoad(".polls",o(r.mark((function i(){var o,a,s,c,u,l,p,d,f,h,v;return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e("#vue_poll_variants").exists()){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 4:return o=r.sent,a=o.createApp,r.next=8,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-vuex")]).then(n.bind(null,"./node_modules/vuex/dist/vuex.esm-browser.js"));case 8:return s=r.sent,c=s.createStore,r.next=12,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-sortable.esm.js"),n.e("vendors_async-vuex"),n.e("vendors_async-vuedraggable.umd.js"),n.e(4)]).then(n.bind(null,"./app/packs/javascripts/vue/components/array_field.vue"));case 12:return u=r.sent,l=u.default,r.next=16,n.e(2).then(n.bind(null,"./app/packs/javascripts/vue/stores/collection.js"));case 16:p=r.sent,d=p.default,f=e("#poll_form").data("poll").variants,(h=c(d)).state.collection=f.map((function(e,t){return{key:t,value:e.label}})),(v=a(l,{resourceType:"Poll",field:"poll_variants",inputName:"poll[variants_attributes][][label]",emptyInputName:"poll[variants_attributes][]"})).use(h),v.config.globalProperties.I18n=t,v.mount("#vue_poll_variants");case 25:case"end":return r.stop()}}),i)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-profiles/comments.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/turbolinks/dist/turbolinks.js"),r=n.n(t),i=n("./node_modules/tiny-uri/dist/tiny-uri.js");pageLoad("profiles_comments",(function(){return e("form.comments-search").on("submit",(function(t){t.preventDefault();var n=e(t.currentTarget).find("input.search"),o=new i.a(n.data("search_url")).query.set("phrase",n.val()).toString();r.a.visit(o)}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-profiles/edit.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/js-cookie/dist/js.cookie.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}function c(){return(c=s(r.a.mark((function t(){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e("#user_preferences_body_width").on("change",(function(t){var n=t.currentTarget;e(document.body).removeClass("x1000 x1200").addClass(n.value)})),t.next=3,n.e("app-edit_styles").then(n.bind(null,"./app/packs/javascripts/views/styles/edit.js"));case 3:i=t.sent,new(0,i.EditStyles)(".b-edit_styles");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}pageLoad("profiles_edit",(function(){e(".edit-page.account").exists()&&e(".censored-rejected").on("click",(function(t){var n=t.currentTarget;e(".censored-rejected-container").remove(),o.a.remove(n.getAttribute("data-cookie"))})),e(".edit-page.styles").exists()&&function(){c.apply(this,arguments)}(),e(".edit-page.list, .edit-page.misc").exists()&&(e(".profile-action .controls .b-js-link").on("click",(function(t){var n=t.currentTarget,r=e(n).data("type");e(n).closest(".controls").hide(),e(n).closest(".profile-action").find(".form.".concat(r)).show()})),e(".profile-action .cancel").on("click",(function(t){var n=t.currentTarget;e(n).closest(".profile-action").find(".controls").show(),e(n).closest(".profile-action").find(".form").hide()})),e(".profile-action a").on("ajax:success",(function(t){var n=t.currentTarget;e(n).closest(".profile-action").find(".cancel").click()})),e(".nickname-changes .controls .b-js-link").on("click",(function(){e(".nickname-changes .controls").hide(),e(".nickname-changes .form").show()})),e(".nickname-changes .cancel").on("click",(function(){e(".nickname-changes .controls").show(),e(".nickname-changes .form").hide()})),e(".nickname-changes a").on("ajax:success",(function(){e(".nickname-changes .cancel").click()}))),e(".edit-page.ignored_topics, .edit-page.ignored_users")&&function(){e(".b-editable_grid .actions .b-js-link").on("ajax:before",(function(t){var n=t.currentTarget;e(n).hide(),e('<div class="ajax-loading vk-like"></div>').insertAfter(n)})).on("ajax:success",(function(t){var n=t.currentTarget;e(n).closest("tr").remove()})),e(".user_ids").completableVariant(),e(".user_ids").is(":appeared")&&e(".user_ids").focus();e(".user_ids").on("keydown",(function(t){10!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),e(".b-form").submit())}))}()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-profiles/favorites.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/tiny-uri/dist/tiny-uri.js"),o=n("./app/packs/javascripts/utils/axios.js"),a=n("./node_modules/delay/index.js"),s=n.n(a);function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("profiles_favorites",u(r.a.mark((function t(){var a,c,l,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e(".cc-favourites.sortable")).length){t.next=3;break}return t.abrupt("return");case 3:return c=a.data("favorite_ids"),l=a.data("reorder_url"),a.children(".b-catalog_entry").each((function(t,n){return e(n).data("reorder_url",l.replace("ID",c[t]))})),t.next=8,n.e("vendors_async-sortable.esm.js").then(n.bind(null,"./node_modules/sortablejs/modular/sortable.esm.js"));case 8:p=t.sent,new(0,p.default)(a[0],{draggable:".b-catalog_entry",handle:".b-catalog_entry",onStart:function(){a.addClass("draggable")},onEnd:function(){a.removeClass("draggable")},onSort:function(t){return u(r.a.mark((function n(){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e(t.item).data("reorder_url"),a.parent().addClass("b-ajax"),n.next=4,Promise.all([o.a.post(new i.a(c).query.set("new_index",t.newIndex).toString()),s()(250)]);case 4:a.parent().removeClass("b-ajax");case 5:case"end":return n.stop()}}),n)})))()}});case 11:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-profiles/moderation.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=(n("./node_modules/turbolinks/dist/turbolinks.js"),n("./node_modules/shiki-utils/index.js")),c=n("./app/packs/javascripts/views/application/ban_form.js");function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("profiles_moderation",(function(){e(".b-form.new_ban").on("ajax:success",l(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.flash.info(t.t("frontend.pages.p_profiles.page_is_reloading")),e.next=3,a()(500);case 3:window.location.reload();case 4:case"end":return e.stop()}}),e)})))),new c.a(e(".b-form.new_ban")),e(".ban-time").livetime()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-profiles/show.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./app/packs/javascripts/utils/axios.js"),a=n("./app/packs/javascripts/utils/dayjs.js"),s=n("./node_modules/shiki-utils/index.js");function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e,t){return Math.round((t.getTime()-e.getTime())/864e5*10)/10}pageLoad("profiles_show",(function(){e(".friend-action").on("ajax:success",(function(){return e(".friend-action").toggle()})),e(".ignore-action").on("ajax:success",(function(){return e(".ignore-action").toggle()})),e("h1.aliases").tipsy({gravity:Object(s.isMobile)()?"n":"w",html:!0,prependTo:document.body,title:function(){var e,t=this;return(e=i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get(t.getAttribute("data-tooltip_url"));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))})()}}),e(".activity .graph").empty().bar({before:function(e,t,n){if(e.forEach((function(e,t){return e.dates={from:new Date(1e3*e.name[0]),to:new Date(1e3*e.name[1])}})),t.interval=Math.round(u(e[0].dates.from,e[0].dates.to)),t.range=Math.round(u(e[0].dates.from,e[e.length-1].dates.to)),t.index_label=0,t.y_axis){n.addClass("y-axis");for(var r=[],i=1;i<=10;)r.push('<div class="ruler" style="top: '.concat(10*i,'%;"></div>')),i+=1;n.html(r.join(""))}},title:function(e){var n=p(e.value,t.t("frontend.pages.p_profiles.hour.one"),t.t("frontend.pages.p_profiles.hour.few"),t.t("frontend.pages.p_profiles.hour.many")),r="en"===window.LOCALE?"MMMM D":"D MMMM",i=Object(a.default)(e.dates.from).format(r),o=Object(a.default)(e.dates.to).format(r);if(i===o)return t.t("frontend.pages.p_profiles.label.short",{hours:e.value,hourWord:n,date:i});var s=u(e.dates.from,e.dates.to),c=s===Math.round(s)?p(e.value,t.t("frontend.pages.p_profiles.day.one"),t.t("frontend.pages.p_profiles.day.few"),t.t("frontend.pages.p_profiles.day.many")):t.t("frontend.pages.p_profiles.day.many");return t.t("frontend.pages.p_profiles.label.full",{hours:e.value,hourWord:n,fromDate:i,toDate:o,days:s,dayWord:c})},xAxis:function(e,t,n,r){var i;if(t<r.index_label)return"";var o=e.dates,s=o.from,c=o.to,u=e!==n.last()?s:c;return 0===t?(r.index_label=3,i=u.getFullYear()):r.prior.dates.from.getFullYear()!==u.getFullYear()?(i=u.getFullYear(),r.index_label=t+3):r.prior.dates.from.getMonth()!==u.getMonth()?(i=Object(a.default)(u).format("MMM").capitalize(),r.index_label=t+3):r.range<=120&&(i=u.getDate(),r.index_label=t+2),r.prior=e,i||""},noData:function(e){e.html('<p class="stat-sorry">'.concat(e.data("no_stat_text"),"</p>")).removeClass("bar").attr("id",!1)}})}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-profiles/videos.js":function(e,t,n){(function(e){pageLoad("profiles_video_uploads",(function(){e(".l-page").on("click",".b-log_entry.video .collapsed",(function(){var t=e(this).parent().find(".player");t.data("html")&&t.html(t.data("html")).data({html:""})}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-recommendations-index.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=(n("./node_modules/turbolinks/dist/turbolinks.js"),n("./app/packs/javascripts/services/ajax_cacher.js")),c=n("./app/packs/javascripts/utils/in_new_tab.js"),u=n("./app/packs/javascripts/utils/axios.js");function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}pageLoad("recommendations_index","recommendations_favourites",p(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e("p.pending").exists()){n.next=7;break}return r=document.location.href,n.next=4,a()(5e3);case 4:if(r!==document.location.href){n.next=7;break}return window.location.reload(),n.abrupt("return");case 7:e("body").on("mouseover",".b-catalog_entry",(function(n){var r=n.currentTarget,i=e(r);if(window.SHIKI_USER.isSignedIn&&!i.hasClass("entry-ignored"))if(i.data("ignore_augmented"))i.data("ignore_button").show();else{var o=t.t("frontend.pages.p_recommendations_index.dont_recommend_franchise"),a=e("<span class='controls'>\n        <span class='delete mark-ignored' title='".concat(o,"'></span>\n      </span>")).appendTo(i.find(".image-cutter"));i.data({ignore_augmented:!0,ignore_button:a})}})),e("body").on("mouseout",".b-catalog_entry",(function(t){var n=t.currentTarget,r=e(n).data("ignore_button");r&&r.hide()})),e("body").on("click",".entry-ignored",(function(e){Object(c.a)(e)||e.preventDefault()})),e("body").on("click",".b-catalog_entry .mark-ignored",function(){var t=p(i.a.mark((function t(n){var r,o,a,c,l,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e(n.currentTarget).closest(".b-catalog_entry"),!r.find("a").first().attr("href").match(/(anime|manga)s\//)){t.next=15;break}return o=RegExp.$1,a=r.prop("id"),r.addClass("entry-ignored"),e(n.currentTarget).hide(),s.a.reset(),t.next=11,u.a.post("/recommendation_ignores",{target_type:o,target_id:a});case 11:c=t.sent,l=c.data,p=l.map((function(e){return".entry-".concat(e)})).join(","),e(p).addClass("entry-ignored");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return n.stop()}}),n)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-reviews-critiques.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("reviews_show","critiques_show",s(r.a.mark((function t(){var n,i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o()(25);case 2:return n=e(".shiki_editor-selector").view(),t.next=5,n.initialization.promise;case 5:if(!n.cacheProcessed){t.next=8;break}return t.next=8,n.cacheProcessed.promise;case 8:i=gon,a=i.reply,gon.reply&&(n.replyComment(a),n.reprocessCache(),(s=window.location.href.replace(/\/reply$/,""))!==window.location.href&&window.history.replaceState({turbolinks:!0,url:s},"",s));case 10:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-statistics/index.js":function(e,t,n){(function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function a(e){var n=e.getOptions().colors;Object.merge(total.series[0],{dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"white",distance:-30},size:"70%"}),Object.merge(total.series[1],{dataLabels:{formatter:function(){return this.y>20?"<b>".concat(this.point.name,"</b>:<b>").concat(this.y,"</b>"):null}},innerSize:"70%"}),total.series[0].data.forEach((function(e,t){return e.color=n[t]})),total.series[1].data.forEach((function(t,r){var i=r%3/20,o=parseInt(r/3);return t.color=e.Color(n[o]).brighten(i).get()})),c(e,"pie","total",total,"normal",t.t("frontend.statistics.number"),(function(){return this.key.match(/^\d/)?t.t("frontend.statistics.anime_with_score",{count:this.y,score:this.key}):t.t("frontend.statistics.anime_of_type",{count:this.y,type:this.key})}),{xAxis:null,plotOptions:{pie:{shadow:!1}}}),c(e,"area","by_kind",by_kind,"normal",t.t("frontend.statistics.number"),(function(){return t.t("frontend.statistics.anime_in_year",{count:this.y,type:this.series.name,year:this.x})}),{}),c(e,"area","by_studio",by_studio,"normal",t.t("frontend.statistics.number"),(function(){return t.t("frontend.statistics.anime_with_rating_in_year",{count:this.y,rating:this.series.name,year:this.x})}),{xAxis:{categories:by_studio.categories,labels:{step:1},title:{enabled:!1}}})}function s(n){e(".l-page").on("click",".by_genre .control",(function(){var r=e(this).addClass("selected");r.siblings().removeClass("selected"),"by_genre_chart"in window&&by_genre_chart.destroy(),c(n,"area","by_genre",by_genre[r.data("kind")],"percent",t.t("frontend.statistics.share"),(function(){return t.t("frontend.statistics.genres_share",{percent:n.numberFormat(this.percentage,2,"."),genre:this.series.name,year:this.x})}),{yAxis:{max:100}})})),e(".l-page").on("click",".by_rating .control",(function(){var r=e(this).addClass("selected");r.siblings().removeClass("selected"),"by_rating_chart"in window&&by_rating_chart.destroy(),c(n,"area","by_rating",by_rating[r.data("kind")],"percent",t.t("frontend.statistics.share"),(function(){return t.t("frontend.statistics.ratings_share",{percent:n.numberFormat(this.percentage,2),rating:this.series.name,year:this.x})}),{yAxis:{max:100}})}))}pageLoad("statistics_index",o(r.mark((function t(){var i,o,c;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e("#image_placeholder").hide(),t.next=3,n.e("vendors_async-highcharts").then(n.t.bind(null,"./node_modules/highcharts/highcharts.js",7));case 3:return i=t.sent,t.next=6,n.e("vendors_async-highcharts").then(n.bind(null,"./app/packs/javascripts/vendor/highcharts_colors.js"));case 6:o=t.sent,c=o.colors,i.getOptions().colors.length=0,c.forEach((function(e){return i.getOptions().colors.push(e)})),a(i),s(i),e(".by_rating .control").first().trigger("click"),e(".by_genre .control").first().trigger("click");case 14:case"end":return t.stop()}}),t)}))));var c=function(t,n,r,i,o,a,s,c){var u={chart:{renderTo:r,type:n},title:{text:""},subtitle:{text:""},xAxis:{categories:i.categories,labels:{step:2},title:{enabled:!1}},yAxis:{title:{text:a},labels:{formatter:function(){return this.value}}},tooltip:{formatter:s,borderRadius:0,borderWidth:1,shadow:!1},plotOptions:{area:{stacking:o,lineColor:"#666666",lineWidth:1,shadow:!1,marker:{enabled:!1,lineWidth:1,lineColor:"#666666"}}},credits:{enabled:!1},legend:{borderRadius:0,borderWidth:0},series:i.series};window["".concat(r,"_chart")]=new t.Chart(e.extend(!0,u,c||{}))}}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-statistics/lists.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}function o(e,t){var n=t.node,r=t.stats,i=t.label,o=Object.keys(r);e.chart(n,{chart:{type:"area"},title:{text:i},xAxis:{categories:Object.keys(r[o[0]]).sortBy((function(e){return parseInt(e.replace(/[^\d].*/,""))}))},yAxis:{title:{text:"Users"}},credits:{enabled:!1},tooltip:{split:!0},series:Object.keys(r).map((function(e){return{name:e,data:Object.values(r[e])}})).sortBy((function(e){return-e.data[0]}))})}pageLoad("statistics_lists",i(t.mark((function r(){var i,a,s;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e("vendors_async-highcharts").then(n.t.bind(null,"./node_modules/highcharts/highcharts.js",7));case 2:return i=t.sent,t.next=5,n.e("vendors_async-highcharts").then(n.bind(null,"./app/packs/javascripts/vendor/highcharts_colors.js"));case 5:a=t.sent,s=a.colors,i.getOptions().colors.length=0,s.forEach((function(e){return i.getOptions().colors.push(e)})),e(".chart").toArray().forEach((function(t){var n=e(t).data("stats"),r=t.getAttribute("data-label");n&&o(i,{node:t,stats:n,label:r})}));case 10:case"end":return t.stop()}}),r)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-tests.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./node_modules/tiny-uri/dist/tiny-uri.js");function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}function u(){e("#link").val(document.location.href.replace(/\?.*/,"")+"?image_url="+e("#image_url").val()+"&image_border="+e("#image_border").val().replace("#","@"))}pageLoad(".tests",(function(){e("#image_url").on("keypress",(function(t){10!==t.keyCode&&13!==t.keyCode||e(this).trigger("change")})).on("blur change",(function(){e(".b-achievement .c-image img").attr({src:this.value}),u()})).on("paste",c(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o()();case 2:e(this).trigger("change");case 3:case"end":return t.stop()}}),t,this)})))).trigger("change"),e("#image_border").on("keyup blur change",(function(){e(".b-achievement .c-image .border").css({borderColor:this.value}),u()})).on("paste",c(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o()();case 2:e(this).trigger("change");case 3:case"end":return t.stop()}}),t,this)})))).trigger("change")})),pageLoad("tests_reset_styles_cache",(function(){e(".b-form").on("submit",(function(t){var n=t.currentTarget;n.action=new a.a(n.action).query.set("url",e("input[name=url]",n).val()).toString()}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-tests/achievements_notification.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("tests_achievements_notification",s(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(".b-button").on("click",(function(t){var n=t.currentTarget,r=e(n),i=JSON.parse(r.prev().children("textarea").val());window.SHIKI_ACHIEVEMENTS_NOTIFIER.notify(i)})),t.next=3,o()();case 3:e(".b-button").click();case 4:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-tests/editor.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=(n("./node_modules/autosize/dist/autosize.esm.js"),n("./app/packs/javascripts/utils/axios.js"));function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,c,"next",e)}function c(e){s(o,r,i,a,c,"throw",e)}a(void 0)}))}}pageLoad("tests_editor",c(r.a.mark((function t(){var i,s,c,l,p,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e(".b-shiki_editor"),i.find("textarea"),t.next=4,Promise.all([n.e("vendors"),n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-shiki-editor")]).then(n.bind(null,"./node_modules/shiki-editor/index.js"));case 4:return s=t.sent,s.ShikiEditor,t.next=8,Promise.resolve().then(n.bind(null,"./node_modules/shiki-utils/index.js"));case 8:return c=t.sent,l=c.ShikiRequest,new l(window.location.origin,a.a),p=document.querySelector(".raw-editor"),document.querySelector(".raw-editor-2"),d=document.querySelector(".b-shiki_editor-v2 div"),e(p).closest(".fc-2").closest(".block").hide(),t.next=18,o()(100);case 18:e(".b-shiki_editor-v2").view().editorApp.setContent(u,!1),t.next=23;break;case 22:e(d).closest(".block").hide();case 23:case"end":return t.stop()}}),t)}))));var u="\n[spoiler_block=\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 is-fullwidth]\n[spoiler_block=\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0431\u0435\u0437 \u043f\u043e\u0434\u0447\u0451\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u044f is-fullwidth]\n# \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 1\n```\n# \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 1\n```\n\n## \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 2\n```\n## \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 2\n```\n\n### \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 3\n```\n### \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0443\u0440\u043e\u0432\u0435\u043d\u044c 3\n```\n\n#### \u0421\u043f\u0435\u0446 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1\n```\n#### \u0421\u043f\u0435\u0446 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 1\n```\n\n##### \u0421\u043f\u0435\u0446 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2\n```\n##### \u0421\u043f\u0435\u0446 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a 2\n```\n[/spoiler_block]\n[spoiler_block=\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438 \u0441 \u043f\u043e\u0434\u0447\u0451\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u0435\u043c is-fullwidth]\n# \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 1\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n# \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 1\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n\n## \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 2\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n## \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 2\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n\n### \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 3\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n### \u0427\u0435\u0440\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0443\u0440\u043e\u0432\u0435\u043d\u044c 3\n[hr]\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam elit lorem, eleifend auctor posuere eget, placerat quis augue. Nunc vitae dui nec lectus eleifend elementum. Duis iaculis quam quis mi ullamcorper, eget consequat felis finibus. Phasellus scelerisque lacus egestas, fermentum purus sit amet, mattis neque. Fusce non lorem malesuada, feugiat urna id, molestie diam. Vestibulum a turpis quis nulla pharetra posuere eu ac elit. Sed vitae felis venenatis, tempor magna at, efficitur ipsum.\n```\n[/spoiler_block]\n[/spoiler_block]\n[spoiler_block=\u0411\u0411\u041a\u043e\u0434\u044b \u0428\u0438\u043a\u0438 is-fullwidth]\n\u0410\u043d\u0438\u043c\u0435 \u0441 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c [anime=1 cowboy-bebop] `[anime=1]`\n\u0410\u043d\u0438\u043c\u0435 \u0441 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043d\u0430\u0432\u0437\u0430\u043d\u0438\u0435\u043c [anime=1 cowboy-bebop]Anime name[/anime] `[anime=1]\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435[/anime]`\n\u0410\u043d\u0438\u043c\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0435 \u0432 \u0431\u0430\u0437\u0435 \u0441\u0430\u0439\u0442\u0430 [anime=99999999] `[anime=99999999]`\n\n\u041c\u0430\u043d\u0433\u0430 [manga=1 monster] `[manga=1]`\n\u0420\u0430\u043d\u043e\u0431\u044d [ranobe=9115 ookami-to-koushinryou] `[ranobe=9115]`\n\n\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436 [character=2515 pico] `[character=2515]`\n\u0427\u0435\u043b\u043e\u0432\u0435\u043a [person=47918 miho-okasaki] `[person=47918]`\n\n[entry=314310;453102]\n[topic=314310;453102]\n[comment=6104628;602162]\n[message=1278854609]\n\n[topic=99999999999]\n[topic=99999999999]missing topic[/topic]\n[comment=99999999999]\n[message=99999999999]\n[/spoiler_block]\n\n\n[spoiler_block=\u0411\u0430\u0437\u043e\u0432\u044b\u0435 \u0441\u0442\u0438\u043b\u0438 is-fullwidth]\nB[b]old tex[/b]t\nI[i]talic tex[/i]t\nU[u]nderlined tex[/u]t\nS[s]triked tex[/s]t\nInline c`ode tex`t\nInline s||poiler tex||t    `||spoiler content||`\nC[color=red]olored tex[/color]t   `[color=red]...[/color]`\ns[size=18]ized tex[/size]t   `[size=18]...[/size]`\nL[url=https://github.com/shikimori/shiki-editor]ink tex[/url]t\n[/spoiler_block]\n\n\n[spoiler_block=\u0421\u043f\u043e\u0439\u043b\u0435\u0440\u044b is-fullwidth]\n### \u0411\u043b\u043e\u0447\u043d\u044b\u0439 \u0441\u043f\u043e\u0439\u043b\u0435\u0440\n[spoiler=spoiler block with label]\nspoiler `content`\n[/spoiler]\n[spoiler]\nspoiler content\n[/spoiler]\n\n### \u0418\u043d\u043b\u0430\u0439\u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u043e\u0439\u043b\u0435\u0440\n||Inline spoiler text||    `||spoiler content||`\n[/spoiler_block]\n\n# Smileys\n[hr]\n:) :shock:\n\n# Images\n[hr]\nImage\n[img no-zoom 225x317]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img]     [img no-zoom width=200]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img]     [img]https://kawai.shikimori.one/system/animes/original/38481.jpg?1592053805[/img] [img]https://kawai.shikimori.one/system/users/x160/1.png?1591612283[/img]\nPoster\n[poster]https://www.ljmu.ac.uk/~/media/ljmu/news/starsedit.jpg[/poster]\n\n# Divs and Spans\n[hr]\n[div=b-link_button]\n`[div=b-link_button]...[/div]`\n[/div]\n\n`[div=fc-2][div=f-column][/div][div=f-column][/div][/div]`\n\n[div=fc-2]\n[div=f-column]\n`[div=f-column]`\n[/div]\n[div=f-column]\n`[div=f-column]`\n[/div]\n[/div]\n\n[hr]\n\n[right]`[right]...[/right]`[/right]\n[center]`[center]...[/center]`[/center]\n\ndiv [div=b-link_button]inline divs are not parsed by editor[/div] div\nInstead use `[span]` bbcode [span=b-anime_status_tag anons]as inline element[/span]\n```\nInstead use `[span]` bbcode [span=b-anime_status_tag anons]as inline element[/span]\n```\n\n# Quotes and Lists\n[hr]\n### Bullet list\n- Bullet List\n- def\n\n### Quote\n> Quote\n> > nope\n> yes\n\n### Bullet and Quote combined\n> - `quoted` list\n- > list `quoted`\n\n### Old Quote\n[quote]Old style quote support[/quote]\n[quote=zxc]Old style quote with nickname[/quote]\n[quote=c1246;1945;Silentium\xb0]Old style quote with user[/quote]\n\n[spoiler_block=\u041a\u043e\u0434 is-fullwidth]\n### \u0411\u043b\u043e\u0447\u043d\u044b\u0439 \u043a\u043e\u0434\n```\ncode block\n```\n```css\n.css /* code block */ { color: red; }\n```\n\n### \u0418\u043d\u043b\u0430\u0439\u043d\u043e\u0432\u044b\u0439 \u043a\u043e\u0434\n`inlinde code` made by text wrapped in `` `quotes` ``\n\n### \u0420\u0430\u0437\u043d\u043e\u0435\n[div=cc-4]\n[div=c-column m0]\nbefore\n\n```\n123\n456\n```\n\nafter\n[/div]\n[div=c-column m0]\nbefore\n```\n123\n456\n```\n[/div]\n[div=c-column m0]\n```\n123\n456\n```\nafter\n[/div]\n[div=c-column m0]\nbefore\n```\n123\n456\n```\nafter\n[/div]\n[/div]\n[div=cc-4]\n[div=c-column m0]\n> ```\n> 123\n> 456\n> ```\n\n> before\n> ```\n> 123\n> 456\n> ```\n\n> ```\n> 123\n> 456\n> ```\n> after\n\n> before\n> ```\n> 123\n> 456\n> ```\n> after\n[/div]\n[div=c-column m0]\n- ```\n  123\n  456\n  ```\n\n- before\n  ```\n  123\n  456\n  ```\n\n- ```\n  123\n  456\n  ```\n  after\n\n- before\n  ```\n  123\n  456\n  ```\n  after\n[/div]\n[div=c-column m0]\n> - ```\n>   123\n>   456\n>   ```\n\n> - before\n>   ```\n>   123\n>   456\n>   ```\n\n> - ```\n>   123\n>   456\n>   ```\n>   after\n\n> - before\n>   ```\n>   123\n>   456\n>   ```\n>   after\n\n> - before\n>   ```\n>   123\n>   456\n>   ```\n>   - after\n[/div]\n[div=c-column m0]\n> - ```\n>   123\n>   456\n>   ```\n> after\n\n> - before\n>   ```\n>   123\n>   456\n>   ```\n> after\n\n> ```\n> 123\n> 456\n> ```\n> after\n\n> ```\n> 123\n> 456\n> ```\n> > after\n\n> > ```\n> > 123\n> > 456\n> > ```\n> after\n[/div]\n[/div]\n[/spoiler_block]\n\n# Videos\n[hr]\n[video]https://www.youtube.com/watch?v=0d4rPwIpzNw[/video] [video]https://www.youtube.com/watch?v=00000000000[/video] [video]https://www.youtube.com/watch?v=JyTvVtUr_2g&t=762s[/video] [video]http://video.sibnet.ru/video1234982-03__Poverivshiy_v_grezyi[/video] [video]https://video.sibnet.ru/video305613-SouL_Eater__AMW/[/video] [video]http://vimeo.com/426453510[/video] [video]https://vk.com/video-186803452_456239969[/video] [video]http://vk.com/video98023184_165811692[/video] [video]https://coub.com/view/1itox4[/video] [video]https://ok.ru/video/2444260543117[/video]\n".trim()}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-tests/momentjs.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./app/packs/javascripts/utils/dayjs.js");pageLoad("tests_momentjs",(function(){var n=window.MOMENT_DIFF;e(".date").html(new Date),e(".dayjs").html(Object(t.default)().format()),e(".dayjs_diff").html(n),e(".server_time").html(Object(t.default)(e(document.body).data("server-time")).format());var r=e(".test1");r.html(Object(t.default)(r.data("datetime")).fromNow());var i=e(".test2");i.html(Object(t.default)(i.data("datetime")).add(n).fromNow());var o=e(".test3");o.html(Object(t.default)(o.data("datetime")).subtract(n).fromNow());var a=e(".test4");a.html(Object(t.default)(a.data("datetime")).fromNow());var s=e(".test5");s.html(Object(t.default)(s.data("datetime")).add(n).fromNow());var c=e(".test6");c.html(Object(t.default)(c.data("datetime")).subtract(n).fromNow())}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-tests/news.js":function(e,t){pageLoad("tests_news",(function(){})),pageUnload("tests_news",(function(){}))},"./app/packs/javascripts/pages/p-tests/show.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}pageLoad("tests_show",o(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))))},"./app/packs/javascripts/pages/p-tests/vue.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/regenerator/index.js");function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}pageLoad("tests_vue",o(r.mark((function e(){var t,i,o,a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 2:return t=e.sent,i=t.createApp,e.next=6,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e(9)]).then(n.bind(null,"./app/packs/javascripts/vue/components/tests/test.vue"));case 6:o=e.sent,a=o.default,i(a).mount("#vue_app");case 9:case"end":return e.stop()}}),e)}))))},"./app/packs/javascripts/pages/p-topics/_critique_form.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("topics_new",(function(){var t=e(".new-critique-form");if(t.length){var n=e("#topic_linked",t),i=e("#topic_linked_id",t),a=e("#topic_linked_type",t),c=e(".b-link_button",t);e(".topic-linked .remove",t).on("click",(function(){return c.removeAttr("href").addClass("disabled")})),n.on("autocomplete:success",s(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()();case 2:c.attr("href",c.data("url_template").replace("/animes/","/".concat(a.val().toLowerCase(),"s/")).replace("ranobes","ranobe").replace(/TARGET_ID/g,i.val()).replace(/TARGET_TYPE/g,a.val())).removeClass("disabled");case 3:case"end":return e.stop()}}),e)}))))}}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-topics/_extended_form.js":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"initForm",(function(){return l})),n.d(t,"initWall",(function(){return p})),n.d(t,"initVideo",(function(){return v})),n.d(t,"initTagsApp",(function(){return y}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./app/packs/javascripts/utils/axios.js"),s=n("./app/packs/javascripts/views/wall/view.js");function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function l(t,n,r,i){n.on("submit",(function(){var r=e(".attachments-submit-container",n).empty();e(".b-dropzone a",n).map((function(t,n){return e(n).attr("id")})).each((function(e,n){return r.append("<input type='hidden' name='".concat(t,"[wall_ids][]' value=\"").concat(n,'" />'))}));var o=i.data("video_id");o&&r.append("<input type='hidden' name='".concat(t,"[video_id]' value=\"").concat(o,'" />'))}))}function p(e,t){return d.apply(this,arguments)}function d(){return(d=u(o.a.mark((function t(i,a){var s,c,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"./app/packs/javascripts/views/file_uploader.js"));case 2:if(s=t.sent,c=s.FileUploader,(u=e(".topic-posters .b-dropzone",i)).length){t.next=7;break}return t.abrupt("return",null);case 7:return new c(u[0]).on("upload:file:success",(function(t,n){var r=n.response,i=e("<a href='".concat(r.url,"' rel='new-wall' class='b-image b-link' id='").concat(r.id,"'><img src='").concat(r.preview,"' class=''> <div class='mobile-edit'></div><div class='controls'> <div class='delete'></div><div class='confirm'></div><div class='cancel'></div></div></a>")).appendTo(a);e(".confirm",i).on("click",(function(e){e.preventDefault(),f(i,a)}))})).on("upload:complete",(function(){return h(a)})),e(".b-image .confirm",u).on("click",(function(t){t.preventDefault(),f(e(t.target).closest(".b-image").remove(),a)})),t.abrupt("return",{destroy:function(){r&&(r.$node.find(".c-video.b-video").remove(),r=null)}});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(e,t){e.remove(),h(t)}function h(e){e.find("img").css({width:"",height:""}),r=new s.a(e)}function v(t,n,r){var i=e(".topic-video",n);i.data("video_id")&&m({video_id:i.data("video_id"),content:i.data("content")},i,r);var o=e(".form",i),s=e(".attach",o);return s.on("click",(function(){var n=s.data("url").replace("ANIME_ID",0),c={video:{url:e("#".concat(t,"_video_url"),o).val(),kind:e("#".concat(t,"_video_kind"),o).val(),name:e("#".concat(t,"_video_name"),o).val()}};i.addClass("b-ajax"),a.a.post(n,c).then((function(e){return m(e.data,i,r)}))})),i}function m(t,n,r){var i=e(".form",n),o=e(".remove",n),a=e(".errors",n);if(n.removeClass("b-ajax"),t.errors)a.show().html(t.errors.join(", "));else{a.hide(),n.data({video_id:t.video_id}),i.hide(),o.removeClass("hidden");var s=e(t.content).prependTo(r);h(r),o.one("click",(function(e){e.preventDefault(),n.data({video_id:null}),i.show(),o.addClass("hidden"),f(s,r)}))}}function y(e){return _.apply(this,arguments)}function _(){return(_=u(o.a.mark((function t(r){var i,a,s,c,u,l,p,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e("#".concat(r,"_tags")).length){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.e("vendors_async-vue~shiki-editor~vuex").then(n.bind(null,"./node_modules/vue/dist/vue.runtime.esm-bundler.js"));case 4:return i=t.sent,a=i.createApp,s=i.h,t.next=9,Promise.all([n.e("vendors_async-vue~shiki-editor~vuex"),n.e("vendors_async-vue-tags-input.js"),n.e(8)]).then(n.bind(null,"./app/packs/javascripts/vue/components/tags_input.vue"));case 9:c=t.sent,u=c.default,l=e("#vue_tags_input"),p=e(".b-input.".concat(r,"_tags")),d=l[0].outerHTML,p.hide(),a({beforeUnmount:function(){p.show(),e(this.$el).replaceWith(d)},render:function(){return s(u,{label:p.find("label").text(),hint:p.find(".hint").html(),input:p.find("input")[0],value:l.data("value"),autocompleteBasic:l.data("autocomplete_basic"),autocompleteOther:l.data("autocomplete_other")||[],tagsLimit:3,isDowncase:!0})}}).mount("#vue_tags_input");case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-topics/_form.js":function(e,t,n){"use strict";n.r(t),function(e){var t,r,i=n("./app/packs/javascripts/pages/p-topics/_extended_form.js"),o=".topic-linked select.type";pageUnload("topics_new","topics_edit","topics_create","topics_update",(function(){t&&(t.$destroy(),t=null),r&&(r.destroy(),r=null)})),pageLoad("topics_new","topics_edit","topics_create","topics_update",(function(){var n=e(".b-form.edit_topic, .b-form.new_topic, .new-critique-form"),a=n.find(".b-shiki_wall"),s=Object(i.initVideo)("topic",n,a);Object(i.initWall)(n,a).then((function(e){return r=e})),Object(i.initTagsApp)("topic").then((function(e){return t=e})),Object(i.initForm)("topic",n,a,s);var c=e("#topic_linked",n),u=e("#topic_linked_type",n),l=e(".topic-link",n),p=e("#topic_linked_type").val()||e("option",o).val(),d=!1;e(o).on("change",(function(e){var t=e.currentTarget.value,n=t.toLowerCase();u.val(t),c.data("autocomplete",c.data("".concat(n,"-autocomplete"))).attr("placeholder",c.data("".concat(n,"-placeholder"))).trigger("flushCache"),d&&c.focus()})).val(p).trigger("change"),d=!0,e("#topic_forum_id",n).trigger("change"),e(".topic-linked .remove",n).on("click",(function(t){t.preventDefault(),l.find("a").remove(),e("#topic_linked_id",n).val(""),e("#topic_linked",n).val(""),c.show(),e(o).show(),l.hide()})),c.completable().on("autocomplete:success",(function(t,r){var i=t.currentTarget,a="".concat(u.val().toLowerCase(),"s").replace("ranobes","ranobe");i.value="",e("#topic_linked_id",n).val(r.id),e("#topic_linked_type",n).val(u.val()),l.find("a").remove(),l.prepend("\n        <a href='/".concat(a,"/").concat(r.id,"' class='bubbled b-link'>\n          ").concat(r.name,"\n        </a>\n      ")),l.process(),c.hide(),e(o).hide(),e(".topic-link",n).show()})).on("keypress",(function(e){10!==e.keyCode&&13!==e.keyCode||e.preventDefault()}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-topics/index.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i);function a(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("topics_index","topics_show","topics_new","topics_edit","topics_create","topics_update",s(r.a.mark((function t(){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e(".reload").on("click",function(){var e=s(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.currentTarget).classList.add("active"),e.next=4,o()(750);case 4:n.classList.remove("active");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!e(".b-animes-menu").exists()){t.next=7;break}return t.next=4,n.e("db_entries_menu").then(n.bind(null,"./app/packs/javascripts/views/db_entries/menu.js"));case 4:i=t.sent,new(0,i.AnimesMenu)(".b-animes-menu");case 7:case"end":return t.stop()}}),t)})))),pageLoad("topics_index",(function(){var t=e("form.edit_user_preferences");t.on("change","input",(function(){return t.submit()})).on("ajax:before",(function(){e(".ajax-loading",t).show(),e(".reload",t).hide()})).on("ajax:complete",(function(){e(".ajax-loading",t).hide(),e(".reload",t).show()}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-topics/show.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./app/packs/javascripts/utils/load_image.js");function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}pageLoad("critiques_show",a(r.a.mark((function t(){var n,o,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e(".body-inner .critique-stars")).length){t.next=9;break}if((o=e(".body-inner .b-poster").first()).length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(i.b)(o[0]);case 7:(a=o.offset())&&a.top-(n.offset().top+n.outerHeight())<15&&o.addClass("critique-poster");case 9:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-translations.js":function(e,t,n){(function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js");function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}pageLoad("translations_show",i(t.mark((function r(){var i;return t.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(3).then(n.t.bind(null,"./node_modules/packery/js/packery.js",7));case 2:i=t.sent,new(0,i.default)(e(".translations")[0],{itemSelector:".animes"});case 5:case"end":return t.stop()}}),r)}))))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-user_rates/index.js":function(e,t,n){"use strict";n.r(t),function(e,t){var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=n("./node_modules/turbolinks/dist/turbolinks.js"),c=n.n(s),u=n("./node_modules/shiki-utils/index.js"),l=n("./app/packs/javascripts/utils/tooltip_options.js"),d=n("./app/packs/javascripts/utils/axios.js"),f=n("./app/packs/javascripts/utils/animated.js"),h=n("./app/packs/javascripts/views/application/shiki_modal.js"),v=n("./app/packs/javascripts/views/animes/catalog_filters.js");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}var g=[],b=null;function j(){clearInterval(b),b=null;var t=e(".b-collection_search input").val().toLowerCase();g.forEach((function(e){for(var n=!1,r=0;r<e.entries.length;){var i=e.entries[r];-1!==i.target_name.indexOf(t)||-1!==i.target_russian.indexOf(t)||-1!==i.text.indexOf(t)?(n=!0,""!==i.display&&(i.display="",i.node.style.display="")):"none"!==i.display&&(i.display="none",i.node.style.display="none"),r+=1}e.toggable&&(e.$container.toggle(n),e.$nothingFound.toggle(!n))})),e.force_appear()}function w(){g=e(".list-lines, .list-posters").toArray().map((function(t){var n=e(t),r=n.next(".nothing-found"),i=n.find(".user_rate").toArray().map((function(t){var n=e(t);return{node:t,target_id:n.data("target_id"),target_name:String(n.data("target_name")).toLowerCase(),target_russian:String(n.data("target_russian")).toLowerCase(),text:String(n.data("text")||"").toLowerCase(),display:t.style.display}}));return{$container:n,$nothingFound:r,entries:i,toggable:!n.next(".b-postloader").length}}))}function k(n){e(".b-postloader",n).on("postloader:before",x),e(".l-content").on("postloader:success",O),e("tr.editable",n).on("click",(function(t){var n=e(t.currentTarget).next();n.is(".edit-form")&&(t.stopImmediatePropagation(),n.find(".cancel").click())})),e("tr.editable",n).on("ajax:success",(function(n,r){var o=n.currentTarget,s=e("tr.edit-form"),c=e(o),l=e("<tr class='edit-form'>\n      <td colspan='".concat(e(o).children("td").length,"'>").concat(r,"</td>\n    </tr>")).insertAfter(o),d=l.find("form");Object(f.b)(d[0]),s.exists()&&Object(f.a)(s.find("form")[0]).then((function(){return s.remove()})),e(".cancel",l).on("click",_(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)(d[0]);case 2:l.remove();case 3:case"end":return e.stop()}}),e)})))),d.on("ajax:before",(function(){return d.addClass("b-ajax")})),d.on("ajax:success",(function(n,r){if(u.flash.notice(t.t("frontend.pages.p_user_rates.changes_saved")),e(".cancel",l).click(),e(".current-value[data-field=score]",c).html(String(r.score||"0").replace(/^0$/,"\u2013")),e(".current-value[data-field=chapters]",c).html(r.chapters),e(".current-value[data-field=volumes]",c).html(r.volumes),e(".current-value[data-field=episodes]",c).html(r.episodes),e(".rate-text",c).html(r.text_html?"<div>".concat(r.text_html,"</div>"):"").process(),r.rewatches>0){var i=r.rewatches,o="Anime"===r.target_type?"rewatch":"reread",a=p(i,t.t("frontend.pages.p_user_rates.".concat(o,".one")),t.t("frontend.pages.p_user_rates.".concat(o,".few")),t.t("frontend.pages.p_user_rates.".concat(o,".many")));e(".rewatches",c).html("".concat(i," ").concat(a))}else e(".rewatches",c).html("");return P(r)})),e(".remove",d).on("ajax:success",function(){var t=_(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.stopPropagation(),e(".cancel",l).click(),t.next=4,a()(250);case 4:c.remove();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),e("tr.unprocessed",n).removeClass("unprocessed").find("a.tooltipped").tooltip(Object.add(l.b,{offset:[-95,10],position:"bottom right",opacity:1})),e(".list-lines .hoverable").off().off().hover((function(n){var r=n.currentTarget;if(!Object(u.isMobile)()){var o=e(".current-value",r),a=e(".new-value",r);if(!a.length){var s=parseInt(o.text(),10);s||0===s||(s=0);var c="score"!==o.data("field")?'<span class="new-value"><input type="text" class="input"/><span class="item-add"></span></span>':'<span class="new-value"><input type="text" class="input"/></span>';(function(n){e("input",n).off().on("blur",(function(n){var r=n.currentTarget,i=e(r);if(i.parent().parent().trigger("mouseleave"),r.value<0&&(r.value=0),(parseInt(r.value,10)||0)!==(parseInt(i.data("counter"),10)||0)){var o=i.parent().parent().find(".current-value"),a=o.html();i.data("counter",r.value),o.html("0"===i.data("counter")?"&ndash;":i.data("counter")),d.a.patch(i.data("action"),{user_rate:m({},i.data("field"),r.value)}).catch((function(){o.html(a),u.flash.error(t.t("frontend.pages.p_user_rates.error_occurred"))}))}})).on("mousewheel",(function(t){var n=t.currentTarget,r=e(n);r.is(":focus")&&(t.preventDefault(),t.originalEvent.wheelDelta&&t.originalEvent.wheelDelta>0?n.value=Math.min(parseInt(n.value,10)+1||0,parseInt(r.data("max"),10)):t.originalEvent.wheelDelta&&(n.value=Math.max(parseInt(n.value,10)-1||0,parseInt(r.data("min"),10))))})).on("keydown",(function(t){var n=t.currentTarget,r=t.keyCode,i=n,o=e(i);38===r&&(i.value=Math.min(parseInt(i.value,10)+1||0,parseInt(o.data("max"),10))),40===r&&(i.value=Math.max(parseInt(i.value,10)-1||0,parseInt(o.data("min"),10))),27===r&&(i.value=o.data("counter"),o.blur())})).on("keypress",(function(t){13===t.keyCode&&(e(t.currentTarget).blur(),t.stopPropagation())})),e(".item-add",n).on("click",function(){var t=_(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e(n.currentTarget).prev(),n.stopPropagation(),n.preventDefault(),r.val(parseInt(r.val(),10)+1).blur(),r.closest("td").trigger("mouseover");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})(a=e(c).children("input").val(s).data({counter:s,max:o.data("max")||9999,min:o.data("min")}).data({field:o.data("field"),action:o.closest("tr").data("rate_url")}).parent().insertAfter(o))}a.show(),o.hide(),e(".misc-value",r).hide()}}),(function(t){var n=t.currentTarget;Object(u.isMobile)()||e(".new-value input",n).is(":focus")||(e(".new-value",n).hide(),e(".current-value",n).show(),e(".misc-value",n).show())})).on("click",(function(t){Object(u.isMobile)()||t.target&&"item-add"===t.target.className||(e(t.currentTarget).trigger("mouseenter"),e("input",t.currentTarget).focus().select(),t.stopPropagation(),t.preventDefault())}))}function x(t,n){var r=n.find("header:first"),i=e("header.".concat(r.attr("class")));if(i.exists()){var o=r.next().children();o.detach().process().appendTo(i.next()),k(o),r.next().remove(),r.remove()}k(n)}function O(){w(),Object.isEmpty(e(".b-collection_search input").val())||j(),e.force_appear()}function P(e){g.forEach((function(t){var n=t.entries.find((function(t){return t.target_id===e.target_id}));n&&(n.text=e.text)}))}pageLoad("user_rates_index",(function(){k(e(".l-content")),w(),e("#scores, #types, #ratings").empty().bar({noData:function(e){var n=t.t("frontend.pages.p_user_rates.insufficient_data");e.html("<p class='b-nothing_here'>".concat(n,"</p>"))}}),e(".b-collection_search input").on("focus",(function(){g.length||w()})),e(".b-collection_search input").on("focus",(function(){return e(".collapsed").each((function(t,n){"block"===n.style.display&&e(n).trigger("click")}))})),e(".b-collection_search input").on("keyup",(function(e){var t=e.keyCode;91!==t&&18!==t&&16!==t&&17!==t&&(b&&(clearInterval(b),b=null),b=setInterval(j,350))})),e(".order-control").on("click",(function(t){var n=t.currentTarget,r=e(n);if(r.hasClass("active"))e(".order-by-ranked").trigger("click");else{var i=r.data("order");e(".orders.anime-params li[data-field='order-by'][data-value='".concat(i,"']")).trigger("click")}})),e(".list-groups").on("ajax:before",".edit-user_rate",(function(t){var n=t.currentTarget;e(n).closest(".user_rate").addClass("b-ajax")})),e(".list-groups").on("ajax:success",".edit-user_rate",(function(t,n){var r=t.currentTarget,i=e(r).closest(".user_rate");i.removeClass("b-ajax");var o=e(n).process(),a=new h.a(o);e(".remove",o).on("ajax:success",(function(e){e.stopImmediatePropagation(),i.remove(),a.close()})),o.on("ajax:success",(function(e,t){i.children(".text").html(t&&t.text_html?t.text_html:"").process().toggleClass("hidden",Object.isEmpty(t.text_html)),P(t),a.close()}))}));var n=document.location.pathname.replace(/(\/list\/(?:anime|manga))(\/.+)?/,"$1");new v.a(n,document.location.href,(function(t){c.a.visit(t,!0),e(".l-page.menu-expanded").exists()&&e(document).one("page:change",(function(){return e(".l-page").addClass("menu-expanded")}))}))}))}.call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/pages/p-userlist_comparer.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./app/packs/javascripts/views/search/collection.js"),r=n("./app/packs/javascripts/utils/tooltip_options.js");function i(){e("tr.unprocessed").removeClass("unprocessed").find("a.tooltipped").tooltip(Object.add(r.b,{offset:[-95,10],position:"bottom right",opacity:1}))}pageLoad("userlist_comparer_show",(function(){new t.a(".b-collection_search"),e(".l-content").on("ajax:success",i),i()}))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/pages/p-users/similar.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(t),i=n("./node_modules/delay/index.js"),o=n.n(i),a=n("./node_modules/turbolinks/dist/turbolinks.js"),s=n.n(a);function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}window.Turbolinks=s.a,pageLoad("users_similar",u(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e("p.pending").exists()){t.next=5;break}return n=document.location.href,t.next=4,o()(5e3);case 4:n===document.location.href&&window.location.reload();case 5:case"end":return t.stop()}}),t)}))))}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/achievements_notifier.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./app/packs/javascripts/utils/jst.js"),a=n("./node_modules/delay/index.js"),s=n.n(a);function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=null,this.achievementsToNotify=[],e(document).on("faye:achievements",(function(e,t){return n.notify(t.achievements)}))}var n,r,a;return n=t,r=[{key:"notify",value:function(t){var n=this;t.length>7||t.forEach(function(){var t=u(i.a.mark((function t(r,o){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o>0)){t.next=3;break}return t.next=3,s()(750*o);case 3:return a=null,c=e(n._render(r)).addClass("appearing").appendTo(n._$container()).on("click",function(){var e=u(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("A"!==t.target.tagName){e.next=3;break}return e.abrupt("return");case 3:if(!c.hasClass("removing")){e.next=5;break}return e.abrupt("return");case 5:return c.addClass("removing"),e.next=8,s()(1e3);case 8:a&&c.remove();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("mouseover",(function(){a&&(clearTimeout(a),c.removeClass("removing"),a=null)})).on("mouseleave",(function(){a=setTimeout((function(){return c.click()}),5e3)})),t.next=7,s()();case 7:c.removeClass("appearing"),a=setTimeout((function(){return c.click()}),3e4);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"_$container",value:function(){return this.$container||(this.$container=e('<div class="b-achievements_notifier"></div>'),e(document.body).append(this.$container)),this.$container}},{key:"_render",value:function(e,t){return o.a["achievements/notifier"]({achievement:e,event:t})}}],r&&l(n.prototype,r),a&&l(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}()}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/ajax_cacher.js":function(e,t,n){"use strict";var r=n("./app/packs/javascripts/utils/axios.js"),i={},o=[];t.a={fetch:function(e){if(i[e])return i[e];var t=r.a.get(e).catch((function(t){var n=t.response;return delete i[e],{status:n.status,data:n.data}}));return i[e]=t,function(e,t){for(o.includes(e)&&(o=o.subtract(e)),o.push(e);!t&&o.length>300;){var n=o.shift();delete i[n]}}(e),t},reset:function(){i={}}}},"./app/packs/javascripts/services/comments/tracker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./app/packs/javascripts/utils/with.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(r.a)(this._selector(t),n).data("model",t)}var t,n,o;return t=e,(n=[{key:"_selector",value:function(e){return".b-comment#".concat(e.id)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"track",value:function(e,t){Object.isEmpty(null!=e?e.comments:void 0)||(e.comments.forEach((function(e){return new o(e,t)})),e.comments=null)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/comments_notifier.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/shiki-decorators/index.js"),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./app/packs/javascripts/utils/jst.js");function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f="div.b-appear_marker.active",h=".faye-loader",v=["turbolinks:load","faye:loaded","ajax:success","postloader:success","clickloaded:success"],m=(r=function(){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=null,this.currentCounter=0,this.maxTop=48,this.blockTop=0,e(document).on("turbolinks:before-cache",this._cleanup),e(document).on("appear",this._appear),e(document).on("faye:added",this._incrementCounter),e(document).on(v.join(" "),this._refresh),e(document).on("disappear",this._decrementCounter),e(document).on("reappear",this._incrementCounter),this._refresh(),e(window).scroll((function(){n.$container&&!n.isStickyMenu&&(n.scroll=e(window).scrollTop(),(n.scroll<=n.maxTop||n.scroll>n.maxTop&&0!==n.blockTop)&&n._move())}))}var n,r,i,a,s;return n=t,r=[{key:"_$container",value:function(){return this.$container||(this.$container=e(this._render()).appendTo(document.body).on("click",(function(){var t=e("".concat(f,", ").concat(h)).first(),n=t.closest("[data-appear_type]");e.scrollTo(n||t)})),this.scroll=e(window).scrollTop()),this.$container}},{key:"_render",value:function(){return u.a["comments/notifier"]()}},{key:"_cleanup",value:function(){this.$container&&(this.$container.remove(),this.$container=null)}},{key:"_refresh",value:(a=o.a.mark((function t(){var n,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c()();case 2:this.scroll=e(window).scrollTop(),this.isStickyMenu="sticky"===e(".l-top_menu-v2").css("position"),n=e(f),r=e(h),i=n.length,r.each((function(){var t;i+=(null===(t=e(this).data("ids"))||void 0===t?void 0:t.length)||0})),this._update(i);case 9:case"end":return t.stop()}}),t,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){l(i,n,r,o,s,"next",e)}function s(e){l(i,n,r,o,s,"throw",e)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"_update",value:function(e){this.currentCounter=e,e>0?this._$container().show().html(this.currentCounter):this.$container&&this._$container().hide()}},{key:"_appear",value:function(t,n,r){var i=n.filter("".concat(f,", ").concat(h)).not((function(){return e(this).data("disabled")}));this._update(this.currentCounter-i.length)}},{key:"_decrementCounter",value:function(e){var t=e.target;t.attributes["data-disabled"]&&"true"===t.attributes["data-disabled"].value||this._update(this.currentCounter-1)}},{key:"_incrementCounter",value:function(){this._update(this.currentCounter+1)}},{key:"_move",value:function(){this.blockTop=[0,this.maxTop-this.scroll].max(),this._$container().css({top:this.blockTop})}}],r&&p(n.prototype,r),i&&p(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),d(r.prototype,"_cleanup",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_cleanup"),r.prototype),d(r.prototype,"_refresh",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_refresh"),r.prototype),d(r.prototype,"_appear",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_appear"),r.prototype),d(r.prototype,"_decrementCounter",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_decrementCounter"),r.prototype),d(r.prototype,"_incrementCounter",[a.a],Object.getOwnPropertyDescriptor(r.prototype,"_incrementCounter"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/faye_loader.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r,i=n("./node_modules/shiki-decorators/index.js"),o=n("./node_modules/faye/src/faye_browser.js"),a=n.n(o),s=n("./node_modules/js-cookie/dist/js.cookie.js"),c=n.n(s),u=n("./node_modules/@morr/user-idle/index.js");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var d=["turbolinks:load","ajax:success","postloader:success","clickloaded:success"],f=(r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=null,this.subscriptions={},this.apply(),e(document).on(d.join(" "),this.apply),Object(u.a)({onIdle:this._idleShutdown,onActive:this._idleRestore,idle:6e5}).start()}var n,r,i;return n=t,(r=[{key:"id",get:function(){var e,t;return null===(e=this.client)||void 0===e||null===(t=e._dispatcher)||void 0===t?void 0:t.clientId}},{key:"apply",value:function(){var t=e(".b-forum");t.length||(t=e("[data-faye]")),this.client||!t.length&&!window.FAYE_CHANNEL||this.connect();var n={};window.FAYE_CHANNEL&&(n[window.FAYE_CHANNEL]=e(document.body)),t.each((function(t,r){var i=e(r).data("faye");!1!==i&&Object.isEmpty(i)&&console.warn("no faye channels found for",r),i&&i.forEach((function(t){return n[t]=e(r)}))})),this.unsubscribe(n),this.update(n),this.subscribe(n)}},{key:"connect",value:function(){window.ENV,"development"===window.ENV?location.hostname:"faye.".concat(location.hostname),this.client=new a.a.Client(window.FAYE_URL,{timeout:300,retry:5}),c.a.get("faye-disable-websocket")&&this.client.disable("websocket")}},{key:"_disconnect",value:function(){this.client.disconnect(),this.client=null,this.subscriptions={}}},{key:"unsubscribe",value:function(e){var t=this,n=Object.keys(e);Object.keys(this.subscriptions).subtract(n).forEach((function(e){t.client.unsubscribe(e),delete t.subscriptions[e],console.log("faye unsubscribed ".concat(e))}))}},{key:"update",value:function(e){var t=this;Object.keys(e).intersect(Object.keys(this.subscriptions)).forEach((function(n){return t.subscriptions[n].node=e[n]}))}},{key:"subscribe",value:function(e){var t=this;Object.keys(e).subtract(Object.keys(this.subscriptions)).forEach((function(n){var r=t.client.subscribe(n,(function(e){console.log(["faye:received",n,e]),e.publisher_faye_id!==t.id&&t.subscriptions[n].node.trigger("faye:".concat(e.event),e)}));t.subscriptions[n]={node:e[n],channel:r},console.log("faye subscribed ".concat(n))}))}},{key:"_idleShutdown",value:function(){this.client&&(console.log("faye disconnect on idle"),this._disconnect())}},{key:"_idleRestore",value:function(){this.client||(console.log("faye connect on active"),this.connect(),this.apply())}}])&&l(n.prototype,r),i&&l(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),p(r.prototype,"apply",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"apply"),r.prototype),p(r.prototype,"_idleShutdown",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_idleShutdown"),r.prototype),p(r.prototype,"_idleRestore",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_idleRestore"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/global_handler.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r,i=n("./node_modules/shiki-decorators/index.js");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var s={enter:13,esc:27,slash:[47,191],up:38,down:40},c=[38,40,47,191];function u(e){return c.includes(e)?"keydown":"keyup"}var l=(r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}var n,r,i;return n=t,(r=[{key:"on",value:function(e,t){var n=this;"focus"===e?this._bind("focus",null,t):e.constructor===String?s[e].constructor===Array?s[e].forEach((function(e){return n._bind(null,e,t)})):this._bind(null,s[e],t):this._bind(null,e,t)}},{key:"off",value:function(e,t){var n=this;"focus"===e?this._unbind("focus",null,t):e.constructor===String?s[e].constructor===Array?s[e].forEach((function(e){return n._unbind(null,e,t)})):this._unbind(null,s[e],t):this._unbind(null,e,t)}},{key:"_onKeyup",value:function(e){this.events.keyup&&this.events.keyup[e.keyCode]&&this.events.keyup[e.keyCode].forEach((function(t){return t(e)}))}},{key:"_onKeydown",value:function(e){this.events.keydown&&this.events.keydown[e.keyCode]&&this.events.keydown[e.keyCode].forEach((function(t){return t(e)}))}},{key:"_onFocus",value:function(e){this.events.focus&&this.events.focus.null&&this.events.focus.null.forEach((function(t){return t(e)}))}},{key:"_bind",value:function(t,n,r){t||(t=u(n)),this.events[t]||("focus"===t?e(document.body).on(t,"*",this._handler(t)):e(document).on(t,this._handler(t)),Object.isEmpty(this.events)&&this._scheduleUnbind(),this.events[t]={}),this.events[t][n]||(this.events[t][n]=[]),this.events[t][n].push(r)}},{key:"_unbind",value:function(e,t,n){e||(e=u(t)),this.events[e]&&this.events[e][t]&&this.events[e][t].includes(n)&&(this.events[e][t].splice(this.events[e][t].indexOf(n),1),Object.isEmpty(this.events[e][t])&&delete this.events[e][t],Object.isEmpty(this.events[e])&&(this._unbindEvent(e),delete this.events[e]),Object.isEmpty(this.events)&&this._unScheduleUnbind())}},{key:"_unbindAll",value:function(){var e=this;Object.keys(this.events).forEach((function(t){return e._unbindEvent(t)})),this._unScheduleUnbind(),this.events={}}},{key:"_unbindEvent",value:function(t){"focus"===t?e(document.body).off(t,"*",this._handler(t)):e(document).off(t,this._handler(t))}},{key:"_handler",value:function(e){return this["_on".concat(e.capitalize())]}},{key:"_scheduleUnbind",value:function(){e(document).one("turbolinks:before-cache",this._unbindAll)}},{key:"_unScheduleUnbind",value:function(){e(document).off("turbolinks:before-cache",this._unbindAll)}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),a(r.prototype,"on",[i.b],Object.getOwnPropertyDescriptor(r.prototype,"on"),r.prototype),a(r.prototype,"off",[i.b],Object.getOwnPropertyDescriptor(r.prototype,"off"),r.prototype),a(r.prototype,"_onKeyup",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_onKeyup"),r.prototype),a(r.prototype,"_onKeydown",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_onKeydown"),r.prototype),a(r.prototype,"_onFocus",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_onFocus"),r.prototype),a(r.prototype,"_unbindAll",[i.a],Object.getOwnPropertyDescriptor(r.prototype,"_unbindAll"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/polls/tracker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("./app/packs/javascripts/utils/with.js"),i=n("./app/packs/javascripts/views/polls/view.js");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(r.a)(this._selector(t),n).data("model",t).each((function(e,n){return new i.a(n,t)}))}var t,n,a;return t=e,(n=[{key:"_selector",value:function(e){return".poll-placeholder#".concat(e.id)}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"track",value:function(e,t){Object.isEmpty(e)||Object.isEmpty(e.polls)||(e.polls.forEach((function(e){return new a(e,t)})),e.polls=null)}}],(n=null)&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/reviews/tracker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./app/packs/javascripts/utils/with.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(r.a)(this._selector(t),n).data("model",t)}var t,n,o;return t=e,(n=[{key:"_selector",value:function(e){return".b-review#".concat(e.id)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"track",value:function(e,t){Object.isEmpty(null!=e?e.reviews:void 0)||(e.reviews.forEach((function(e){return new o(e,t)})),e.reviews=null)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/topics/tracker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./app/packs/javascripts/utils/with.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object(r.a)(this._selector(t),n).data("model",t)}var t,n,o;return t=e,(n=[{key:"_selector",value:function(e){return".b-topic#".concat(e.id)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"track",value:function(e,t){Object.isEmpty(null!=e?e.topics:void 0)||(e.topics.forEach((function(e){return new o(e,t)})),e.topics=null)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/user_rates/track_catalog_entry.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./app/packs/javascripts/utils/with.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$node(t,n).data("model",t).addClass(t.status)}var t,n,o;return t=e,o=[{key:"selector",value:function(e){return".c-".concat(e.target_type.toLowerCase(),".entry-").concat(e.target_id)}}],(n=[{key:"_$node",value:function(e,t){return Object(r.a)(this.constructor.selector(e),t)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/user_rates/track_user_rate.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("./app/packs/javascripts/utils/with.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._$node(t,n).data("model",t)}var t,n,o;return t=e,o=[{key:"selector",value:function(e){return".b-user_rate.".concat(e.target_type.toLowerCase(),"-").concat(e.target_id)}}],(n=[{key:"_$node",value:function(e,t){return Object(r.a)(this.constructor.selector(e),t)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/user_rates/tracker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("./app/packs/javascripts/services/user_rates/track_catalog_entry.js"),i=n("./app/packs/javascripts/services/user_rates/track_user_rate.js"),o=n("./app/packs/javascripts/services/user_rates/update_catalog_entry.js"),a=n("./app/packs/javascripts/services/user_rates/update_user_rate.js");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,c;return t=e,c=[{key:"track",value:function(e,t){var n,o;Object.isEmpty(null===e||void 0===e?void 0:e.user_rates)||(null===(n=e.user_rates.catalog_entry)||void 0===n||n.forEach((function(e){return new r.a(e,t)})),null===(o=e.user_rates.user_rate)||void 0===o||o.forEach((function(e){return new i.a(e,t)})),e.user_rates=null)}},{key:"update",value:function(e){new o.a(e),new a.a(e)}}],(n=null)&&s(t.prototype,n),c&&s(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./app/packs/javascripts/services/user_rates/update_catalog_entry.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("./app/packs/javascripts/services/user_rates/track_catalog_entry.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=o((function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(r.a.selector(n)).each((function(t,r){var i=e(r),o=i.data("model");o&&i.removeClass(o.status),i.data("model",n),n.id&&i.addClass(n.status)}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/services/user_rates/update_user_rate.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("./app/packs/javascripts/services/user_rates/track_user_rate.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=o((function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(r.a.selector(n)).each((function(t,r){e(r).view().update(n)}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/templates sync recursive ^\\.\\/.*$":function(e,t,n){var r={"./achievements/notifier":"./app/packs/javascripts/templates/achievements/notifier.pug","./achievements/notifier.pug":"./app/packs/javascripts/templates/achievements/notifier.pug","./comments/notifier":"./app/packs/javascripts/templates/comments/notifier.pug","./comments/notifier.pug":"./app/packs/javascripts/templates/comments/notifier.pug","./images/image":"./app/packs/javascripts/templates/images/image.pug","./images/image.pug":"./app/packs/javascripts/templates/images/image.pug","./polls/poll":"./app/packs/javascripts/templates/polls/poll.pug","./polls/poll.pug":"./app/packs/javascripts/templates/polls/poll.pug","./search/nothing_found":"./app/packs/javascripts/templates/search/nothing_found.pug","./search/nothing_found.pug":"./app/packs/javascripts/templates/search/nothing_found.pug","./search/options":"./app/packs/javascripts/templates/search/options.pug","./search/options.pug":"./app/packs/javascripts/templates/search/options.pug","./user_rates/button":"./app/packs/javascripts/templates/user_rates/button.pug","./user_rates/button.pug":"./app/packs/javascripts/templates/user_rates/button.pug","./user_rates/extended":"./app/packs/javascripts/templates/user_rates/extended.pug","./user_rates/extended.pug":"./app/packs/javascripts/templates/user_rates/extended.pug","./user_rates/score":"./app/packs/javascripts/templates/user_rates/score.pug","./user_rates/score.pug":"./app/packs/javascripts/templates/user_rates/score.pug"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./app/packs/javascripts/templates sync recursive ^\\.\\/.*$"},"./app/packs/javascripts/templates/achievements/notifier.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t,o){i=i+"<div"+r.attr("class",r.classes(["achievement",t.event],[!1,!0]),!1,!0)+'>\x3c!-- es5 only in pug. also only one root node--\x3e<div class="content"><div class="title"><a'+r.attr("href",o.SHIKI_USER.url+"/achievements",!0,!0)+">"+r.escape(null==(n=e.t("frontend.achievements.title."+t.event))?"":n)+'</a></div><div class="name"><div class="icon"></div><a'+r.attr("href","/achievements/"+t.neko_id,!0,!0)+">"+r.escape(null==(n=t.label)?"":n)+"</a>",t.level&&(i=i+'<span class="level">\u0443\u0440. '+r.escape(null==(n=t.level)?"":n)+"</span>"),i=i+'</div></div><div class="image"><img'+r.attr("src",t.image,!0,!0)+"></div></div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"achievement"in o?o.achievement:"undefined"!==typeof achievement?achievement:void 0,"window"in o?o.window:"undefined"!==typeof window?window:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/comments/notifier.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n="",i=e||{};return function(e){n=n+'<div class="b-comments-notifier" style="display: none;"'+r.attr("title",e.t("frontend.lib.comments_notifier.number_of_unread_comments"),!0,!0)+">\x3c!-- es5 only in pug. also only one root node--\x3e</div>"}.call(this,"I18n"in i?i.I18n:"undefined"!==typeof t?t:void 0),n}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/images/image.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n="",i=e||{};return function(e,t,i,o){n=n+'<a class="b-image"'+r.attr("href",i.original_url,!0,!0)+r.attr("id",i.id,!0,!0)+r.attr("rel",o,!0,!0)+r.attr("data-user_id",i.user_id,!0,!0)+r.attr("data-tags",i.tags,!0,!0)+">\x3c!-- es5 only in pug. also only one root node--\x3e",t&&(n=n+'<div class="mobile-edit"></div><div class="controls"><div class="delete"'+r.attr("title",e.t("frontend.images.delete"),!0,!0)+'></div><div class="confirm"'+r.attr("title",e.t("frontend.images.confirm"),!0,!0)+r.attr("data-action",t,!0,!0)+' data-method="delete" data-remote="true" data-type="json"></div><div class="cancel"'+r.attr("title",e.t("frontend.images.cancel"),!0,!0)+"></div></div>"),n=n+"<img"+r.attr("src",i.preview_url,!0,!0)+"></a>"}.call(this,"I18n"in i?i.I18n:"undefined"!==typeof t?t:void 0,"destroy_url"in i?i.destroy_url:"undefined"!==typeof destroy_url?destroy_url:void 0,"image"in i?i.image:"undefined"!==typeof image?image:void 0,"rel"in i?i.rel:"undefined"!==typeof rel?rel:void 0),n}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/polls/poll.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t,o,a,s){i=i+'<div class="poll-outer">\x3c!-- es5 only in pug--\x3e<div'+r.attr("class",r.classes(["b-poll","is-"+s.width],[!1,!0]),!1,!0)+'><div class="poll"><div class="name">'+r.escape(null==(n=s.name)?"":n)+'</div><div class="text">'+(null==(n=s.text_html)?"":n)+'</div></div><div class="poll-variants">',function(){var e=s.variants;if("number"==typeof e.length)for(var c=0,u=e.length;c<u;c++){var l=e[c];a?i=i+'<div class="poll-variant pending"><label class="b-radio"><input'+r.attr("name","poll_"+s.id,!0,!0)+' type="radio"'+r.attr("value",l.id,!0,!0)+'><div class="radio-label">'+(null==(n=l.label_html)?"":n)+"</div></label></div>":(i=i+'<div class="poll-variant result"><div class="votes-total">'+r.escape(null==(n=l.votes_total)?"":n)+'</div><div class="votes-percent">'+r.escape(null==(n=o(l))?"":n)+"%</div><label>"+(null==(n=l.label_html)?"":n),s.vote&&s.vote.variant_id==l.id&&(i+='<div class="voted-for">\u2713</div>'),i=i+'</label><div class="bar simple horizontal"><div class="line"><div'+(r.attr("class",r.classes(["bar",t(l)],[!1,!0]),!1,!0)+r.attr("style",r.style("width: "+o(l)+"%"),!0,!0))+"></div></div></div></div>")}else{u=0;for(var c in e){u++;l=e[c];a?i=i+'<div class="poll-variant pending"><label class="b-radio"><input'+r.attr("name","poll_"+s.id,!0,!0)+' type="radio"'+r.attr("value",l.id,!0,!0)+'><div class="radio-label">'+(null==(n=l.label_html)?"":n)+"</div></label></div>":(i=i+'<div class="poll-variant result"><div class="votes-total">'+r.escape(null==(n=l.votes_total)?"":n)+'</div><div class="votes-percent">'+r.escape(null==(n=o(l))?"":n)+"%</div><label>"+(null==(n=l.label_html)?"":n),s.vote&&s.vote.variant_id==l.id&&(i+='<div class="voted-for">\u2713</div>'),i=i+'</label><div class="bar simple horizontal"><div class="line"><div'+(r.attr("class",r.classes(["bar",t(l)],[!1,!0]),!1,!0)+r.attr("style",r.style("width: "+o(l)+"%"),!0,!0))+"></div></div></div></div>")}}}.call(this),i+="</div>",a&&(i=i+'<div class="poll-actions"><div class="vote hidden">'+r.escape(null==(n=e.t("frontend.polls.vote"))?"":n)+'</div><div class="abstain hidden">'+r.escape(null==(n=e.t("frontend.polls.abstain"))?"":n)+"</div></div>"),i+="</div></div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"bar_class"in o?o.bar_class:"undefined"!==typeof bar_class?bar_class:void 0,"bar_percent"in o?o.bar_percent:"undefined"!==typeof bar_percent?bar_percent:void 0,"can_vote"in o?o.can_vote:"undefined"!==typeof can_vote?can_vote:void 0,"model"in o?o.model:"undefined"!==typeof model?model:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/search/nothing_found.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t){i+="<div>\x3c!-- es5 only in pug--\x3e",i=t?i+'<div class="nothing_found">'+r.escape(null==(n=e.t("frontend.search.nothing_found"))?"":n)+"</div>":i+'<div class="b-nothing_here">'+r.escape(null==(n=e.t("frontend.search.nothing_found"))?"":n)+"</div>",i+="</div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"isAutocomplete"in o?o.isAutocomplete:"undefined"!==typeof isAutocomplete?isAutocomplete:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/search/options.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t,o){i+="<div>\x3c!-- es5 only in pug. also only one root node--\x3e",o&&(i=i+"<div"+r.attr("class",r.classes(["search-mode","index"===t?"active":""],[!1,!0]),!1,!0)+' data-mode="index">'+r.escape(null==(n=e.t("frontend.search.mode.index"))?"":n)+"</div>"),function(){var o=["anime","manga","ranobe","character","person"];if("number"==typeof o.length)for(var a=0,s=o.length;a<s;a++){var c=o[a];i=i+"<div"+(r.attr("class",r.classes(["search-mode",t===c?"active":""],[!1,!0]),!1,!0)+r.attr("data-mode",c,!0,!0))+">"+r.escape(null==(n=e.t("frontend.search.mode."+c))?"":n)+"</div>"}else{s=0;for(var a in o){s++;c=o[a];i=i+"<div"+(r.attr("class",r.classes(["search-mode",t===c?"active":""],[!1,!0]),!1,!0)+r.attr("data-mode",c,!0,!0))+">"+r.escape(null==(n=e.t("frontend.search.mode."+c))?"":n)+"</div>"}}}.call(this),i+="</div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"currentMode"in o?o.currentMode:"undefined"!==typeof currentMode?currentMode:void 0,"hasIndex"in o?o.hasIndex:"undefined"!==typeof hasIndex?hasIndex:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/user_rates/button.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t,o,a,s,c,u,l){i=i+"<div>\x3c!-- es5 only in pug. also only one root node--\x3e<div"+r.attr("class",r.classes(["b-add_to_list",c.status],[!1,!0]),!1,!0)+"><form"+(r.attr("action",s,!0,!0)+r.attr("data-method",a,!0,!0))+' data-remote="true" data-type="json"><input type="hidden" name="frontend" value="1"><input type="hidden" name="user_rate[user_id]"'+r.attr("value",l,!0,!0)+'><input type="hidden" name="user_rate[target_id]"'+r.attr("value",c.target_id,!0,!0)+'><input type="hidden" name="user_rate[target_type]"'+r.attr("value",c.target_type,!0,!0)+'><input type="hidden" name="user_rate[status]"'+r.attr("value",c.status,!0,!0)+'><input type="hidden" name="user_rate[score]"'+r.attr("value",c.score,!0,!0)+'><div class="trigger"><div class="trigger-arrow"></div>',c.id?(i=i+'<div class="edit-trigger"><div class="edit"></div><div class="text"><span class="status-name"'+r.attr("data-text",u[c.status],!0,!0)+"></span>",c.score>0&&(i=i+"<span>&nbsp;&nbsp;&ndash;&nbsp;&nbsp;"+r.escape(null==(n=c.score)?"":n)+"</span>"),i+="</div></div>"):i=i+'<div class="text add-trigger"'+r.attr("data-status",c.status,!0,!0)+'><div class="plus"></div><span class="status-name"'+r.attr("data-text",e.t("frontend.user_rates.button.add_to_list"),!0,!0)+"></span></div>",i+='</div><div class="expanded-options">',function(){var e=u;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){var o=e[t];c.id&&c.status==t||(i=i+'<div class="option add-trigger"'+r.attr("data-status",t,!0,!0)+'><div class="text"><span class="status-name"'+r.attr("data-text",o,!0,!0)+"></span></div></div>")}else{n=0;for(var t in e){n++;o=e[t];c.id&&c.status==t||(i=i+'<div class="option add-trigger"'+r.attr("data-status",t,!0,!0)+'><div class="text"><span class="status-name"'+r.attr("data-text",o,!0,!0)+"></span></div></div>")}}}.call(this),c.id&&(i=i+'<div class="option remove-trigger"'+r.attr("data-action",t,!0,!0)+' data-method="delete" data-remote="true" data-type="json"'+r.attr("value",e.t("frontend.user_rates.button.remove_from_my_list"),!0,!0)+'><div class="text"><span class="status-name"'+r.attr("data-text",e.t("frontend.user_rates.button.remove_from_my_list"),!0,!0)+"></span></div></div>"),i=i+"</div></form></div>"+(null==(n=o)?"":n)+"</div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"destroy_url"in o?o.destroy_url:"undefined"!==typeof destroy_url?destroy_url:void 0,"extended_html"in o?o.extended_html:"undefined"!==typeof extended_html?extended_html:void 0,"form_method"in o?o.form_method:"undefined"!==typeof form_method?form_method:void 0,"form_url"in o?o.form_url:"undefined"!==typeof form_url?form_url:void 0,"model"in o?o.model:"undefined"!==typeof model?model:void 0,"statuses"in o?o.statuses:"undefined"!==typeof statuses?statuses:void 0,"user_id"in o?o.user_id:"undefined"!==typeof user_id?user_id:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/user_rates/extended.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t,o,a,s){i+='<div>\x3c!-- es5 only in pug. also only one root node--\x3e<div class="rate-show">',"Anime"==a.target_type?(i=i+'<div class="rate-number"><span class="current-episodes">'+r.escape(null==(n=a.episodes)?"":n)+"</span>",0!=t.episodes&&(i=i+'<span class="b-separator">/</span><span class="total-episodes">'+r.escape(null==(n=t.episodes)?"":n)+"</span>"),a.episodes==t.episodes&&0!=a.episodes||(i=i+'<span class="item-add increment"'+r.attr("data-action",o,!0,!0)+' data-method="post" data-remote="true" data-type="json"></span>'),i=i+'</div><div class="episodes">'+r.escape(null==(n=e.t("activerecord.attributes.user_rate.episodes"))?"":n)+"</div>"):0!=a.volumes?(i=i+'<div class="rate-number"><span class="current-episodes">'+r.escape(null==(n=a.volumes)?"":n)+"</span>",0!=t.volumes&&(i=i+'<span class="b-separator">/</span><span class="total-episodes">'+r.escape(null==(n=t.volumes)?"":n)+"</span>"),a.volumes==t.volumes&&0!=a.volumes||(i=i+'<span class="item-add increment"'+r.attr("data-action",o,!0,!0)+' data-remote="true" data-type="json" data-method="post"></span>'),i=i+'</div><div class="episodes">'+r.escape(null==(n=e.t("activerecord.attributes.user_rate.volumes"))?"":n)+"</div>"):(i=i+'<div class="rate-number"><span class="current-episodes">'+r.escape(null==(n=a.chapters)?"":n)+"</span>",0!=t.chapters&&(i=i+'<span class="b-separator">/</span><span class="total-episodes">'+r.escape(null==(n=t.chapters)?"":n)+"</span>"),a.chapters==t.chapters&&0!=a.chapters||(i=i+'<span class="item-add increment"'+r.attr("data-action",o,!0,!0)+' data-remote="true" data-type="json" data-method="post"></span>'),i=i+'</div><div class="episodes">'+r.escape(null==(n=e.t("activerecord.attributes.user_rate.chapters"))?"":n)+"</div>"),i+=null==(n=s)?"":n,a.text_html&&(i=i+'<div class="note">'+(null==(n=a.text_html)?"":n)+"</div>"),i+="</div></div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"entry"in o?o.entry:"undefined"!==typeof entry?entry:void 0,"increment_url"in o?o.increment_url:"undefined"!==typeof increment_url?increment_url:void 0,"model"in o?o.model:"undefined"!==typeof model?model:void 0,"rate_html"in o?o.rate_html:"undefined"!==typeof rate_html?rate_html:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/templates/user_rates/score.pug":function(e,t,n){(function(t){var r=n("./node_modules/pug-runtime/index.js");e.exports=function(e){var n,i="",o=e||{};return function(e,t){i=i+'<div class="b-rate rateable"'+r.attr("data-notices",e.t("activerecord.attributes.user_rate.scores"),!0,!0)+'>\x3c!-- es5 only in pug. also only one root node--\x3e<div class="stars-container"><div class="hoverable-trigger"></div><div'+r.attr("class",r.classes(["stars","score","score-"+t],[!1,!1,!0]),!1,!0)+'></div><div class="stars hover"></div><div class="stars background"></div></div><div class="text-score"><div'+r.attr("class",r.classes(["score-value","score-"+t],[!1,!0]),!1,!0)+">"+r.escape(null==(n=t)?"":n)+'</div><div class="score-notice">',i+=t>0?r.escape(null==(n=e.t("activerecord.attributes.user_rate.scores."+t))?"":n):"&nbsp;",i+="</div></div></div>"}.call(this,"I18n"in o?o.I18n:"undefined"!==typeof t?t:void 0,"score"in o?o.score:"undefined"!==typeof score?score:void 0),i}}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/turbolinks_before_cache.js":function(e,t,n){"use strict";(function(e){var t=n("./app/packs/javascripts/dynamic_elements/_parser.js");e(document).on("turbolinks:before-cache",(function(){e("html").attr("style",null),e(".tipsy").remove(),e("body > .tooltip").remove(),e("[data-dynamic]").each((function(t,n){var r=e(n).view();r&&r.destroy&&r.destroy()})).addClass(t.a.PENDING_CLASS);var n,r=e(document.body).data("js_export_supervisor_keys");Object.isEmpty(r)||(n={},r.forEach((function(t){var r=t.singularize();e("[data-track_".concat(r,"]")).each((function(i,o){var a=e(o),s=a.view()&&a.view().model||e(o).data("model");if(s)if("user_rate"===r){var c=e(o).data("track_".concat(r)).split(":")[0];if(!s.id)return;n[t]||(n[t]={}),n[t][c]||(n[t][c]=[]),n[t][c].push(s)}else n[t]||(n[t]=[]),n[t].push(s)}))})),e("script#js_export").html("window.JS_EXPORTS = ".concat(JSON.stringify(n),";"))),e(".b-video, .b-tooltipped, .b-spoiler, .b-image, .b-show_more").addClass("unprocessed"),e(".anime-tooltip-processed").removeClass("anime-tooltip-processed").addClass("anime-tooltip"),e(".bubbled-processed").removeClass("bubbled-processed").addClass("bubbled"),e(".b-height_shortener").each((function(t,n){e(n).prev().removeClass("b-height_shortened").css("height",""),e(n).remove()}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/turbolinks_load.js":function(e,t,n){"use strict";(function(e){var t=n("./node_modules/turbolinks/dist/turbolinks.js"),r=n.n(t),i=n("./node_modules/js-cookie/dist/js.cookie.js"),o=n.n(i),a=n("./node_modules/shiki-utils/index.js"),s=n("./app/packs/javascripts/utils/flash.js");e(document).on("turbolinks:load",(function(){window.flash=a.flash,e("p.flash-notice").each((function(e,t){t.innerHTML.length&&a.flash.notice(t.innerHTML)})),e("p.flash-alert").each((function(e,t){t.innerHTML.length&&a.flash.error(t.innerHTML)}));var t=Object(s.a)();t&&a.flash.notice(t),e(document.body).process(),e(".b-list_switchers .switcher").on("click",(function(t){var n=t.currentTarget;o.a.set(e(n).data("name"),e(n).data("value"),{expires:730,path:"/"}),r.a.visit(document.location.href)}))}))}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/utils/animated.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=0,c=function(){return s+=1};function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=350,h={};function v(e){e._SHIKI_ID||(e._SHIKI_ID=c());var t=!!h[e._SHIKI_ID];if(e.classList.contains("hidden")&&e.classList.remove("hidden"),t)w(e),h[e._SHIKI_ID]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h[e._SHIKI_ID]);else{var n=getComputedStyle(e),r=n.paddingTop,i=n.paddingBottom,o=n.marginTop,a=n.marginBottom;h[e._SHIKI_ID]={paddingTop:r,paddingBottom:i,marginTop:o,marginBottom:a,scrollHeight:"".concat(e.scrollHeight,"px")}}return h[e._SHIKI_ID].id=c(),h[e._SHIKI_ID].isInTransition=t,h[e._SHIKI_ID]}function m(e){var t=v(e);return e.style.willChange="height, padding-top, padding-bottom, margin-top, margin-bottom",e.classList.add("animated-collapse"),t.isInTransition?y(e,t):(e.style.height=t.scrollHeight,requestAnimationFrame((function(){return y(e,t)}))),a()(f)}function y(e,t){return _.apply(this,arguments)}function _(){return(_=l(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(r=h[t._SHIKI_ID])||void 0===r?void 0:r.id)===n.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a()(0);case 4:return t.style.height="0",t.style.paddingTop="0",t.style.paddingBottom="0",t.style.marginTop="0",t.style.marginBottom="0",e.next=11,a()(f);case 11:if((null===(o=h[t._SHIKI_ID])||void 0===o?void 0:o.id)===n.id){e.next=13;break}return e.abrupt("return");case 13:t.classList.add("hidden"),w(t),delete h[t._SHIKI_ID];case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=v(e);return e.style.height||(e.style.height="0"),e.style.paddingTop||(e.style.paddingTop="0"),e.style.paddingBottom||(e.style.paddingBottom="0"),e.style.marginTop||(e.style.marginTop="0"),e.style.marginBottom||(e.style.marginBottom="0"),t.isInTransition?(e.classList.add("animated-expand"),b(e,t)):(e.style.willChange="height, padding-top, padding-bottom, margin-top, margin-bottom",requestAnimationFrame((function(){var n;(null===(n=h[e._SHIKI_ID])||void 0===n?void 0:n.id)===t.id&&(e.classList.add("animated-expand"),requestAnimationFrame((function(){return b(e,t)})))}))),a()(f)}function b(e,t){return j.apply(this,arguments)}function j(){return(j=l(i.a.mark((function e(t,n){var r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(r=h[t._SHIKI_ID])||void 0===r?void 0:r.id)===n.id){e.next=2;break}return e.abrupt("return");case 2:return t.style.height=n.scrollHeight,t.style.paddingTop=n.paddingTop,t.style.paddingBottom=n.paddingBottom,t.style.marginTop=n.marginTop,t.style.marginBottom=n.marginBottom,e.next=9,a()(f);case 9:if((null===(o=h[t._SHIKI_ID])||void 0===o?void 0:o.id)===n.id){e.next=11;break}return e.abrupt("return");case 11:w(t),delete h[t._SHIKI_ID];case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){e.style.height="",e.style.paddingTop="",e.style.paddingBottom="",e.style.marginTop="",e.style.marginBottom="",e.style.willChange="",e.classList.contains("animated-collapse")?e.classList.remove("animated-collapse"):e.classList.remove("animated-expand")}},"./app/packs/javascripts/utils/axios.js":function(e,t,n){"use strict";var r=n("./node_modules/axios/index.js"),i=n.n(r),o=n("./app/packs/javascripts/utils/csrf.js");t.a=i.a.create({headers:Object.assign(Object(o.a)().headers,{"X-Requested-With":"XMLHttpRequest"})})},"./app/packs/javascripts/utils/bindings.js":function(e,t,n){"use strict";t.a={"turbolinks:load":[],"turbolinks:before-cache":[]}},"./app/packs/javascripts/utils/check_height.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return o}));var i=n("./app/packs/javascripts/utils/animated.js");function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxHeight:450,isNoShade:!1,collapsedHeight:null,placeholderHeight:0},o=e(t);if(o.hasClass("b-height_shortened"))return!1;if(o.height()<=n.maxHeight)return!1;var a=n.collapsedHeight||Math.round(2*n.maxHeight/3),s=n.isNoShade?"":"<div class='shade'></div>",c=n.placeholderHeight>0?'<div class="placeholder" style="height: '.concat(n.placeholderHeight,'px;"></div>'):"",u=null!=n.expandHtml?n.expandHtml:'<div class="expand">'.concat(c,"<span>")+"".concat(r.t("frontend.dynamic_elements.check_height.expand"),"</span></div>"),l=parseInt(o.css("margin-bottom")),p=l?' style="margin-bottom: '.concat(l,'px"'):"",d='<div class="b-height_shortener"'+"".concat(p,">").concat(s).concat(u,"</div>");return o.addClass("b-height_shortened").css({height:a}),e(d).insertAfter(o).on("click",(function(t){(null==u||u)&&(o.removeClass("b-height_shortened"),Object(i.b)(o[0]),e(t.currentTarget).remove())})),!0}}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/utils/csrf.js":function(e,t,n){"use strict";(function(e){t.a=function(){var t,n,r,i=e("meta[name=csrf-param]").attr("content"),o=e("meta[name=csrf-token]").attr("content");return{post:(r=o,(n=i)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),headers:{"X-CSRF-Token":o}}}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/utils/dayjs.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/dayjs/dayjs.min.js"),i=n.n(r),o=(n("./node_modules/dayjs/locale/ru.js"),n("./node_modules/dayjs/plugin/customParseFormat.js")),a=n.n(o),s=n("./node_modules/dayjs/plugin/localeData.js"),c=n.n(s),u=n("./node_modules/dayjs/plugin/localizedFormat.js"),l=n.n(u),p=n("./node_modules/dayjs/plugin/relativeTime.js"),d=n.n(p);i.a.extend(a.a),i.a.extend(c.a),i.a.extend(l.a),i.a.extend(d.a),t.default=i.a},"./app/packs/javascripts/utils/flash.js":function(e,t,n){"use strict";function r(e){"sessionStorage"in window&&sessionStorage.setItem("flashMessage",e)}function i(){if(!("sessionStorage"in window))return null;var e=sessionStorage.getItem("flashMessage");return sessionStorage.removeItem("flashMessage"),e}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},"./app/packs/javascripts/utils/get_selection.js":function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n("./app/packs/javascripts/utils/with.js");function i(){return"undefined"!==typeof window.getSelection}function o(){var t=a().replace(/<br.*?>/g,"<--BR--\x3e");return e("<div>".concat(t,"</div>")).text().replace(/<--BR-->/g,"\n").trim()}function a(){var t="";if(i()){var n=window.getSelection();if(n.rangeCount){for(var o=document.createElement("div"),a=0,s=n.rangeCount;a<s;a+=1)o.appendChild(n.getRangeAt(a).cloneContents());t=o.innerHTML}}else"undefined"!==typeof document.selection&&"Text"===document.selection.type&&(t=document.selection.createRange().htmlText);var c=e("<div>".concat(t,"</div>"));t.match(/<div class="body"/)&&(c=Object(r.a)("div.body",c));var u=document.body.getAttribute("data-localized_names"),l=document.body.getAttribute("data-localized_genres");return c.find("ru"===u?".name-en":".name-ru").remove(),c.find("ru"===l?".genre-en":".genre-ru").remove(),c.html()}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/utils/global_handler.js":function(e,t,n){"use strict";var r=new(n("./app/packs/javascripts/services/global_handler.js").a);window.globalHandler=r,t.a=r},"./app/packs/javascripts/utils/in_new_tab.js":function(e,t,n){"use strict";t.a=function(e){return 1===e.button||0===e.button&&(e.ctrlKey||e.metaKey)}},"./app/packs/javascripts/utils/jst.js":function(e,t,n){"use strict";var r=n("./app/packs/javascripts/templates sync recursive ^\\.\\/.*$");t.a=r.keys().reduce((function(e,t){return e[t.replace(/^\.\/|\.\w+$/g,"")]=r(t),e}),{})},"./app/packs/javascripts/utils/load_image.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("./node_modules/image-promise/index.js"),i=n("./node_modules/p-defer/index.js");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img";return e.constructor===String&&(e=document.querySelector(e)),Object(r.a)(e.querySelector(t))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"img";return e.constructor===String&&(e=document.querySelector(e)),Object(r.a)(e.querySelectorAll(t))}function s(){var e=Object(i.a)();return o.apply(void 0,arguments).catch((function(){return null})).finally((function(){return e.resolve()})),e.promise}function c(){var e=Object(i.a)();return a.apply(void 0,arguments).catch((function(){return null})).finally((function(){return e.resolve()})),e.promise}function u(){var e=Object(i.a)();return r.a.apply(void 0,arguments).catch((function(){return null})).finally((function(){return e.resolve()})),e.promise}},"./app/packs/javascripts/utils/p.js":function(e,t){window.p=function(e){var t=parseInt(e,10),n=t%10===1&&t%100!==11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;n=0===t?0:n;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i[n]}},"./app/packs/javascripts/utils/page_load.js":function(e,t,n){"use strict";var r=n("./app/packs/javascripts/utils/bindings.js");t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Math.max(t.length,1),o=t.slice(0,i-1),a=t[i-1];r.a["turbolinks:load"].push({conditions:o,callback:a})}},"./app/packs/javascripts/utils/page_unload.js":function(e,t,n){"use strict";var r=n("./app/packs/javascripts/utils/bindings.js");t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Math.max(t.length,1),o=t.slice(0,i-1),a=t[i-1];r.a["turbolinks:before-cache"].push({conditions:o,callback:a})}},"./app/packs/javascripts/utils/prevent_event.js":function(e,t,n){"use strict";function r(e){e.stopImmediatePropagation(),e.preventDefault()}n.d(t,"a",(function(){return r}))},"./app/packs/javascripts/utils/show_modal.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n("./node_modules/delay/index.js"),i=n.n(r),o=n("./node_modules/shiki-utils/index.js");function a(t){var n=t.$modal,r=t.$trigger,a=t.$outerNode,s=t.show,c=t.hide,u=t.onlyShow,l=t.isIgnored,p=t.isHidden,d=!1;function f(){return p?p():"none"===n.css("display")}function h(e){if("focus"===e.type||!l||!l())if("click"!==e.type){var t=f()||"focus"===e.type?"modal:show":"modal:hide";"modal:hide"===t&&u||d||(n.trigger(t),d=!0,i()().then((function(){return d=!1})))}else Object(o.isMobile)(!1)&&e.preventDefault()}function v(t){var r=t.target,i=e(r);!(r===(a||n)[0]||i.closest(a||n).length)&&i.parents("html").length&&n.trigger("modal:hide")}function m(e){27===e.keyCode&&n.trigger("modal:hide")}function y(){e(document.body).off("click",v),e(document.body).off("focus","*",v),e(document.body).off("keydown",m)}return r.constructor===String?e(document).on("mousedown focus click",r,h):r.on("mousedown focus click",h),n.on("modal:show",(function(){f()&&(s?s():n.show(),i()().then((function(){e(document.body).on("click",v),e(document.body).on("focus","*",v),e(document.body).on("keydown",m),e(document).one("turbolinks:before-cache",y)})))})).on("modal:hide",(function(){f()||(c?c():n.hide(),y(),r.is(":focus")&&r.blur())})),{$modal:n,$trigger:r,$outerNode:a,show:function(){n.trigger("modal:show")},hide:function(){n.trigger("modal:hide")},destroy:y}}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/utils/tooltip_options.js":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("./node_modules/tiny-uri/dist/tiny-uri.js");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={delay:150,predelay:250,position:"top right",defaultTemplate:"<div>   <div class='tooltip-inner'>     <div class='tooltip-arrow'></div>     <div class='clearfix'>       <div class='close'></div>       <div class='tooltip-details'>       <div class='ajax-loading' title='".concat(e.t("frontend.blocks.tooltip.loading"),"' />       </div>     </div>     <div class='dropshadow-top'></div>     <div class='dropshadow-top-right'></div>     <div class='dropshadow-right'></div>     <div class='dropshadow-bottom-right'></div>     <div class='dropshadow-bottom'></div>     <div class='dropshadow-bottom-left'></div>     <div class='dropshadow-left'></div>     <div class='dropshadow-top-left'></div>   </div> </div>"),onBeforeShow:function(){var e=this,t=this.getTrigger();t.find("[title]").attr({title:""});var n=this.getTip().find(".close");if(!n.data("binded")){n.data({binded:!0}).on("click",(function(){return e.hide()}));var r=(t.data("href")||t.attr("href")||"").replace(/\/tooltip/,"");r&&this.getTip().find(".link").attr({href:r}),r.match(/\/genres\//)&&this.getTip().find(".link").hide()}}},c=o(o({},s),{},{offset:[-4,10,-10],position:"top right",predelay:350,ignoreSelector:".text",onBeforeFetch:function(){var e=this.getTrigger(),t=e.find(".image-decor img");if(t.exists()&&t.width()>=110){var n=new r.a(e.data("tooltip_url")).query.set("minified","1").toString();e.data("tooltip_url",n),this.getTip().addClass("minified")}},onShow:function(){var e=this.getTip().position();e.top<20&&e.left<20&&this.getTip().remove()}})}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/utils/with.js":function(e,t,n){"use strict";t.a=function(e,t){var n=t.filter(e);return n.length?t.find(e).add(n):t.find(e)}},"./app/packs/javascripts/vendor sync ^\\.\\/.*$":function(e,t,n){var r={"./highcharts_colors":"./app/packs/javascripts/vendor/highcharts_colors.js","./highcharts_colors.js":"./app/packs/javascripts/vendor/highcharts_colors.js","./jquery.autocomplete":"./app/packs/javascripts/vendor/jquery.autocomplete.js","./jquery.autocomplete.js":"./app/packs/javascripts/vendor/jquery.autocomplete.js","./jquery.cacheimage":"./app/packs/javascripts/vendor/jquery.cacheimage.js","./jquery.cacheimage.js":"./app/packs/javascripts/vendor/jquery.cacheimage.js","./jquery.color":"./app/packs/javascripts/vendor/jquery.color.js","./jquery.color.js":"./app/packs/javascripts/vendor/jquery.color.js","./jquery.filedrop":"./app/packs/javascripts/vendor/jquery.filedrop.js","./jquery.filedrop.js":"./app/packs/javascripts/vendor/jquery.filedrop.js","./jquery.injectCSS":"./app/packs/javascripts/vendor/jquery.injectCSS.js","./jquery.injectCSS.js":"./app/packs/javascripts/vendor/jquery.injectCSS.js","./jquery.serialize-hash":"./app/packs/javascripts/vendor/jquery.serialize-hash.js","./jquery.serialize-hash.js":"./app/packs/javascripts/vendor/jquery.serialize-hash.js","./jquery.tipsy":"./app/packs/javascripts/vendor/jquery.tipsy.js","./jquery.tipsy.js":"./app/packs/javascripts/vendor/jquery.tipsy.js","./jquery.tools":"./app/packs/javascripts/vendor/jquery.tools.js","./jquery.tools.js":"./app/packs/javascripts/vendor/jquery.tools.js","./jquery.tooltip":"./app/packs/javascripts/vendor/jquery.tooltip.js","./jquery.tooltip.js":"./app/packs/javascripts/vendor/jquery.tooltip.js","./sugar":"./app/packs/javascripts/vendor/sugar.js","./sugar.js":"./app/packs/javascripts/vendor/sugar.js","./virous_mk_links_highlight":"./app/packs/javascripts/vendor/virous_mk_links_highlight.js","./virous_mk_links_highlight.js":"./app/packs/javascripts/vendor/virous_mk_links_highlight.js"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="./app/packs/javascripts/vendor sync ^\\.\\/.*$"},"./app/packs/javascripts/vendor/highcharts_colors.js":function(e,t,n){"use strict";n.r(t),n.d(t,"colors",(function(){return r}));var r=[].concat(["#44bbff","#c09eda","#9bd51f","#f7b42c","#f27490","#fc575e","#f27624","#90d5ec","#f49ac1","#ca5","#b5e4f2","#9ab"],["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])},"./app/packs/javascripts/vendor/jquery.autocomplete.js":function(e,t,n){(function(e){e.fn.extend({autocomplete:function(t,n){var r="string"==typeof t;return(n=e.extend({},e.Autocompleter.defaults,{url:r?t:null,data:r?null:t,delay:r?e.Autocompleter.defaults.delay:10,max:n&&!n.scroll?10:150},n)).highlight=n.highlight||function(e){return e},n.formatMatch=n.formatMatch||n.formatItem,this.each((function(){new e.Autocompleter(this,n)}))},result:function(e){return this.on("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,n){var r,i,o=38,a=40,s=46,c=13,u=27,l=188,p=33,d=34,f=8,h=e(t).attr("autocomplete","off").addClass(n.inputClass),v="",m=e.Autocompleter.Cache(n),y=0,_={mouseDownOnSelect:!1},g=e.Autocompleter.Select(n,t,b,_);function b(){var r=g.selected();if(!r)return h.trigger("result"),!1;var i=r.result;if(v=i,n.multiple){var o=w(h.val());if(o.length>1){var a,s=n.multipleSeparator.length,c=e(t).selection().start,u=0;e.each(o,(function(e,t){if(u+=t.length,c<=u)return a=e,!1;u+=s})),o[a]=i,i=o.join(n.multipleSeparator)}i+=n.multipleSeparator}return h.val(i),x(),h.trigger("result",[r]),!0}function j(e,t){if(P())if(i!=s){var r=encodeURIComponent(h.val().trim());(t||r!=v)&&(v=r,(r=k(r)).length>=n.minChars&&!r.match(/^https?(?::\/\/|%3A%2F%2F)/)?(h.addClass(n.loadingClass),n.matchCase||(r=r.toLowerCase()),C(r,O,x)):(q(),g.hide()))}else g.hide()}function w(t){return t?n.multiple?e.map(t.split(n.multipleSeparator),(function(n){return e.trim(t).length?e.trim(n):null})):[e.trim(t)]:[""]}function k(r){if(!n.multiple)return r;var i=w(r);if(1==i.length)return i[0];var o=e(t).selection().start;return(i=o==r.length?w(r):w(r.replace(r.substring(o),"")))[i.length-1]}function x(){g.visible();g.hide(),clearTimeout(r),q(),n.mustMatch&&h.search((function(e){if(!e)if(n.multiple){var t=w(h.val()).slice(0,-1);h.val(t.join(n.multipleSeparator)+(t.length?n.multipleSeparator:""))}else h.val(""),h.trigger("result",null)}))}function O(r,o){o&&o.length&&y?(q(),g.display(o,r),function(r,o){n.autoFill&&k(h.val()).toLowerCase()==r.toLowerCase()&&i!=f&&(h.val(h.val()+o.substring(k(v).length)),e(t).selection(v.length,v.length+o.length))}(r,o[0].value),g.show()):x()}function P(){return n.url.match(/^data-/)?h.data(n.url.replace(/^data-/,"")):n.url}function C(r,i,o){n.matchCase||(r=r.toLowerCase()),r=r.trim();var a=m.load(r);if(a&&a.length)i(r,a);else if("string"==typeof n.url&&n.url.length>0){var s={timestamp:+new Date};e.each(n.extraParams,(function(e,t){s[e]="function"==typeof t?t():t})),arguments.callee.$ajax&&arguments.callee.$ajax.abort(),arguments.callee.$ajax=e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:n.dataType,url:P().match(/\?/)?P()+"&search="+k(r):P()+"?search="+k(r),success:function(e){var t=n.parse&&n.parse(e)||$(e);m.add(r,t),i(r,t)}})}else g.emptyList(),o(r)}function $(t){for(var r=[],i=t.split("\n"),o=0;o<i.length;o++){var a=e.trim(i[o]);a&&(a=a.split("|"),r[r.length]={data:a,value:a[0],result:n.formatResult&&n.formatResult(a,a[0])||a[0]})}return r}function q(){h.removeClass(n.loadingClass)}h.on("keydown.autocomplete",(function(t){switch(y=1,i=t.keyCode,t.keyCode){case o:t.preventDefault(),g.visible()?g.prev():j(0,!0);break;case a:t.preventDefault(),g.visible()?g.next():j(0,!0);break;case p:t.preventDefault(),g.visible()?g.pageUp():j(0,!0);break;case d:t.preventDefault(),g.visible()?g.pageDown():j(0,!0);break;case n.multiple&&","==e.trim(n.multipleSeparator)&&l:case c:if(b())return t.preventDefault(),!0,!1;t.preventDefault();break;case u:g.hide();break;default:clearTimeout(r),r=setTimeout(j,n.delay)}})).focus((function(){y++})).blur((function(){y=0,_.mouseDownOnSelect||(clearTimeout(r),r=setTimeout(x,200))})).click((function(){y++>1&&!g.visible()&&j(0,!0)})).on("search",(function(){var t=arguments.length>1?arguments[1]:null;function n(e,n){var r;if(n&&n.length)for(var i=0;i<n.length;i++)if(n[i].result.toLowerCase()==e.toLowerCase()){r=n[i];break}"function"==typeof t?t(r):h.trigger("result",r&&[r.data,r.value])}e.each(w(h.val()),(function(e,t){C(t,n,n)}))})).on("flushCache",(function(){m.flush()})).on("setOptions",(function(){e.extend(n,arguments[1]),"data"in arguments[1]&&m.populate()})).on("unautocomplete",(function(){g.unbind(),h.off(),e(t.form).off(".autocomplete")}))},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){var n={},r=0;function i(e,n){t.matchCase||(e=e.toLowerCase());var r=e.indexOf(n);return"word"==t.matchContains&&(r=e.toLowerCase().search("\\b"+n.toLowerCase())),-1!=r&&(0==r||t.matchContains)}function o(e,i){r>t.cacheLength&&s(),n[e]||r++,n[e]=i}function a(){if(!t.data)return!1;var n={},r=0;t.url||(t.cacheLength=1),n[""]=[];for(var i=0,a=t.data.length;i<a;i++){var s=t.data[i];s="string"==typeof s?[s]:s;var c=t.formatMatch(s,i+1,t.data.length);if("undefined"!==typeof c&&!1!==c){var u=c.charAt(0).toLowerCase();n[u]||(n[u]=[]);var l={value:c,data:s,result:t.formatResult&&t.formatResult(s)||c};n[u].push(l),r++<t.max&&n[""].push(l)}}e.each(n,(function(e,n){t.cacheLength++,o(e,n)}))}function s(){n={},r=0}return setTimeout(a,25),{flush:s,add:o,populate:a,load:function(o){if(!t.cacheLength||!r)return null;if(!t.url&&t.matchContains){var a=[];for(var s in n)if(s.length>0){var c=n[s];e.each(c,(function(e,t){i(t.value,o)&&a.push(t)}))}return a}if(n[o])return n[o];if(t.matchSubset)for(var u=o.length-1;u>=t.minChars;u--){if(c=n[o.substr(0,u)]){a=[];return e.each(c,(function(e,t){i(t.value,o)&&(a[a.length]=t)})),a}}return null}}},e.Autocompleter.Select=function(t,n,r,i){var o,a,s,c,u="ac_over",l=-1,p="",d=!0;function f(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t||[]}function h(e){o.slice(l,l+1).removeClass(u),function(e){(l+=e)<0?l=o.length-1:l>=o.length&&(l=0)}(e);var n=o.slice(l,l+1).addClass(u);if(t.scroll){var r=0;o.slice(0,l).each((function(){r+=this.offsetHeight})),r+n[0].offsetHeight-c.scrollTop()>c[0].clientHeight?c.scrollTop(r+n[0].offsetHeight-c.innerHeight()):r<c.scrollTop()&&c.scrollTop(r)}}function v(){c.empty();for(var n,r=(n=a.length,t.max&&t.max<n?t.max:n),i=0;i<r;i++)if(a[i]){var s=t.formatItem(a[i],i+1,r);if(!1!==s){var d=e("<li/>").html(t.highlight(s,p)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(c)[0];e.data(d,"ac_data",a[i])}}o=c.find("li"),t.selectFirst&&(o.slice(0,1).addClass(u),l=0),e.fn.bgiframe&&c.bgiframe()}return{display:function(o,h){d&&(s=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute").appendTo(document.body),c=e("<ul/>").appendTo(s).mouseover((function(t){f(t).nodeName&&"LI"==f(t).nodeName.toUpperCase()&&(l=e("li",c).removeClass(u).index(f(t)),e(f(t)).addClass(u))})).click((function(t){return e(f(t)).addClass(u),r(),n.focus(),!1})).mousedown((function(){i.mouseDownOnSelect=!0})).mouseup((function(){i.mouseDownOnSelect=!1})),t.width>0&&s.css("width",t.width),d=!1),a=o,p=h,v()},next:function(){h(1)},prev:function(){h(-1)},pageUp:function(){h(0!=l&&l-8<0?-l:-8)},pageDown:function(){l!=o.length-1&&l+8>o.length?h(o.length-1-l):h(8)},hide:function(){s&&s.hide(),o&&o.removeClass(u),l=-1},visible:function(){return s&&s.is(":visible")},current:function(){return this.visible()&&(o.filter("."+u)[0]||t.selectFirst&&o[0])},show:function(){var r="$anchor"in t&&t.$anchor?t.$anchor.offset():e(n).offset();if(s.css({width:"string"==typeof t.width||t.width>0?t.width:e(n).width(),top:r.top+n.offsetHeight,left:r.left}).show(),t.scroll&&(c.scrollTop(0),c.css({maxHeight:t.scrollHeight,overflow:"auto"}),-1!=navigator.userAgent.indexOf("MSIE")&&"undefined"===typeof document.body.style.maxHeight)){var i=0;o.each((function(){i+=this.offsetHeight}));var a=i>t.scrollHeight;c.css("height",a?t.scrollHeight:i),a||o.width(c.width()-parseInt(o.css("padding-left"))-parseInt(o.css("padding-right")))}},selected:function(){var t=o&&o.filter("."+u).removeClass(u);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){c&&c.empty()},unbind:function(){s&&s.remove()}}},e.fn.selection=function(e,t){if(void 0!==e)return this.each((function(){if(this.createTextRange){var n=this.createTextRange();void 0===t||e==t?(n.move("character",e),n.select()):(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)}));var n=this[0];if(n.createTextRange){var r=document.selection.createRange(),i=n.value,o=r.text.length;r.text="<->";var a=n.value.indexOf("<->");return n.value=i,this.selection(a,a+o),{start:a,end:a+o}}return void 0!==n.selectionStart?{start:n.selectionStart,end:n.selectionEnd}:void 0}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.cacheimage.js":function(e,t,n){(function(e){var t;(t=e).extend(t,{cacheImage:function(e,n){if("object"!==typeof e){var r=new Image;return n=n||{},t.each(["load","error","abort"],(function(){var e=String(this);"function"===typeof n[e]&&t(r).bind(e,n[e]),"function"===typeof n.complete&&t(r).bind(e,n.complete)})),r.src=e,r}t.each(e,(function(){t.cacheImage(String(this),n)}))}}),t.extend(t.fn,{cacheImage:function(e){return this.each((function(){t.cacheImage(this.src,e)}))}})}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.color.js":function(e,t,n){(function(e){!function(e){function t(t){var r;return t&&t.constructor==Array&&3==t.length?t:(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]:(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(r[1]),2.55*parseFloat(r[2]),2.55*parseFloat(r[3])]:(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]:(r=/rgba\(0, 0, 0, 0\)/.exec(t))?n.transparent:n[e.trim(t).toLowerCase()]}e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],(function(n,r){e.fx.step[r]=function(n){n.colorInit||(n.start=function(n,r){var i;do{if(""!=(i=e.css(n,r))&&"transparent"!=i||e.nodeName(n,"body"))break;r="backgroundColor"}while(n=n.parentNode);return t(i)}(n.elem,r),n.end=t(n.end),n.colorInit=!0),n.elem.style[r]="rgb("+[Math.max(Math.min(parseInt(n.pos*(n.end[0]-n.start[0])+n.start[0]),255),0),Math.max(Math.min(parseInt(n.pos*(n.end[1]-n.start[1])+n.start[1]),255),0),Math.max(Math.min(parseInt(n.pos*(n.end[2]-n.start[2])+n.start[2]),255),0)].join(",")+")"}}));var n={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]}}(e)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.filedrop.js":function(e,t,n){(function(e){!function(t){e.event.addProp("dataTransfer");var n={fallback_id:"",url:"",refresh:1e3,paramname:"userfile",requestType:"POST",allowedfileextensions:[],allowedfiletypes:[],maxfiles:25,maxfilesize:1,queuefiles:0,queuewait:200,data:{},headers:{},drop:i,dragStart:i,dragEnter:i,dragOver:i,dragLeave:i,docEnter:i,docOver:i,docLeave:i,beforeEach:i,afterAll:i,rename:i,error:function(e,t,n,r){alert(e)},uploadStarted:i,uploadFinished:i,progressUpdated:i,globalProgressUpdated:i,speedUpdated:i},r=["BrowserNotSupported","TooManyFiles","FileTooLarge","FileTypeNotAllowed","NotFound","NotReadable","AbortError","ReadError","FileExtensionNotAllowed"];function i(){}t.fn.filedrop=function(i){var o,a,s=t.extend({},n,i),c=[],u=!1,l=0;function p(n,r,i,o){var a="--",c="\r\n",u="",l=s.paramname;if(s.data){var p=t.param(s.data).replace(/\+/g,"%20").split(/&/);t.each(p,(function(){var e=this.split("=",2),t=decodeURIComponent(e[0]),n=decodeURIComponent(e[1]);2===e.length&&(u+=a,u+=o,u+=c,u+='Content-Disposition: form-data; name="'+t+'"',u+=c,u+=c,u+=n,u+=c)}))}return e.isFunction(l)&&(l=l(n)),u+=a,u+=o,u+=c,u+='Content-Disposition: form-data; name="'+(l||"")+'"',u+='; filename="'+encodeURIComponent(n)+'"',u+=c,u+="Content-Type: "+i,u+=c,u+=c,u+=r,u+=c,u+=a,u+=o,u+=a,u+=c}function d(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);if(this.currentProgress!==t){this.currentProgress=t,s.progressUpdated(this.index,this.file,this.currentProgress),c[this.global_progress_index]=this.currentProgress,f();var n=(new Date).getTime(),r=n-this.currentStart;if(r>=s.refresh){var i=(e.loaded-this.startData)/r;s.speedUpdated(this.index,this.file,i),this.startData=e.loaded,this.currentStart=n}}}}function f(){if(0!==c.length){var e,t=0;for(e in c)c.hasOwnProperty(e)&&(t+=c[e]);s.globalProgressUpdated(Math.round(t/c.length))}}function h(){if(u=!1,!a)return s.error(r[0]),!1;if(s.allowedfiletypes.push&&s.allowedfiletypes.length)for(var n=a.length;n--;)if(!a[n].type||t.inArray(a[n].type,s.allowedfiletypes)<0)return s.error(r[3],a[n]),!1;if(s.allowedfileextensions.push&&s.allowedfileextensions.length)for(n=a.length;n--;){var i=!1;for(g=0;g<s.allowedfileextensions.length;g++)a[n].name.substr(a[n].name.length-s.allowedfileextensions[g].length).toLowerCase()==s.allowedfileextensions[g].toLowerCase()&&(i=!0);if(!i)return s.error(r[8],a[n]),!1}var o=0,h=0;if(l>s.maxfiles&&0===s.queuefiles)return s.error(r[1]),!1;for(var v=[],y=[],_=[],g=0;g<l;g++)v.push(g);var b=function(e){setTimeout(j,e)},j=function e(){var t,n;if(u)return!1;if(s.queuefiles>0&&y.length>=s.queuefiles)return b(s.queuewait);t=v[0],v.splice(0,1),y.push(t);try{if(!1!==(n=a[t],s.beforeEach(n))){if(t===l)return;var i=new FileReader,o=1048576*s.maxfilesize;if(i.index=t,a[t].size>o)throw r[2];i.onerror=function(e,t,n){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return s.error(r[4]),!1;case e.target.error.NOT_READABLE_ERR:return s.error(r[5]),!1;case e.target.error.ABORT_ERR:return s.error(r[6]),!1;default:return s.error(r[7]),!1}},i.onloadend=s.beforeSend?function(e){s.beforeSend(a[t],t,(function(){w(e)}))}:w,i.readAsDataURL(a[t])}else h++}catch(c){y.forEach((function(e,n){e===t&&y.splice(n,1)})),s.error(c)}v.length>0?e():y.length||m()},w=function(n){var r=(n.srcElement||n.target).index;void 0===n.target.index&&(n.target.index=function(e){for(var t=0;t<l;t++)if(a[t].size===e)return t;return}(n.total));var i,v,g=new XMLHttpRequest,b=g.upload,j=a[n.target.index],w=n.target.index,k=(new Date).getTime(),x="------multipartformboundary"+(new Date).getTime(),O=c.length,P=(v=j.name,s.rename(v)),C=j.type;s.withCredentials&&(g.withCredentials=s.withCredentials);var $=atob(n.target.result.split(",")[1]);i=p("string"===typeof P?P:j.name,$,C,x),b.index=w,b.file=j,b.downloadStartTime=k,b.currentStart=k,b.currentProgress=0,b.global_progress_index=O,b.startData=0,b.addEventListener("progress",d,!1),e.isFunction(s.url)?g.open(s.requestType,s.url(),!0):g.open(s.requestType,s.url,!0),g.setRequestHeader("content-type","multipart/form-data; boundary="+x),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(s.headers,(function(e,t){g.setRequestHeader(e,t)})),g._sendAsBinary||(g._sendAsBinary=function(e){var t=Array.prototype.map.call(e,(function(e){return 255&e.charCodeAt(0)})),n=new Uint8Array(t);this.send(n.buffer)}),g._sendAsBinary(i),c[O]=0,f(),s.uploadStarted(w,j,l),g.onload=function(){var t=null;if(g.responseText)try{t=e.parseJSON(g.responseText)}catch(n){t=g.responseText}var i=(new Date).getTime()-k,a=s.uploadFinished(w,j,t,i,g);o++,y.forEach((function(e,t){e===r&&y.splice(t,1)})),_.push(r),c[O]=100,f(),o===l-h&&m(),!1===a&&(u=!0),(g.status<200||g.status>299)&&s.error(g.statusText,j,r,g.status,g.responseText)}};j()}function v(e){if(e.dataTransfer&&e.dataTransfer.types&&e.dataTransfer.types.length)for(var t=0;t<e.dataTransfer.types.length;t++)if("files"==e.dataTransfer.types[t].toLowerCase())return!1;return!0}function m(){return s.afterAll()}return s.fallback_id&&t("#"+s.fallback_id).css({display:"none",width:0,height:0}),this.on("drop",(function(e,t){if(!1===s.drop.call(this,e))return!1;if(!t&&(!e.dataTransfer||v(e)))return void m();if(null===(a=t||e.dataTransfer.files)||void 0===a||0===a.length)return s.error(r[0]),m(),!1;return l=a.length,h(),e.preventDefault(),!1})).on("dragstart",s.dragStart).on("dragenter",(function(e){if(v(e))return;clearTimeout(o),e.preventDefault(),s.dragEnter.call(this,e)})).on("dragover",(function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(n){}if(e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",v(e))return;clearTimeout(o),e.preventDefault(),s.docOver.call(this,e),s.dragOver.call(this,e)})).on("dragleave",(function(e){clearTimeout(o),s.dragLeave.call(this,e),e.stopPropagation()})),t(document).on("drop",(function(e){if(v(e))return;return e.preventDefault(),s.docLeave.call(this,e),!1})).on("dragenter",(function(e){if(v(e))return;return clearTimeout(o),e.preventDefault(),s.docEnter.call(this,e),!1})).on("dragover",(function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(n){}if(e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",v(e))return;return clearTimeout(o),e.preventDefault(),s.docOver.call(this,e),!1})).on("dragleave",(function(e){o=setTimeout((t=this,function(){s.docLeave.call(t,e)}),200);var t})),s.fallback_id&&this.on("click",(function(e){t("#"+s.fallback_id).trigger(e)})),s.fallback_id&&t("#"+s.fallback_id).change((function(e){s.drop(e),a=e.target.files,l=a.length,h()})),this};try{if(XMLHttpRequest.prototype.sendAsBinary)return;XMLHttpRequest.prototype.sendAsBinary=function(e){var t=Array.prototype.map.call(e,(function(e){return 255&e.charCodeAt(0)})),n=new Uint8Array(t);"ArrayBufferView"in window?this.send(n):this.send(n.buffer)}}catch(o){}}(e)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.injectCSS.js":function(module,exports,__webpack_require__){(function(jQuery){(function(jQuery){"use strict";function toCSS(jss,options){function jsonToCSS(e,t){for(var n in e&&!result[e]&&(result[e]={}),t){var r=t[n];if(r instanceof Array)for(var i=r,o=0;o<i.length;o++)addProperty(e,n,i[o]);else switch(typeof r){case"number":case"string":addProperty(e,n,r);break;case"object":var a=n.charAt(n.length-1);if(!e||"_"!==a&&"-"!==a)jsonToCSS(makeSelectorName(e,n),r);else{var s=r;for(var c in s)for(var u=c.split(/\s*,\s*/),l=0;l<u.length;l++){var p=s[c];if(p instanceof Array)for(var d=p,f=0;f<d.length;f++)addProperty(e,n+u[l],d[f]);else addProperty(e,n+u[l],s[c])}}}}}function makePropertyName(e){return e.replace(/_/g,"-")}function makeSelectorName(e,t){for(var n=[],r=t.split(/\s*,\s*/),i=e.split(/\s*,\s*/),o=0;o<i.length;o++)for(var a=i[o],s=0;s<r.length;s++){var c=r[s];"&"===c.charAt(0)?n.push(a+c.substr(1)):n.push(a?a+" "+c:c)}return n.join(", ")}function addProperty(e,t,n){"number"!==typeof n||options.useRawValues||(n+="px");for(var r=t.split(/\s*,\s*/),i=0;i<r.length;i++){var o=makePropertyName(r[i]);result[e][o]?result[e][o].push(n):result[e][o]=[n]}}var result={};if("string"===typeof jss)try{eval("var jss = {"+jss+"}")}catch(e){return"/*\nUnable to parse JSS: "+e+"\n*/"}jsonToCSS("",jss);var ret="";for(var a in result){var css=result[a];for(var i in ret+=a+" {\n",css)for(var values=css[i],j=0;j<values.length;j++)ret+="\t"+i+": "+values[j]+";\n";ret+="}\n"}return ret}var defaults={truncateFirst:!1,container:null,containerName:"injectCSSContainer",useRawValues:!1};jQuery.injectCSS=function(e,t){(t=jQuery.extend({},defaults,t)).media=t.media||"all";var n=t.container&&jQuery(t.container)||jQuery("#"+t.containerName);n.length||(n=jQuery("<style></style>").appendTo("head").attr({media:t.media,id:t.containerName,type:"text/css"}));var r=n[0],i=void 0!==r.styleSheet&&void 0!==r.styleSheet.cssText,o="";return t.truncateFirst||(o+=i?r.styleSheet.cssText:n.text()),o+=toCSS(e,t),i?r.styleSheet.cssText=o:n.text(o),n}})(jQuery)}).call(this,__webpack_require__("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.serialize-hash.js":function(e,t,n){(function(e){var t;(t=e).fn.serializeHash=function(){var e={};function n(e,t){var r=e.lastIndexOf("[");if(-1==r){var i={};return i[e]=t,i}var o=e.substr(0,r),a={};return a[e.substring(r+1,e.length-1)]=t,n(o,a)}var r=t(this).find(":input").get();return t.each(r,(function(){if(this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/hidden|text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color/i.test(this.type))){var r=t(this).val();t.extend(!0,e,n(this.name,r))}})),e}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.tipsy.js":function(e,t,n){(function(e){!function(e,t,n){function r(e,t){return"function"===typeof e?e.call(t):e}function i(n){return e.contains(t.document.documentElement,n)}var o=0;function a(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}a.prototype={show:function(){var t,n,a=this;if(i(this.$element[0])&&(t=this.$element,(!("object"===typeof HTMLElement?t instanceof HTMLElement:t&&"object"===typeof t&&1===t.nodeType&&"string"===typeof t.nodeName)||this.$element.is(":visible"))&&this.enabled&&(n=this.getTitle()))){var s,c=this.tip(),u=c.find(".tipsy-inner"+this.options.theme);(null===(s=n)||void 0===s?void 0:s.constructor)===Promise?(u[this.options.html?"html":"text"]("\n                    <div class='b-ajax vk-like' style='margin: 8px 60px 15px' />\n                  "),n.then((function(e){a.options.title=function(){return e},a.show()}))):u[this.options.html?"html":"text"](n),c[0].className="tipsy"+this.options.theme,this.options.className&&c.addClass(r(this.options.className,this.$element[0])),c.detach().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(this.options.prependTo).data("tipsy-pointee",this.$element[0]);var l=e.extend({},this.$element.offset());l=this.$element.parents("svg").length>0?e.extend(l,this.$element[0].getBBox()):this.options.prependTo!==document.body?e.extend(this.$element.position(),{width:this.$element.width(),height:this.$element.height()}):e.extend(l,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var p,d=c[0].offsetWidth,f=c[0].offsetHeight,h=r(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":p={top:l.top+l.height+this.options.offset+1,left:l.left+l.width/2-d/2};break;case"s":p={top:l.top-f-this.options.offset-1,left:l.left+l.width/2-d/2};break;case"e":p={top:l.top+l.height/2-f/2,left:l.left-d-this.options.offset-1};break;case"w":p={top:l.top+l.height/2-f/2,left:l.left+l.width+this.options.offset+1}}if(2===h.length&&("w"===h.charAt(1)?p.left=l.left+l.width/2-15:p.left=l.left+l.width/2-d+15),c.css(p).addClass("tipsy-"+h+this.options.theme),c.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+h.charAt(0)+this.options.theme,this.options.fade?(this.options.shadow&&c.find(".tipsy-inner").css({"box-shadow":"0 0 "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0 0 "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeInTime)):c.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var v="tipsyuid"+o++;c.attr("id",v),this.$element.attr("aria-describedby",v)}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(this.options.fadeOutTime,(function(){e(this).detach()})):this.tip().detach(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!==typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t,n=this.$element,r=this.options;return this.fixTitle(),"string"===typeof r.title?t=n.attr("title"===r.title?"original-title":r.title):"function"===typeof r.title&&(t=r.title.call(n[0])),(null===(e=t)||void 0===e?void 0:e.constructor)!==Promise&&(t=(""+t).replace(/(^\s*|\s*$)/,"")),t||r.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip")),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){if(e.fn.tipsy.enable(),!0===t)return this.data("tipsy");if("string"===typeof t){var n=this.data("tipsy");return n&&n[t](),this}function r(n){var r=e.data(n,"tipsy");return r||(r=new a(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",r)),r}function i(){if(!0===e.fn.tipsy.enabled){var n=r(this);n.hoverState="in",0===t.delayIn?n.show():(n.fixTitle(),setTimeout((function(){"in"===n.hoverState&&n.show()}),t.delayIn))}}function o(){var e=r(this);e.hoverState="out",0===t.delayOut?e.hide():setTimeout((function(){"out"!==e.hoverState&&e.$element&&e.$element.is(":visible")||e.hide()}),t.delayOut)}if((t=e.extend({},e.fn.tipsy.defaults,t)).theme=t.theme&&""!==t.theme?"-"+t.theme:"",t.live||this.each((function(){r(this)})),"manual"!==t.trigger){var s="hover"===t.trigger?"mouseenter mouseover":"focus",c="hover"===t.trigger?"mouseleave mouseout":"blur";if(t.live&&!0!==t.live)e(this).on(s,t.live,i),e(this).on(c,t.live,o);else{if(t.live&&!e.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var u=t.live?"live":"bind";this[u](s,i)[u](c,o)}}return this},e.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fadeInTime:400,fadeOutTime:400,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:"",prependTo:document.body},e.fn.tipsy.revalidate=function(){e(".tipsy").each((function(){var t=e.data(this,"tipsy-pointee");t&&i(t)||e(this).remove()}))},e.fn.tipsy.enable=function(){e.fn.tipsy.enabled=!0},e.fn.tipsy.disable=function(){e.fn.tipsy.enabled=!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(t).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(t).width()/2?"e":"w"},e.fn.tipsy.autoNWNE=function(){return e(this).offset().left>e(document).scrollLeft()+e(t).width()/2?"ne":"nw"},e.fn.tipsy.autoSWSE=function(){return e(this).offset().left>e(document).scrollLeft()+e(t).width()/2?"se":"sw"},e.fn.tipsy.autoBounds=function(n,r,i){return function(){var o={ns:i[0],ew:i.length>1&&i[1]},a=e(document).scrollTop()+n,s=e(document).scrollLeft()+r,c=e(this);return c.offset().top<a&&(o.ns="n"),c.offset().left<s&&(o.ew="w"),e(t).width()+e(document).scrollLeft()-c.offset().left<r&&(o.ew="e"),e(t).height()+e(document).scrollTop()-c.offset().top<n&&(o.ns="s"),o.ns+(o.ew?o.ew:"")}},e.fn.tipsy.autoBounds2=function(n,r){return function(){var i={},o=e(document).scrollTop()+n,a=e(document).scrollLeft()+n,s=e(this);return r.length>1?(i.ns=r[0],i.ew=r[1]):"e"===r[0]||"w"===r[0]?i.ew=r[0]:i.ns=r[0],s.offset().top<o&&(i.ns="n"),s.offset().left<a&&(i.ew="w"),e(t).width()+e(document).scrollLeft()-(s.offset().left+s.width())<n&&(i.ew="e"),e(t).height()+e(document).scrollTop()-(s.offset().top+s.height())<n&&(i.ns="s"),i.ns?i.ns+(i.ew?i.ew:""):i.ew}}}(e,window)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.tools.js":function(e,t,n){(function(e){var t,n;!function(e){function t(t,n,r){var i=r.relative?t.position().top:t.offset().top,o=r.relative?t.position().left:t.offset().left,a=r.position[0];i-=n.outerHeight()-r.offset[0],o+=t.outerWidth()+r.offset[1],/iPad/i.test(navigator.userAgent)&&(i-=e(window).scrollTop());var s=n.outerHeight()+t.outerHeight();return"center"==a&&(i+=s/2),"bottom"==a&&(i+=s),a=r.position[1],t=n.outerWidth()+t.outerWidth(),"center"==a&&(o-=t/2),"left"==a&&(o-=t),{top:i,left:o}}function n(n,i){var o,a,s=this,c=n.add(s),u=0,l=0,p=n.attr("title"),d=n.attr("data-tooltip"),f=r[i.effect],h=n.is(":input"),v=h&&n.is(":checkbox, :radio, select, :button, :submit"),m=n.attr("type"),y=i.events[m]||i.events[h?v?"widget":"input":"def"];if(!f)throw'Nonexistent effect "'+i.effect+'"';if(2!=(y=y.split(/,\s*/)).length)throw"Tooltip: bad events configuration for "+m;n.bind(y[0],(function(e){clearTimeout(u),i.predelay?l=setTimeout((function(){s.show(e)}),i.predelay):s.show(e)})).bind(y[1],(function(e){clearTimeout(l),i.delay?u=setTimeout((function(){s.hide(e)}),i.delay):s.hide(e)})),p&&i.cancelDefault&&(n.removeAttr("title"),n.data("title",p)),e.extend(s,{show:function(r){if(!o&&(d?o=e(d):i.tip?o=e(i.tip).eq(0):p?o=e(i.layout).addClass(i.tipClass).appendTo(document.body).hide().append(p):(o=n.next()).length||(o=n.parent().next()),!o.length))throw"Cannot find tooltip for "+n;if(s.isShown())return s;o.stop(!0,!0);var h=t(n,o,i);return i.tip&&o.html(n.data("title")),(r=r||e.Event()).type="onBeforeShow",c.trigger(r,[h]),r.isDefaultPrevented()||(h=t(n,o,i),o.css({position:"absolute",top:h.top,left:h.left}),a=!0,f[0].call(s,(function(){r.type="onShow",a="full",c.trigger(r)})),h=i.events.tooltip.split(/,\s*/),o.data("__set")||(o.bind(h[0],(function(){clearTimeout(u),clearTimeout(l)})),h[1]&&!n.is("input:not(:checkbox, :radio), textarea")&&o.bind(h[1],(function(e){e.relatedTarget!=n[0]&&n.trigger(y[1].split(" ")[0])})),o.data("__set",!0))),s},hide:function(t){return o&&s.isShown()?((t=t||e.Event()).type="onBeforeHide",c.trigger(t),t.isDefaultPrevented()?void 0:(a=!1,r[i.effect][1].call(s,(function(){t.type="onHide",c.trigger(t)})),s)):s},isShown:function(e){return e?"full"==a:a},getConf:function(){return i},getTip:function(){return o},getTrigger:function(){return n}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),(function(t,n){e.isFunction(i[n])&&e(s).bind(n,i[n]),s[n]=function(t){return t&&e(s).bind(n,t),s}}))}e.tools=e.tools||{version:"1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,n){r[e]=[t,n]}};var r={toggle:[function(e){var t=this.getConf(),n=this.getTip();(t=t.opacity)<1&&n.css({opacity:t}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var r=this.data("tooltip");return r||("string"==typeof(t=e.extend(!0,{},e.tools.tooltip.conf,t)).position&&(t.position=t.position.split(/,?\s/)),this.each((function(){r=new n(e(this),t),e(this).data("tooltip",r)})),t.api?r:this)}}(e),function(e){var t=e.tools.tooltip;e.extend(t.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!1});var n={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};t.addEffect("slide",(function(e){var t=this.getConf(),r=this.getTip(),i=t.slideFade?{opacity:t.opacity}:{},o=n[t.direction]||n.up;i[o[1]]=o[0]+"="+t.slideOffset,t.slideFade&&r.css({opacity:0}),r.show().animate(i,t.slideInSpeed,e)}),(function(t){var r=this.getConf(),i=r.slideOffset,o=r.slideFade?{opacity:0}:{},a=n[r.direction]||n.up,s=""+a[0];r.bounce&&(s="+"==s?"-":"+"),o[a[1]]=s+"="+i,this.getTip().animate(o,r.slideOutSpeed,(function(){e(this).hide(),t.call()}))}))}(e),(n=(t=e).tools.tooltip).dynamic={conf:{classNames:"top right bottom left"}},t.fn.dynamic=function(e){"number"==typeof e&&(e={speed:e});var r,i=(e=t.extend({},n.dynamic.conf,e)).classNames.split(/\s/);return this.each((function(){var n=t(this).tooltip().onBeforeShow((function(n,o){n=this.getTip();var a=this.getConf();r||(r=[a.position[0],a.position[1],a.offset[0],a.offset[1],t.extend({},a)]),t.extend(a,r[4]),a.position=[r[0],r[1]],a.offset=[r[2],r[3]],n.css({visibility:"hidden",position:"absolute",top:o.top,left:o.left}).show(),o=function(e){var n=t(window),r=n.width()+n.scrollLeft(),i=n.height()+n.scrollTop();return[e.offset().top<=n.scrollTop(),r<=e.offset().left+e.width(),i<=e.offset().top+e.height(),n.scrollLeft()>=e.offset().left]}(n),function(e){for(var t=e.length;t--;)if(e[t])return!1;return!0}(o)||(o[2]&&(t.extend(a,e.top),a.position[0]="top",n.addClass(i[0])),o[3]&&(t.extend(a,e.right),a.position[1]="right",n.addClass(i[1])),o[0]&&(t.extend(a,e.bottom),a.position[0]="bottom",n.addClass(i[2])),o[1]&&(t.extend(a,e.left),a.position[1]="left",n.addClass(i[3])),(o[0]||o[2])&&(a.offset[0]*=-1),(o[1]||o[3])&&(a.offset[1]*=-1)),n.css({visibility:"visible"}).hide()}));n.onBeforeShow((function(){var e=this.getConf();this.getTip(),setTimeout((function(){e.position=[r[0],r[1]],e.offset=[r[2],r[3]]}),0)})),n.onHide((function(){this.getTip().removeClass(e.classNames)})),ret=n})),e.api?ret:this}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/jquery.tooltip.js":function(e,t,n){"use strict";n.r(t),function(e){var t=n("./node_modules/delay/index.js"),r=n.n(t),i=n("./node_modules/shiki-utils/index.js");!function(e){e.tools=e.tools||{version:"1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip",ignoreSelector:""},addEffect:function(e,n,r){t[e]=[n,r]}};var t={toggle:[function(e){var t=this.getConf(),n=this.getTip(),r=t.opacity;r<1&&n.css({opacity:r}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};function n(t,n,r,i){var o=void 0==t.data("relative")?r.relative:t.data("relative"),a=o?t.position().top:t.offset().top,s=o?t.position().left:t.offset().left,c=t.offset().left,u=t.offset().top,l=r.position[0];i||n.show(),n.removeClass("tooltip-bottom tooltip-center tooltip-moved"),a-=n.outerHeight()-r.offset[0]-(t.data("offset-top")||0),s+=t.outerWidth()+r.offset[1]-(t.data("offset-left")||0),c+=t.outerWidth()+r.offset[1],/iPad/i.test(navigator.userAgent)&&(a-=e(window).scrollTop());var p=n.outerHeight()+t.outerHeight();"center"==l&&(a+=p/2),"bottom"==l&&(a+=p),l=r.position[1];var d=n.outerWidth()+t.outerWidth();"center"==l&&(s-=d/2,c-=d/2),"left"==l&&(s-=d,c-=d);var f=n.find(".tooltip-arrow").outerWidth(),h=n.find(".tooltip-inner").outerWidth()+f,v=n.find(".tooltip-inner").outerHeight(),m=n.find(".dropshadow-left").outerWidth(),y=n.find(".dropshadow-top").outerHeight(),_=c+h+m-e(window).width();if(!t.data("no-align")&&(_>0||r.place_to_left||t.data("place-to-left"))){var g=s-(h+t.outerWidth()+f+2*(t.data("offset-left")||0)+(t.data("offset-left-right")||0));g>-(o?t.offset().left-t.position().left:0)||r.place_to_left||t.data("place-to-left")?(s=g+(r.offset[2]||0),n.addClass("tooltip-left")):-g<_?(s=0,n.addClass("tooltip-moved")):(s-=_+10,n.addClass("tooltip-moved"))}else n.removeClass("tooltip-left");var b=n.find(".tooltip-arrow");b.data("top")||b.data("top",parseInt(b.css("top"))),b.css("top",b.data("top"));var j=u+v+y-e(window).scrollTop()-e(window).height();if(!t.data("no-align")){var w=a;j>0&&!r.no_y_adjustment&&(a=[a-j+10,10].max()),w!=a&&b.css("top",b.data("top")+(w-a));var k=u-e(window).scrollTop();k<0&&(a=[a-k-10,10].max())}return r.moved&&n.addClass("tooltip-moved"),i||n.hide(),{top:a,left:s}}function o(o,a){var s,c,u=this,l=o.add(u),p=0,d=0,f=o.data("do-not-use-title")?null:o.attr("title"),h=o.attr("data-tooltip"),v=t[a.effect],m=o.is(":input"),y=m&&o.is(":checkbox, :radio, select, :button, :submit"),_=o.attr("type"),g=a.events[_]||a.events[m?y?"widget":"input":"def"];if(!v)throw'Nonexistent effect "'+a.effect+'"';if(2!=(g=g.split(/,\s*/)).length)throw"Tooltip: bad events configuration for "+_;o.on(g[0],(function(e){clearTimeout(d);var t=o.data("predelay")||a.predelay;t?d=setTimeout((function(){u.show(e)}),t):u.show(e)})).on(g[1],(function(e){clearTimeout(d);var t=o.data("delay")||a.delay;t?p=setTimeout((function(){u.hide(e)}),t):u.hide(e)})),a.ignoreSelector&&o.on("mouseover",a.ignoreSelector,(function(e){r()().then((function(){clearTimeout(d),u.hide(e)}))})).on("mouseout",a.ignoreSelector,(function(t){(t.target==o[0]||e(t.target).closest(o))&&o.trigger("mouseover",[{target:o[0]}])})),f&&a.cancelDefault&&(o.removeAttr("title"),o.data("title",f)),e.extend(u,{show:function(t){if(t.target.classList.contains("mobile")||!("ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||Object(i.isMobile)())){if(!s){if(h)s=e(h);else if(a.tip)s=e(a.tip).eq(0);else if((o.data("tooltip_url")||o.data("href")||o.attr("href"))&&!o.data("local-tooltip")){s=e(a.defaultTemplate).addClass(a.tipClass).css("z-index",parseInt(o.parents(".tooltip").css("z-index"))||1).hide(),o.data("insert-tooltip-after")?s.insertAfter(o):s.appendTo(document.body),(t=t||e.Event()).type="onBeforeFetch",l.trigger(t,[]);var f=o.data("tooltip_url")||o.data("href")||o.attr("href").replace(/(\?|$)/,"/tooltip$1");s.find(".tooltip-details").load(f,(function(){var t=e(this),i=t.find(".tooltip-desc");i.length&&""==i.html()&&t.find("img").length&&t.parents(".tooltip").addClass("tooltip-image"),t.process(),r()(50).then((function(){if("none"!=s.css("display")){var e=parseInt(s.css("top")),t=parseInt(s.css("left")),r=n(o,s,a,!0);(Math.abs(e-r.top)>20||Math.abs(t-r.left)>20)&&s.stop(!0,!0).css({top:r.top,left:r.left})}}))})),o.attr("data-remote",null),o.attr("tooltip",null)}else(s=o.next()).length||(s=o.parent().next());if(!s.length)throw"Cannot find tooltip for "+o}if(u.isShown())return u;s.stop(!0,!0);var m=n(o,s,a);a.tip&&s.html(o.data("title")),(t=t||e.Event()).type="onBeforeShow",l.trigger(t,[m]),m=n(o,s,a),s.css({position:"absolute",top:m.top,left:m.left}),c=!0,v[0].call(u,(function(){t.type="onShow",c="full",l.trigger(t)}));var y=a.events.tooltip.split(/,\s*/);return s.data("__set")||(s.on(y[0],(function(){clearTimeout(p),clearTimeout(d)})),y[1]&&!o.is("input:not(:checkbox, :radio), textarea")&&s.on(y[1],(function(e){e.relatedTarget!=o[0]&&o.trigger(g[1].split(" ")[0])})),s.data("__set",!0)),u}},hide:function(n){return s&&u.isShown()?((n=n||e.Event()).type="onBeforeHide",l.trigger(n),c=!1,t[a.effect][1].call(u,(function(){n.type="onHide",l.trigger(n)})),u):u},isShown:function(e){return e?"full"==c:c},getConf:function(){return a},getTip:function(){return s},getTrigger:function(){return o}}),e.each("onBeforeFetch,onHide,onBeforeShow,onShow,onBeforeHide".split(","),(function(t,n){e.isFunction(a[n])&&e(u).on(n,a[n]),u[n]=function(t){return t&&e(u).on(n,t),u}}))}e.fn.tooltip=function(t){var n=this.data("tooltip");return n||("string"==typeof(t=e.extend(!0,{},e.tools.tooltip.conf,t)).position&&(t.position=t.position.split(/,?\s/)),this.each((function(){n=new o(e(this),t),e(this).data("tooltip",n)})),t.api?n:this)}}(e)}.call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/vendor/sugar.js":function(e,t,n){(function(t){(function(){"use strict";var n,r="Sugar",i=!(!Object.defineProperty||!Object.defineProperties),o="undefined"!==typeof t&&t.Object===Object?t:this,a=e.exports,s=!1,c={},u={},l=i?Object.defineProperty:function(e,t,n){e[t]=n.value},p=_("Chainable");function d(e){var t="Object"===e,r=_(e);function i(e,t,n){P(r,e,(function(e,i,o){var a=h(e,i,o);return function(e,t,n,r,i){O(t,(function(t,o){var a,s=t;r&&(s=v(t)),i&&(s.flags=i),2&n&&!t.instance&&(a=function(e,t){return t?v(e,!0):function(e){switch(e.length){case 0:case 1:return function(){return e(this)};case 2:return function(t){return e(this,t)};case 3:return function(t,n){return e(this,t,n)};case 4:return function(t,n,r){return e(this,t,n,r)};case 5:return function(t,n,r,i){return e(this,t,n,r,i)}}}(e)}(t,r),P(s,"instance",a)),1&n&&P(s,"static",!0),y(e,o,s),e.active&&e.extend(o)}))}(r,a.methods,t,n,a.last),r}))}return i("defineStatic",1),i("defineInstance",2),i("defineInstanceAndStatic",3),i("defineStaticWithArguments",1,!0),i("defineInstanceWithArguments",2,!0),P(r,"defineStaticPolyfill",(function(t,n,i){var a=h(t,n,i);return m(o[e],a.methods,!0,a.last),r})),P(r,"defineInstancePolyfill",(function(t,n,i){var a=h(t,n,i);return m(o[e].prototype,a.methods,!0,a.last),O(a.methods,(function(e,t){g(r,t,e)})),r})),P(r,"alias",(function(e,t){var n="string"===typeof t?r[t]:t;return y(r,e,n),r})),P(r,"extend",(function(n){var i,a,c,u=o[e],l=u.prototype,p={},d={};function f(e,t){var r=n[e];if(r)for(var i,o=0;i=r[o];o++)if(i===t)return!0;return!1}function h(e,r,i){return!function(e,n){return t&&n===l&&(!s||"get"===e||"set"===e)}(e,i)&&!function(e,t,r){if(!t[e]||!r)return!1;for(var i=0;i<r.length;i++)if(!1===n[r[i]])return!0}(e,i,r.flags)&&!function(e){return f("except",e)}(e)}if(i=(n=n||{}).methods,!f("except",u)&&(c=u,!n[a="namespaces"]||f(a,c)))return t&&"boolean"===typeof n.objectPrototype&&(s=n.objectPrototype),O(i||r,(function(e,t){i&&(e=r[t=e]),$(e,"instance")&&h(t,e,l)&&(d[t]=e.instance),$(e,"static")&&h(t,e,u)&&(p[t]=e)})),m(u,p),m(l,d),i||P(r,"active",!0),r})),c[e]=r,u["[object "+e+"]"]=r,j(e),function(e){O(n.Object&&n.Object.prototype,(function(t,n){"function"===typeof t&&b(e,n,t)}))}(r),n[e]=r}function f(){return r}function h(e,t,n){var r,i;return"string"===typeof e?((r={})[e]=t,i=n):(r=e,i=t),{last:i,methods:r}}function v(e,t){var n=e.length-1-(t?1:0);return function(){var r,i=[],o=[];t&&i.push(this),r=Math.max(arguments.length,n);for(var a=0;a<r;a++)a<n?i.push(arguments[a]):o.push(arguments[a]);return i.push(o),e.apply(this,i)}}function m(e,t,n,r){O(t,(function(t,i){n&&!r&&e[i]||P(e,i,t)}))}function y(e,t,n){e[t]=n,n.instance&&g(e,t,n.instance)}function _(e){var t=function(e,n){if(!(this instanceof t))return new t(e,n);this.constructor!==t&&(e=this.constructor.apply(e,arguments)),this.raw=e};return P(t,"toString",(function(){return r+e})),P(t.prototype,"valueOf",(function(){return this.raw})),t}function g(e,t,r){var i,o,a,s=function(e){return function(){return new p(e.apply(this.raw,arguments))}}(r);o=(i=(a=p.prototype)[t])&&i!==Object.prototype[t],i&&i.disambiguate||(a[t]=o?function(e){var t=function(){var t,r=this.raw;return null!=r&&(t=u[C(r)]),t||(t=n.Object),new t(r)[e].apply(this,arguments)};return t.disambiguate=!0,t}(t):s),e.prototype[t]=s,e===n.Object&&function(e,t){O(c,(function(n){b(n,e,t)}))}(t,s)}function b(e,t,n){var r=e.prototype;$(r,t)||(r[t]=n)}function j(e,t){var n=c[e],r=o[e].prototype;!t&&w&&(t=w(r)),O(t,(function(e){if(!function(e){return"constructor"===e||"valueOf"===e||"__proto__"===e}(e)){try{var t=r[e];if("function"!==typeof t)return}catch(i){return}g(n,e,t)}}))}var w=Object.getOwnPropertyNames,k=Object.prototype.toString,x=Object.prototype.hasOwnProperty,O=function(e,t){for(var n in e)if($(e,n)&&!1===t.call(e,e[n],n,e))break};function P(e,t,n,r){l(e,t,{value:n,enumerable:!!r,configurable:!0,writable:!0})}function C(e){return k.call(e)}function $(e,t){return!!e&&x.call(e,t)}function q(e,t){if($(e,t))return e[t]}!function(){if(!(n=o.Sugar)){if(n=function(e){return O(n,(function(t,n){$(c,n)&&t.extend(e)})),n},a)e.exports=n;else try{o.Sugar=n}catch(t){}O("Object Number String Array Date RegExp Function".split(" "),(function(e){d(e)})),P(n,"extend",n),P(n,"toString",f),P(n,"createNamespace",d),P(n,"util",{hasOwn:$,getOwn:q,setProperty:P,classToString:C,defineProperty:l,forEachProperty:O,mapNativeToChainable:j})}}();var S,E,T,R,I,A,D,L,H,z,M,N="enhance",B="Boolean Number String Date RegExp Function Array Error Set Map",F=!("0"in Object("a")),U=/^(.*?)\[([-\d]*)\.\.([-\d]*)\](.*)$/,W=/([{}])\1|\{([^}]*)\}|(%)%|(%(\w*))/g,V=".",K=n.Object,G=n.Array,J=(n.Date,n.String),Y=n.Number,X=n.Function,$=(n.RegExp,n.util.hasOwn),q=n.util.getOwn,P=n.util.setProperty,C=n.util.classToString,j=(l=n.util.defineProperty,O=n.util.forEachProperty,n.util.mapNativeToChainable);function Q(e,t,n){return n||(n=C(e)),n==="[object "+t+"]"}function Z(e){return function(t,n,r){t[e](n,r)}}var ee=Z("alias"),te=Z("defineStatic"),ne=Z("defineInstance"),re=Z("defineStaticPolyfill"),ie=Z("defineInstancePolyfill"),oe=Z("defineInstanceAndStatic"),ae=Z("defineInstanceWithArguments");function se(e,t,n,r){oe(e,function(e,t){var n={};R(e)&&(e=Re(e));return Ie(e,(function(e,r){t(n,e,r)})),n}(t,n),r)}function ce(e){var t=function(t){var n=arguments;return e(t,n[1],n[2],n.length-1)};return t.instance=function(t){var n=arguments;return e(this,t,n[1],n.length)},t}function ue(e,t,n){P(e,t,n)}function le(e,t){var n=function(e){return t={},n=e,O(n,(function(e,n){t[n]=e})),t;var t,n}(t);function r(e){return n[e]}return ue(e,"getOption",r),ue(e,"setOption",(function(e,r){var i;1===arguments.length?i=e:(i={})[e]=r,O(i,(function(e,r){null===e&&(e=t[r]),n[r]=e}))})),r}function pe(e){if(!D(e))throw new TypeError("Function is not callable")}function de(e){if(we(e))throw new TypeError("Property cannot be written")}function fe(e){if((e=+e||0)<0||!T(e)||!isFinite(e))throw new RangeError("Invalid number");return Le(e)}function he(e){return void 0!==e}function ve(e){return void 0===e}function me(e){var t="_sugar_"+e;return function(e,n){return arguments.length>1?(P(e,t,n),e):e[t]}}function ye(e){if(!we(e)){var t=C(e);if(A(e,t))return a=e,a=RegExp(a),function(e){return a.test(e)};if(I(e,t))return o=e.getTime(),function(e){return!(!e||!e.getTime)&&e.getTime()===o};if(D(e,t))return i=e,function(e,t,n){return e===i||i.call(n,e,t,n)};if(ke(e,t))return n=e,r={},function(e,t,i){var o=!0;return!!je(e)&&(O(n,(function(n,a){return r[a]=q(r,a)||ye(n),!1===r[a].call(i,e[a],t,i)&&(o=!1),o})),o)}}var n,r,i,o,a;return function(e){return function(t){return Oe(t,e)}}(e)}function _e(e){return Object.keys(e)}function ge(e,t,n){return be(e,t,n,!1)}function be(e,t,n,r,i,o,a){var s,c,u,l,p,d,f,h,v;if(s=e||void 0,null!=t){if(je(t))c=[t];else{if(-1!==(t=String(t)).indexOf(".."))return function(e,t,n,r){var i,o,a,s,c,u,l;if(!(i=t.match(U)))return;l=he(r),u=(s=i[1])?be(e,s,n,!1,!!l,!0):e;if(function(e){if(!L(e))throw new TypeError("Array required")}(u),c=i[4],o=i[2]?+i[2]:0,a=-1===(a=i[3]?+i[3]:u.length)?u.length:a+1,l)for(var p=o;p<a;p++)be(u,p+c,n,!1,!0,!1,r);else if(u=u.slice(o,a),c)return c.charAt(0)===V&&(c=c.slice(1)),u.map((function(e){return be(e,c)}));return u}(e,t,n,a);c=t.split("[")}p=he(a);for(var m=0,y=c.length;m<y;m++){u=c[m],R(u)&&(u=u.split(V));for(var _=0,g=u.length;_<g;_++)if(d=m===y-1&&_===g-1,f=-1!==(l=(t=u[_]).indexOf("]")),h=y>1&&_===g-1,p&&0===l?t=s.length:f&&(t=t.slice(0,-1)),f&&t<0&&(t=+t+s.length),m||t||1===y){if(v=n?t in s:$(s,t),i&&(!d||o)&&!v){s=s[t]=h||o&&d?[]:{};continue}if(r){if(d||!v)return v}else p&&d&&(de(s),s[t]=a);s=v?s[t]:void 0}}return s}}function je(e,t){return!!e&&"object"===(t||typeof e)}function we(e,t){return t=t||typeof e,null==e||"string"===t||"number"===t||"boolean"===t}function ke(e,t){return je(e)&&Q(e,"Object",t)&&function(e){var t="toString"in e,n="constructor"in e;return!n&&!t||n&&!$(e,"constructor")&&$(e.constructor.prototype,"isPrototypeOf")}(e)&&function(e){var t=Object.prototype;for(var n in e){var r=e[n];if(!$(e,n)&&r!==t[n])return!1}return!0}(e)}function xe(e){return we(e)&&(e=Object(e)),F&&R(e)&&function(e){var t,n=0;for(;t=e.charAt(n);)e[n++]=t}(e),e}function Oe(e,t,n){var r,i;return e===t?0!==e||1/e===1/t:(r=C(e))===(i=C(t))&&(S(e,r)&&S(t,i)?function(e,t,n,r){var i,o;if(typeof e!==typeof t)return!1;if(je(e.valueOf())){if(e.length!==t.length)return!1;if(o=0,i=!0,Ce(e,!1,r,(function(e,n,r,a){return r||e in t&&Oe(n,t[e],a)||(i=!1),o++,i})),!i||o!==_e(t).length)return!1}return e.valueOf().toString()===t.valueOf().toString()}(e,t,0,n):H(e,r)&&H(t,i)?e.size===t.size&&Oe(tt(e),tt(t),n):z(e,r)&&z(t,i)?e.size===t.size&&Oe(nt(e),nt(t),n):!(!M(e,r)||!M(t,i))&&e.toString()===t.toString())}function Pe(e,t,n){var r,i,o,a=typeof e;return we(e,a)&&!He(e)?a+e:(r=C(e),S(e,r)?(je(e)?i=function(e,t,n){var r="";return Ce(e,!0,n,(function(e,n,i,o){r+=i?"CYC":e+Pe(n,t,o)})),r}(e,t,n)+e.toString():1/e===-1/0?i="-0":e.valueOf&&(i=e.valueOf()),a+r+i):(-1===(o=function(e,t){for(var n=0,r=e.length;n<r;n++)if(n in e&&e[n]===t)return n;return-1}(t,e))&&(o=t.length,t.push(e)),o))}function Ce(e,t,n,r){function i(e,t){var i=!1;if(n.length>1)for(var o=n.length;o--;)n[o]===e&&(i=!0);n.push(e),r(t,e,i,n),n.pop()}n||(n=[]),t?function(){for(var t,n=_e(e).sort(),r=0;r<n.length;r++)t=n[r],i(e[t],n[r])}():O(e,i)}function $e(e){return e>>>0==e&&4294967295!=e}function qe(e,t,n,r){for(var i,o=function(e,t,n,r){var i,o=[];for(i in e)$e(i)&&(n||(r?i<=t:i>=t))&&o.push(+i);return o.sort((function(e,n){var r=e>t;return r!==n>t?r?-1:1:e-n})),o}(e,n,r),a=0,s=o.length;a<s;a++)i=o[a],t.call(e,e[i],i,e);return e}function Se(e,t,n,r){var i,o=e.length;return L(t)?(i=new Array(t.length),Ie(t,(function(t,a){i[a]=Ee(e,t,o,n,r)})),i):Ee(e,t,o,n,r)}function Ee(e,t,n,r,i){return t=function(e,t,n){return e&&n&&(e%=t),e<0&&(e=t+e),e}(t,n,r),i?e.charAt(t):e[t]}function Te(e,t,n,r){return t?t.apply?t.apply(n,r||[]):L(t)?t.map((function(t){return Te(e,t,n,r)})):D(e[t])?e[t].call(e):ge(e,t):e}function Re(e){return e.split(" ")}function Ie(e,t){for(var n=0,r=e.length;n<r;n++){if(!(n in e))return qe(e,t,n);t(e[n],n)}}var Ae,De,Le=Math.trunc||function(e){return 0!==e&&isFinite(e)?e<0?Ue(e):We(e):e};function He(e){return null!=e&&e!==e}function ze(e,t){var n,r;return n=e.replace(Ae,(function(e){var t=q(De,e);return t===V&&(r=!0),t})),r?parseFloat(n):parseInt(n,t||10)}var Me=Math.abs,Ne=Math.pow,Be=Math.min,Fe=Math.max,Ue=Math.ceil,We=Math.floor,Ve=Math.round,Ke=String.fromCharCode;function Ge(e){return e.trim()}function Je(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Ye={};function Xe(e,t){var n="";function r(e,r){(e||t.indexOf(r)>-1)&&(n+=r)}return t=t||"",r(e.global,"g"),r(e.ignoreCase,"i"),r(e.multiline,"m"),r(e.sticky,"y"),n}function Qe(e){return R(e)||(e=String(e)),e.replace(/([\\\/\'*+?|()\[\]{}.^$-])/g,"\\$1")}var Ze,et;function tt(e){var t=new Array(e.size),n=0;return e.forEach((function(e){t[n++]=e})),t}function nt(e){var t=new Array(e.size),n=0;return e.forEach((function(e,r){t[n++]=[r,e]})),t}function rt(e,t){at("plural",e,t=t||e),R(e)&&it(t,e)}function it(e,t){at("singular",e,t)}function ot(e,t){var n=RegExp(e+"$","i"),r=RegExp(t+"$","i");rt(n,t),rt(r,t),it(r,e),it(n,e)}function at(e,t,n){Ye[e]||(Ye[e]=new Ze),Ye[e].add(t,n)}function st(e){if(null==e)throw new TypeError("String required.");return String(e)}function ct(e){if(A(e))throw new TypeError;return String(e)}function ut(e){if(null==e)throw new TypeError("Object required.");return xe(e)}function lt(e,t){return He(e)?He(t):e===t&&(0!==e||1/e===1/t)}!function(){var e,t={};function n(e){t["[object "+e+"]"]=!0}function r(e,t){return t&&Q(new t,"Object")?(n=String(t),function(e){return String(e.constructor)===n}):function(e){return function(t,n){return Q(t,e,n)}}(e);var n}function i(e){var t=e.toLowerCase();return function(n){var r=typeof n;return r===t||"object"===r&&Q(n,e)}}e=Re(B),E=i(e[0]),T=i(e[1]),R=i(e[2]),I=r(e[3]),A=r(e[4]),D=r(e[5]),L=Array.isArray||r(e[6]),M=r(e[7]),H=r(e[8],"undefined"!==typeof Set&&Set),z=r(e[9],"undefined"!==typeof Map&&Map),n("Arguments"),n(e[0]),n(e[1]),n(e[2]),n(e[3]),n(e[4]),n(e[6]),Ie(Re("Int8 Uint8 Uint8Clamped Int16 Uint16 Int32 Uint32 Float32 Float64"),(function(e){n(e+"Array")})),S=function(e,n){return function(e){return t[e]}(n=n||C(e))||ke(e,n)}}(),function(){var e=V,t="";De={};for(var n,r=0;r<=9;r++)t+=n=Ke(r+65296),De[n]=Ke(r+48);De[","]="",De["\uff0e"]=e,De[e]=e,Ae=RegExp("["+(t+"\uff0e,"+e)+"]","g"),t}(),ie(J,{includes:function(e){var t=arguments[1],n=st(this);return e=ct(e),-1!==n.indexOf(e,t)},startsWith:function(e){var t,n,r,i,o,a=arguments[1];return t=st(this),e=ct(e),r=+a||0,i=t.length,n=Be(Fe(r,0),i),!((o=e.length)+n>i)&&t.substr(n,o)===e},endsWith:function(e){var t,n,r,i,o,a=arguments[1];return t=st(this),e=ct(e),r=i=t.length,he(a)&&(r=+a||0),!((n=Be(Fe(r,0),i)-(o=e.length))<0)&&t.substr(n,o)===e},repeat:function(e){return function(e,t){var n="";for(e=e.toString();t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n}(this,e=fe(e))}}),re(Y,{isNaN:function(e){return He(e)}}),re(G,{from:function(e){var t,n,r=arguments[1],i=arguments[2];if(he(r)&&pe(r),e=ut(e),!$e(t=Le(Fe(0,e.length||0))))throw new RangeError("Invalid array length");D(this)?(n=new this(t)).length=t:n=new Array(t);for(var o=0;o<t;o++)P(n,o,he(r)?r.call(i,e[o],o):e[o],!0);return n}}),ie(G,{find:function(e){var t=arguments[1];pe(e);for(var n=0,r=this.length;n<r;n++)if(e.call(t,this[n],n,this))return this[n]},findIndex:function(e){var t=arguments[1];pe(e);for(var n=0,r=this.length;n<r;n++)if(e.call(t,this[n],n,this))return n;return-1}}),ie(G,{includes:function(e){var t,n=arguments[1],r=this;if(R(r))return r.includes(e,n);n=n?n.valueOf():0,t=r.length,n<0&&(n=Fe(0,n+t));for(var i=n;i<t;i++)if(lt(e,r[i]))return!0;return!1}});var pt=/[^\u0000-\u0040\u005B-\u0060\u007B-\u007F]+('s)?/g,dt=/(^|_)([^_]+)/g,ft=String.prototype.includes,ht=function(e,t,n){var r,i,o,a=W,s=(r=function(e){var t,n=[],r=0;for(a.lastIndex=0;t=a.exec(e);)u(n,e,r,t.index),c(n,t),r=a.lastIndex;return u(n,e,r,e.length),n},i={},o=0,function(e){return $(i,e)?i[e]:(1e3===o&&(i={},o=0),o++,i[e]=r(e))});function c(r,i){var o,a,s,c,u,l=i[2],p=i[3],d=i[5];i[4]&&t?(a=d,o=t):l?(a=l,o=e):s=p&&t?p:i[1]||i[0],o&&(!function(e,t,n){if(e&&!e(t,n))throw new TypeError("Invalid token "+(t||n)+" in format string")}(n,l,d),c=function(e,t){return o(e,a,t)}),r.push(c||(u=s,function(){return u}))}function u(e,t,n,r){if(r>n){var i=t.slice(n,r);l(i,"{"),l(i,"}"),e.push((function(){return i}))}}function l(e,t){if(-1!==e.indexOf(t))throw new TypeError("Unmatched "+t+" in format string")}return function(e,t,n){for(var r=s(e),i="",o=0;o<r.length;o++)i+=r[o](t,n);return i}}(ge);function vt(e,t,n){var r,i,o,a=[];if(D(t)?(n=t,o=/[\s\S]/g):t?R(t)?o=RegExp(Qe(t),"gi"):A(t)&&(o=RegExp(t.source,Xe(t,"g"))):o=/[\s\S]/g,r=function(e,t){var n,r,i=[];for(;null!=(n=t.exec(e));)t.lastIndex===r?t.lastIndex+=1:i.push(n[0]),r=t.lastIndex;return i}(e,o),r)for(var s,c=0,u=r.length;c<u;c++)if(i=r[c],a[c]=i,n){if(!1===(s=n.call(e,i,c,r)))break;he(s)&&(a[c]=s)}return a}function mt(e,t){var n,r,i=new Array(e.length);for(n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);i[n]=o,t&&t.call(e,o,n,e)}return i}function yt(e){var t=Ye.acronyms&&Ye.acronyms.reg;return e.replace(/[-\s]+/g,"_").replace(t,(function(e,t){return(t>0?"_":"")+e.toLowerCase()})).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()}function _t(e,t){return(e=yt(e)).replace(dt,(function(e,n,r,i){var o,a=!1!==t||i>0;return o=function(e){return Ye.acronyms&&Ye.acronyms.find(e)}(r),o&&a?o:a?gt(r,!0):r}))}function gt(e,t,n){return t&&(e=e.toLowerCase()),n?e.replace(pt,Je):Je(e)}function bt(e,t,n){var r,i=0;return R(t)?t=RegExp(Qe(t),"g"):t&&!t.global&&(t=RegExp(t.source,Xe(t,"g"))),n?(r=n,n=function(){var e=r[i++];return null!=e?e:""}):n="",e.replace(t,n)}ne(J,{includes:ce((function(e,t,n){return A(t)?(n&&(e=e.slice(n)),t.test(e)):ft.call(e,t,n)})),lines:function(e,t){return vt(Ge(e),/^.*$/gm,t)}},[N,"enhanceString"]),ne(J,{at:function(e,t,n){return Se(e,t,n,!0)},forEach:function(e,t,n){return vt(e,t,n)},chars:function(e,t,n){return vt(e,t,n)},codes:function(e,t){return mt(e,t)},shift:function(e,t){var n="";return t=t||0,mt(e,(function(e){n+=Ke(e+t)})),n},isBlank:function(e){return 0===Ge(e).length},isEmpty:function(e){return 0===e.length},remove:function(e,t){return e.replace(t,"")},removeAll:function(e,t){return bt(e,t)},reverse:function(e){return function(e){return e.split("").reverse().join("")}(e)},compact:function(e){return Ge(e).replace(/([\r\n\s\u3000])+/g,(function(e,t){return"\u3000"===t?t:" "}))},from:function(e,t){return e.slice(function(e,t,n){return R(t)&&-1===(t=e.indexOf(t))&&(t=n?e.length:0),t}(e,t,!0))},camelize:function(e,t){return _t(e,t)},first:function(e,t){return ve(t)&&(t=1),e.substr(0,t)},last:function(e,t){ve(t)&&(t=1);var n=e.length-t<0?0:e.length-t;return e.substr(n)},capitalize:function(e,t,n){return gt(e,t,n)},singularize:function(e){return et("singular",String(e))},underscore:function(e){return yt(e)}}),ae(J,{replaceAll:function(e,t,n){return bt(e,t,n)},format:function(e,t){var n=t[0]&&t[0].valueOf();return 1===t.length&&je(n)&&(t=n),ht(e,t)}}),(Ze=function(){this.map={},this.rules=[]}).prototype={add:function(e,t){R(e)?this.map[e]=t:this.rules.unshift({rule:e,replacement:t})},inflect:function(e){var t,n,r;return r=(t=e.split(" "))[n=t.length-1],t[n]=this.find(r)||this.runRules(r),t.join(" ")},find:function(e){return q(this.map,e)},runRules:function(e){for(var t,n=0;t=this.rules[n];n++)if(t.rule.test(e)){e=e.replace(t.rule,t.replacement);break}return e}},et=function(e,t){return Ye[e]&&Ye[e].inflect(t)||t},rt(/$/,"s"),rt(/s$/i,"s"),rt(/(ax|test)is$/i,"$1es"),rt(/(octop|fung|foc|radi|alumn|cact)(i|us)$/i,"$1i"),rt(/(census|alias|status|fetus|genius|virus)$/i,"$1es"),rt(/(bu)s$/i,"$1ses"),rt(/(buffal|tomat)o$/i,"$1oes"),rt(/([ti])um$/i,"$1a"),rt(/([ti])a$/i,"$1a"),rt(/sis$/i,"ses"),rt(/f+e?$/i,"ves"),rt(/(cuff|roof)$/i,"$1s"),rt(/([ht]ive)$/i,"$1s"),rt(/([^aeiouy]o)$/i,"$1es"),rt(/([^aeiouy]|qu)y$/i,"$1ies"),rt(/(x|ch|ss|sh)$/i,"$1es"),rt(/(tr|vert)(?:ix|ex)$/i,"$1ices"),rt(/([ml])ouse$/i,"$1ice"),rt(/([ml])ice$/i,"$1ice"),rt(/^(ox)$/i,"$1en"),rt(/^(oxen)$/i,"$1"),rt(/(quiz)$/i,"$1zes"),rt(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/i,"$1os"),rt(/(craft)$/i,"$1"),rt(/([ft])[eo]{2}(th?)$/i,"$1ee$2"),it(/s$/i,""),it(/([pst][aiu]s)$/i,"$1"),it(/([aeiouy])ss$/i,"$1ss"),it(/(n)ews$/i,"$1ews"),it(/([ti])a$/i,"$1um"),it(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"),it(/(^analy)ses$/i,"$1sis"),it(/(i)(f|ves)$/i,"$1fe"),it(/([aeolr]f?)(f|ves)$/i,"$1f"),it(/([ht]ive)s$/i,"$1"),it(/([^aeiouy]|qu)ies$/i,"$1y"),it(/(s)eries$/i,"$1eries"),it(/(m)ovies$/i,"$1ovie"),it(/(x|ch|ss|sh)es$/i,"$1"),it(/([ml])(ous|ic)e$/i,"$1ouse"),it(/(bus)(es)?$/i,"$1"),it(/(o)es$/i,"$1"),it(/(shoe)s?$/i,"$1"),it(/(cris|ax|test)[ie]s$/i,"$1is"),it(/(octop|fung|foc|radi|alumn|cact)(i|us)$/i,"$1us"),it(/(census|alias|status|fetus|genius|virus)(es)?$/i,"$1"),it(/^(ox)(en)?/i,"$1"),it(/(vert)(ex|ices)$/i,"$1ex"),it(/tr(ix|ices)$/i,"trix"),it(/(quiz)(zes)?$/i,"$1"),it(/(database)s?$/i,"$1"),it(/ee(th?)$/i,"oo$1"),ot("person","people"),ot("man","men"),ot("human","humans"),ot("child","children"),ot("sex","sexes"),ot("move","moves"),ot("save","saves"),ot("goose","geese"),ot("zombie","zombies"),Ie(Re("equipment information rice money species series fish deer sheep jeans"),(function(e){rt(e)}));var jt,wt,kt=!("0"in[].concat(void 0).concat()),xt={sortIgnore:null,sortNatural:!0,sortIgnoreCase:!0,sortOrder:function(e,t){for(var n=[],r=0,i=e.length;r<i;r++)r in e&&n.push(t(e[r],r));return n}("A\xc1\xc0\xc2\xc3\u0104BC\u0106\u010c\xc7D\u010e\xd0E\xc9\xc8\u011a\xca\xcb\u0118FG\u011eH\u0131I\xcd\xcc\u0130\xce\xcfJKL\u0141MN\u0143\u0147\xd1O\xd3\xd2\xd4PQR\u0158S\u015a\u0160\u015eT\u0164U\xda\xd9\u016e\xdb\xdcVWXY\xddZ\u0179\u017b\u017d\xde\xc6\u0152\xd8\xd5\xc5\xc4\xd6".split(""),(function(e){return e+e.toLowerCase()})).join(""),sortCollate:function(e,t){var n,r,i,o,a,s,c=0,u=0,l=Ot("sortOrder"),p=Ot("sortIgnore"),d=Ot("sortNatural"),f=Ot("sortIgnoreCase"),h=Ot("sortEquivalents");e=At(e,p,f),t=At(t,p,f);do{i=Dt(e,c,h),o=Dt(t,c,h),n=Lt(i,l),r=Lt(o,l),-1===n||-1===r?(n=e.charCodeAt(c)||null,r=t.charCodeAt(c)||null,d&&It(n)&&It(r)&&(n=ze(e.slice(c)),r=ze(t.slice(c)))):(a=i!==e.charAt(c),s=o!==t.charAt(c),a!==s&&0===u&&(u=a-s)),c+=1}while(null!=n&&null!=r&&n===r);return n===r?u:n-r},sortEquivalents:(jt={},Ie(Re("A\xc1\xc0\xc2\xc3\xc4 C\xc7 E\xc9\xc8\xca\xcb I\xcd\xcc\u0130\xce\xcf O\xd3\xd2\xd4\xd5\xd6 S\xdf U\xda\xd9\xdb\xdc"),(function(e){var t=e.charAt(0);Ie(e.slice(1).split(""),(function(e){jt[e]=t,jt[e.toLowerCase()]=t.toLowerCase()}))})),jt)},Ot=le(G,xt);function Pt(e,t){var n;return!function(e){return e&&e.constructor&&L(e.constructor.prototype)}(e)?je(e)||R(e)?n=Array.from(e):he(e)&&(n=[e]):n=t?Ct(e):e,n||[]}function Ct(e){var t=new Array(e.length);return Ie(e,(function(e,n){t[n]=e})),t}function $t(e,t){return kt?function(e,t){var n,r=Ct(e),i=r.length;return n=L(t)?t:[t],r.length+=n.length,Ie(n,(function(e,t){r[i+t]=e})),r}(e,t):e.concat(t)}function qt(e,t,n){var r;return n=+n,isNaN(n)&&(n=e.length),r=[n,0],he(t)&&(r=r.concat(t)),e.splice.apply(e,r),e}function St(e,t){var n=[],r={},i=[];return Ie(e,(function(o,a){var s=Pe(t?Te(o,t,e,[o,a,e]):o,i);$(r,s)||(n.push(o),r[s]=!0)})),n}function Et(e,t,n){var r=[];return t=t||1/0,n=n||0,Ie(e,(function(e){L(e)&&n<t?r=r.concat(Et(e,t,n+1)):r.push(e)})),r}function Tt(e,t,n){var r=[],i={},o=[];return L(t)||(t=function(e){var t=[];return t.push(e),t}(t)),Ie(t,(function(e){i[Pe(e,o)]=!0})),Ie(e,(function(e){var t=Pe(e,o);$(i,t)!==n&&(delete i[t],r.push(e))})),r}function Rt(e,t){var n,r;if(R(e)&&R(t))return Ot("sortCollate")(e,t);if(L(e)&&L(t)){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(r=0;r<e.length;r++)if(0!==(n=Rt(e[r],t[r])))return n;return 0}return e<t?-1:e>t?1:0}function It(e){return e>=48&&e<=57||e>=65296&&e<=65305}function At(e,t,n){return R(e)||(e=String(e)),n&&(e=e.toLowerCase()),t&&(e=e.replace(t,"")),e}function Dt(e,t,n){var r=e.charAt(t);return q(n,r)||r}function Lt(e,t){return e?t.indexOf(e):null}te(G,{create:function(e,t){return Pt(e,t)},construct:function(e,t){return e=fe(e),Array.from(new Array(e),(function(e,n){return t&&t(n)}))}}),ne(G,{isEmpty:function(e){return 0===e.length},isEqual:function(e,t){return Oe(e,t)},clone:function(e){return Ct(e)},at:function(e,t,n){return Se(e,t,n)},add:function(e,t,n){return qt(Ct(e),t,n)},subtract:function(e,t){return Tt(e,t,!0)},append:function(e,t,n){return qt(e,t,n)},removeAt:function(e,t,n){return ve(t)||(ve(n)&&(n=t),e.splice(t,n-t+1)),e},unique:function(e,t){return St(e,t)},flatten:function(e,t){return Et(e,t)},first:function(e,t){return ve(t)?e[0]:(t<0&&(t=0),e.slice(0,t))},last:function(e,t){if(ve(t))return e[e.length-1];var n=e.length-t<0?0:e.length-t;return e.slice(n)},from:function(e,t){return e.slice(t)},to:function(e,t){return ve(t)&&(t=e.length),e.slice(0,t)},compact:function(e,t){return function(e,t){return function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];r in e&&t(o,r)&&n.push(o)}return n}(e,(function(e){return e||!t&&null!=e&&e.valueOf()===e.valueOf()}))}(e,t)},groupBy:function(e,t,n){return function(e,t,n){var r,i={};return Ie(e,(function(n,o){r=Te(n,t,e,[n,o,e]),$(i,r)||(i[r]=[]),i[r].push(n)})),n&&O(i,n),i}(e,t,n)},shuffle:function(e){return function(e){for(var t,n,r=(e=Ct(e)).length;r;)t=Math.random()*r|0,n=e[--r],e[r]=e[t],e[t]=n;return e}(e)},sample:function(e,t,n){var r,i,o,a=[];E(t)?i=t:(r=t,i=n),ve(r)&&(r=1,o=!0),i||(e=Ct(e)),r=Be(r,e.length);for(var s,c=0;c<r;c++)s=Le(Math.random()*e.length),a.push(e[s]),e.splice(s,1);return o?a[0]:a},sortBy:function(e,t,n){return e.sort((function(r,i){return Rt(Te(r,t,e,[r]),Te(i,t,e,[i]))*(n?-1:1)})),e},remove:function(e,t){return function(e,t){for(var n=ye(t),r=0;r<e.length;)n(e[r],r,e)?e.splice(r,1):r++;return e}(e,t)},exclude:function(e,t){return function(e,t){for(var n=[],r=ye(t),i=0;i<e.length;i++)r(e[i],i,e)||n.push(e[i]);return n}(e,t)},union:function(e,t){return St($t(e,t))},intersect:function(e,t){return Tt(e,t,!1)}}),ee(G,"insert","append"),wt=Pt,G.prototype.constructor=function(){return wt.apply(this,arguments)};var Ht,zt=Object.getOwnPropertyNames,Mt=Object.getOwnPropertySymbols,Nt=Object.getOwnPropertyDescriptor;function Bt(e,t,n){return Ut(e,t,(n=n||{}).deep,n.resolve,n.hidden,n.descriptor)}function Ft(e,t,n,r){for(var i,o=e(t),a=0;i=o[a];a++)(Nt(t,i).enumerable||r)&&n(t[i],i)}function Ut(e,t,r,i,o,a){var s=D(i),c=!1!==i;return ve(e)?e=Wt(t):c&&I(e)&&I(t)&&e.setTime(t.getTime()),we(e)?t:(we(t)&&(t=xe(t)),function(e,t,n){zt&&e?Ft(zt,t,n,e):O(t,n),Mt&&Ft(Mt,t,n,e)}(o,t,(function(u,p){var d,f,h,v,m;if(d=t[p],f=q(e,p),s){if(ve(m=i(p,f,d,e,t)))return;he(m)&&m!==n&&(d=m,h=!0)}else if(ve(d))return;((v=!h&&r&&je(d)&&!A(d))||c||!he(f))&&(v&&(d=Ut(f,d,r,i,o,a)),zt&&a?function(e,t,n,r){var i=Nt(t,n);he(i.value)&&(i.value=r),l(e,n,i)}(e,t,p,d):e[p]=d)})),e)}function Wt(e){var t=C(e);if(L(e,t))return[];if(ke(e,t))return{};if(I(e,t))return new Date(e.getTime());if(A(e,t))return RegExp(e.source,Xe(e));if(we(e&&e.valueOf()))return e;throw new TypeError("Must be a basic data type")}function Vt(e,t){return Ut(Wt(e),e,t,!0,!0,!0)}function Kt(e){return function(e){return _e(xe(e))}(e).length}function Gt(e,t,n){var r,i={};return t=[].concat(t),O(e,(function(e,o){r=!1;for(var a=0;a<t.length;a++)Jt(t[a],o)&&(r=!0);r===n&&(i[o]=e)})),i}function Jt(e,t){return A(e)?e.test(t):je(e)?t in e:t===String(e)}function Yt(e,t,n,r,i){var o,a,s,c,u=[];return E(t)?(s=t,c=n):c=t,Zt(e,c,(function(t,n){if(ve(t))throw new TypeError("Cannot compare with undefined");o=i?n:e[n],t===a?u.push(o):(ve(a)||r&&t>a||!r&&t<a)&&(u=[o],a=t)})),Qt(u,e,s,i)}function Xt(e,t,n,r,i){var o,a,s,c,u={},l=[];return E(t)?(s=t,c=n):c=t,Zt(e,c,(function(t,n){var r=Pe(t,l),o=q(u,r)||[];o.push(i?n:e[n]),u[r]=o})),o=Yt(u,!!s,"length",r,!0),s?(a=[],O(o,(function(e){a=a.concat(e)}))):a=q(u,o),Qt(a,e,s,i)}function Qt(e,t,n,r){return r&&n?e.reduce((function(e,n){return e[n]=t[n],e}),{}):(e&&!n&&(e=e[0]),e)}function Zt(e,t,n){var r=L(e);O(e,(function(i,o){if(r){if(!$e(o))return;o=+o}var a=Te(i,t,e,[i,o,e]);n(a,o)}))}oe(K,{size:function(e){return Kt(e)},isEmpty:function(e){return 0===Kt(e)},isEqual:function(e,t){return Oe(e,t)},merge:function(e,t,n){return Bt(e,t,n)},add:function(e,t,n){return Bt(Vt(e),t,n)},intersect:function(e,t){return function(e,t,n){return je(e)?(t=xe(t),Ut({},e,!1,(function(e,r,i){if((e in t&&Oe(i,t[e]))!==n)return i}))):n?e:{}}(e,t,!1)},clone:function(e,t){return Vt(e,t)},values:function(e){return function(e){var t=[];return O(e,(function(e){t.push(e)})),t}(e)},isObject:function(e){return ke(e)},remove:function(e,t){return function(e,t){var n=ye(t);return O(e,(function(t,r){n(t,r,e)&&delete e[r]})),e}(e,t)},exclude:function(e,t){return function(e,t){var n={},r=ye(t);return O(e,(function(t,i){r(t,i,e)||(n[i]=t)})),n}(e,t)},select:function(e,t){return function(e,t){return Gt(e,t,!0)}(e,t)},reject:function(e,t){return function(e,t){return Gt(e,t,!1)}(e,t)}}),ne(K,{keys:function(e){return _e(e)}}),Ht=[E,T,R,I,A,D,L,M,H,z],se(K,B,(function(e,t,n){e["is"+t]=Ht[n]}));var en=ln("map",cn),tn=sn("find"),nn=sn("some"),rn=sn("every"),on=sn("filter"),an=sn("findIndex");function sn(e){return ln(e,un)}function cn(e,t){return D(e)?e:e?function(n,r,i){return Te(n,e,t,[n,r,i])}:void 0}function un(e){var t;return D(e)?e:(t=ye(e),function(e,n,r){return t(e,n,r)})}function ln(e,t){var n=Array.prototype[e];return function(e,r,i,o){var a=new Array(2);return function(e){if(!e)throw new TypeError("Argument required")}(o>0),a[0]=t(r,i),a[1]=i,n.apply(e,a)}}ne(G,{map:ce(en),some:ce(nn),every:ce(rn),filter:ce(on),find:ce(tn),findIndex:ce(an)},[N,"enhanceArray"]),ne(G,{none:ce((function(){return!nn.apply(this,arguments)})),count:ce((function(e,t){return ve(t)?e.length:on.apply(this,arguments).length})),min:function(e,t,n){return Yt(e,t,n)},max:function(e,t,n){return Yt(e,t,n,!0)},least:function(e,t,n){return Xt(e,t,n)},most:function(e,t,n){return Xt(e,t,n,!0)},sum:function(e,t){return function(e,t){var n=0;return Zt(e,t,(function(e){n+=e})),n}(e,t)},average:function(e,t){return function(e,t){var n=0,r=0;return Zt(e,t,(function(e){n+=e,r++})),n/(r||1)}(e,t)},median:function(e,t){return function(e,t){var n,r,i=[];return Zt(e,t,(function(e){i.push(e)})),(r=i.length)?(i.sort((function(e,t){return(e||0)-(t||0)})),n=Le(r/2),r%2?i[n]:(i[n-1]+i[n])/2):0}(e,t)}});var pn=hn("some"),dn=hn("find"),fn=hn("every");function hn(e){var t=Array.prototype[e];return function(e,n){var r=ye(n);return t.call(_e(e),(function(t){return r(e[t],t,e)}))}}oe(K,{forEach:function(e,t){return function(e,t){return pe(t),O(e,(function(n,r){t(n,r,e)})),e}(e,t)},map:function(e,t){return function(e,t){var n={};return O(e,(function(r,i){n[i]=Te(r,t,e,[r,i,e])})),n}(e,t)},some:pn,every:fn,filter:function(e,t){return function(e,t){var n=ye(t),r={};return O(e,(function(t,i){n(t,i,e)&&(r[i]=t)})),r}(e,t)},reduce:function(e,t,n){return function(e,t,n){var r=he(n);return O(e,(function(i,o){if(!r)return n=i,void(r=!0);n=t(n,i,o,e)})),n}(e,t,n)},find:dn,none:function(e,t){return function(e,t){return!pn(e,t)}(e,t)},min:function(e,t,n){return Yt(e,t,n,!1,!0)},max:function(e,t,n){return Yt(e,t,n,!0,!0)}});le(Y,{decimal:V,thousands:","});function vn(e){return function(t,n){return n?function(e,t,n){var r=Ne(10,Me(t||0));return t<0&&(r=1/r),(n=n||Ve)(e*r)/r}(t,n,e):e(t)}}ne(Y,{round:vn(Ve),ceil:vn(Ue),floor:vn(We)});var mn=me("lock"),yn=me("partial"),_n=Object.create||function(e){var t=function(){};return t.prototype=e,new t};ae(X,{partial:function(e,t){var n=t.length,r=function r(){var i,o,a=0,s=[],c=this,u=mn(r);for(o=0;o<n;o++){var l=t[o];he(l)?s[o]=l:s[o]=arguments[a++]}for(o=a;o<arguments.length;o++)s.push(arguments[o]);return null===u&&(u=n),T(u)&&(s.length=Be(s.length,u)),c instanceof r?(c=_n(e.prototype),je(i=e.apply(c,s))?i:c):e.apply(c,s)};return yn(r,!0),r}})}).call(this)}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./app/packs/javascripts/vendor/virous_mk_links_highlight.js":function(e,t,n){"use strict";function r(e){return Array.from(e.getElementsByClassName("b-external_link")).map((function(e){var t=new URL(e.getElementsByTagName("a")[0].href);return{url:t.href,host:t.host,path:t.href.replace(t.origin,""),kind:e.classList[1],node:e.getElementsByClassName("url")[0]}}))}function i(e,t){return e.filter((function(e){return!t.find((function(t){return e.url===t.url&&e.kind===t.kind}))}))}function o(e,t,n){return e.map((function(e){var r;if(null!==(r=e.url.includes("/NONE"))&&void 0!==r?r:"ins"===n)return e.state="del",e;var i=function(e,t){return t.find((function(t){if(e.url===t.url)return!0;if(e.host===t.host||e.kind===t.kind){if(e.path.includes(t.path))return!0;if(t.path.includes(e.path))return!0}return!1}))}(e,t);return e.state=i?"mod":n,e}))}n.r(t),t.default=function(e){var t,n,a,s,c,u,l,p;(t=e,n=t.getElementsByClassName("change"),a=r(n[0]),s=r(n[1]),c=i(a,s),u=i(s,a),l=o(c,u,"del"),p=o(u,c,"ins"),l.concat(p)).forEach((function(e){e.node.classList.add(e.state)}))}},"./app/packs/javascripts/views/ads/ad_view.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/js-cookie/dist/js.cookie.js"),a=n.n(o),s=n("./node_modules/delay/index.js"),c=n.n(s),u=n("./app/packs/javascripts/views/application/view.js");function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(t){return console.log("remove ad ".concat(t)),e(".".concat(t)).remove()},g=null,b="loaded",j=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,t);var n,r,o,s=v(u);function u(){return d(this,u),s.apply(this,arguments)}return n=u,(r=[{key:"initialize",value:function(e,t,n){return this.html=e,this.cssClass=t,this.ad_params=n,g!==b&&this._loadAdHandler(),this._replaceNode()}},{key:"_loadAdHandler",value:function(){g=b,e(window).on("message",(function(e){var t;"removeAd"===(null===(t=e.originalEvent.data)||void 0===t?void 0:t.type)&&_(e.originalEvent.data.adClass)}))}},{key:"_replaceNode",value:function(){var t=this,n=e("<div class='close-ad'></div>");if(a.a.get("".concat(this.cssClass,"_ad_disabled")))this.$node.remove();else{var r=e("<div>".concat(this.html,"</div>")).addClass(this.cssClass).append(n);this.$node.replaceWith(r),n.on("click",p(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.a.set("".concat(t.cssClass,"_ad_disabled"),"1",{expires:2}),r.addClass("removing"),e.next=4,c()(1e3);case 4:_(t.cssClass);case 5:case"end":return e.stop()}}),e)}))))}}}])&&f(n.prototype,r),o&&f(n,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(u.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/animes/catalog_filters.js":function(e,t,n){"use strict";(function(e){var r=n("./app/packs/javascripts/utils/in_new_tab.js"),i=n("./node_modules/url-parse/index.js"),o=n.n(i),a=n("./node_modules/tiny-uri/dist/tiny-uri.js"),s="ranked",c={kind:[],status:[],season:[],franchise:[],achievement:[],genre:[],studio:[],publisher:[],duration:[],rating:[],score:[],options:[],mylist:[],"order-by":[],licensor:[]},u=["licensor"];t.a=function(t,n,i){var l=e(".b-collection-filters"),p=function(e){var t=e.data("field"),n=e.data("value");return t&&n?{field:t,value:String(n)}:null},d=function(e){return e.replace(/^!/,"").replace(/\?.*/,"")};e(".anime-params",l).on("click","li",(function(t){if(!Object(r.a)(t)&&!t.target.classList.contains("b-question")){var n=this.classList.contains("selected"),o=p(e(this));o&&(n?f.remove(o.field,o.value):"type"in t.target&&"checkbox"===t.target.type?f.add(o.field,o.value):f.set(o.field,o.value),i(f.compile()),"type"in t.target&&"checkbox"===t.target.type||t.preventDefault())}})),e(".anime-params-block .block-filter",l).on("click",(function(){var t=e(this).closest(".anime-params-block"),n=e(this).hasClass("item-sign")?t.find("li").length===t.find(".item-add:visible").length:e(this).hasClass("item-add"),r=e(this).hasClass("item-sign")&&t.find("li").length===t.find(".item-minus:visible").length;t.find("li").map((function(){return p(e(this))})).each((function(e,t){r?f.params[t.field]=[]:f.params[t.field][e]=n?"!".concat(t.value):t.value})),i(f.compile()),f.parse(f.compile())})),e(".anime-params li",l).on("click",".filter",(function(t){t.preventDefault();var n=e(this).hasClass("item-add");e(this).removeClass(n?"item-add":"item-minus").addClass(n?"item-minus":"item-add");var r=p(e(this).parent()),o=f.params[r.field].indexOf(n?r.value:"!".concat(r.value));return f.params[r.field][o]=n?"!".concat(r.value):r.value,i(f.compile()),!1}));var f={params:null,set:function(e,t){var n=this;return this.params[e].forEach((function(t){return n.remove(e,t)})),this.add(e,t)},add:function(t,n){t===Object.keys(this.params).last()&&this.params[t].length>0?this.set(t,n):this.params[t].push(n);var r=e("li[data-field='".concat(t,"'][data-value='").concat(d(n),"']"),l);r.length||(r=function(t,n){var r=(n=d(n)).replace(/^\d+-/,""),i=null;"publisher"!==t&&"studio"!==t||!r.match(/-/)?"season"===t&&n.match(/^\d+$/)?(i=parseInt(n,10),r=n+" \u0433\u043e\u0434"):"licensor"===t&&(r=n):r=r.replace(/-/g," "),n=n.replace(/\./g,"");var o=e("<li data-field='".concat(t,"' data-value='").concat(n,"'><input type='checkbox'/>").concat(r,"</li>"));if(i){var a=e("ul.seasons li",l).filter((function(e){var t=this.className.match(/season-(\d+)/);if(!t)return!1;var n=parseInt(t[1],10);return n<1e3&&(n*=10),n<i}));a.length?o.insertBefore(a.first()):e(".anime-params.".concat(t,"s"),l).append(o)}else e(".anime-params.".concat(t,"s"),l).prepend(o).parent().removeClass("hidden");return o}(t,n)),"none"===r.css("display")&&r.css({display:"block"}),r.addClass("selected");var i=r.children("input");if(i.length){i.prop({checked:!0});var o=r.children(".filter");return o.length?o.removeClass("item-add").removeClass("item-minus").addClass("!"===n[0]?"item-minus":"item-add").show():r.prepend('<span class="filter '+("!"===n[0]?"item-minus":"item-add")+'"></span>')}},remove:function(t,n){n=d(n),this.params[t]=this.params[t].subtract([n,"!".concat(n)]);try{var r=e("li[data-field='".concat(t,"'][data-value='").concat(n,"']"),l);return r.removeClass("selected"),r.children("input").prop({checked:!1}),r.children(".filter").hide()}catch(i){}},compile:function(e){var n="",r=o()(window.location.href,!0).query;return Object.forEach(this.params,(function(e,t){if(u.includes(t))return(null!=e?e.length:void 0)?r[t]=e.join(","):delete r[t];if(null!=e?e.length:void 0){if("order-by"===t&&e[0]===s&&!location.href.match(/\/list\/(anime|manga)/))return;return n+="/".concat(t,"/").concat(e.join(","))}})),e&&1!==e&&(n+="/page/".concat(e)),this.last_compiled=new a.a(t+n).query.set(r).toString()},last_compiled:null,parse:function(n){var r=this;e(".anime-params .selected",l).toggleClass("selected"),e(".anime-params input[type=checkbox]:checked",l).prop({checked:!1}),e(".anime-params .filter",l).hide(),this.params=JSON.parse(JSON.stringify(c));var i=n.replace("".concat(location.protocol,"//").concat(location.hostname),"").replace(":".concat(location.port),"").replace(t,"").replace(/\?.*/,"").match(/[\w\-]+\/[^\/]+/g),a=o()(window.location.href,!0).query;if(a.licensor&&(i=(i||[]).concat(["licensor/".concat(a.licensor)])),(i||[]).forEach((function(e){var t=e.split("/")[0];if("page"!==t&&t in c)return e.split("/")[1].split(",").forEach((function(e){try{return r.add(t,e)}catch(n){if("order-by"===t)return r.add("order-by",s)}}))})),Object.isEmpty(this.params["order-by"]))return this.add("order-by",s)}};return f.parse(n),f.params.genre.length&&l.find(".genres .b-spoiler").spoiler().trigger("spoiler:open"),f.params.licensor.length&&l.find(".licensors .b-spoiler").spoiler().trigger("spoiler:open"),f}}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/animes/paginated_catalog.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return y}));var i,o=n("./node_modules/@babel/runtime/regenerator/index.js"),a=n.n(o),s=(n("./node_modules/turbolinks/dist/turbolinks.js"),n("./node_modules/shiki-utils/index.js")),c=n("./node_modules/shiki-decorators/index.js"),u=n("./app/packs/javascripts/services/user_rates/tracker.js"),l=n("./app/packs/javascripts/services/ajax_cacher.js"),p=n("./app/packs/javascripts/dynamic_elements/_parser.js"),d=n("./app/packs/javascripts/views/animes/catalog_filters.js"),f=n("./app/packs/javascripts/utils/in_new_tab.js");function h(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var y=(i=function(){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$content=e(".l-content"),this.$pagination=e(".pagination"),this.$linkCurrent=this.$pagination.find(".link-current"),this.$linkNext=this.$pagination.find(".link-next"),this.$linkPrev=this.$pagination.find(".link-prev"),this.$linkTotal=this.$pagination.find(".link-total"),this.$linkTitle=this.$pagination.find(".link-title"),this.$linkNext.hasClass("disabled")&&this.$linkPrev.hasClass("disabled")&&this.$pagination.hide(),this.pageChange={},this.$content.on("postloader:before",this._onPageLoadByScroll),this.$pagination.on("click",".link",this._onPaginationLinkClick).on("click",".no-hover",this._onPaginationPageSelect),this.filters=new d.a(n,window.location.href,this.load)}var n,i,o,c,m;return n=t,i=[{key:"load",value:function(e){window.history.pushState({turbolinks:!0,url:e},"",e),this.filters.parse(e),this._fetch(e)}},{key:"_onPaginationLinkClick",value:function(t){if(!Object(f.a)(t)){t.preventDefault();var n=e(t.target);n.hasClass("disabled")||(e(window).scrollTop()>400&&e.scrollTo(".head"),this.load(n.attr("href")))}}},{key:"_onPaginationPageSelect",value:function(t){var n=this,r=t.currentTarget,i=e(r).find(".link-current");i.has("input").length||(this.pageChange.priorValue=parseInt(i.html()),this.pageChange.maxValue=parseInt(this.$linkTotal.html()),i.addClass("active").html("<input type='number' min='1' max='".concat(this.pageChange.maxValue,"' value='").concat(this.pageChange.priorValue,"' />")),this.pageChange.$input=i.children().focus().on("blur",(function(){return n._changePage(!1)})).on("keydown",(function(e){27===e.keyCode&&n._changePage(!0)})).on("keypress",(function(e){13===e.keyCode&&n._changePage(!1)})))}},{key:"_onPageLoadByScroll",value:function(e,t,n){var r=this.$linkCurrent.html().split("-").map(parseInt),i=n.page,o=n.pages_count,a=i===o;r[1]=i,this.$linkCurrent.html(r.join("-")),this.$linkTitle.html(this.$linkTitle.data("text")),this.$linkTotal.html(o),this.$linkNext.attr("href",a?null:this.filters.compile(i+1)).toggleClass("disabled",a)}},{key:"_changePage",value:function(e){var t=parseInt(this.pageChange.$input.val())||1;this.$linkCurrent.removeClass("active"),e||t===this.pageChange.priorValue?this.$linkCurrent.html(this.pageChange.priorValue):(this.$linkCurrent.html(t),this.load(this.filters.compile(t))),this.pageChange.$input=null}},{key:"_fetch",value:(c=a.a.mark((function e(t){var n,i,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,-1===t.indexOf("".concat(window.location.protocol,"//").concat(window.location.host))&&(n="".concat(window.location.protocol,"//").concat(window.location.host).concat(t)),this._showAjax(),e.next=5,l.a.fetch(n);case 5:if(i=e.sent,o=i.data,c=i.status,this._hideAjax(),200===c){e.next=12;break}return 451===c?window.location.reload():s.flash.error(r.t("frontend.lib.please_try_again_later")),e.abrupt("return");case 12:window.location.href!==n&&decodeURI(window.location.href)!=n||this._processResponse(o,n);case 13:case"end":return e.stop()}}),e,this)})),m=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=c.apply(e,t);function o(e){h(i,n,r,o,a,"next",e)}function a(e){h(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return m.apply(this,arguments)})},{key:"_processResponse",value:function(t,n){var r=t.page,i=t.pages_count,o=t.content,a=t.title,s=t.notice,c=1===r,l=r===i,d=e(o);u.a.track(Object.clone(t.JS_EXPORTS),d),this.$content.data("dynamic")&&this.$content.addClass(p.a.PENDING_CLASS),this.$content.html(d).process(),t.title&&(e(".head h1").html(a),document.title="".concat(a)),t.notice&&e(".head .notice").html(s),this.$linkCurrent.html(r),this.$linkTotal.html(i),this.$linkPrev.attr("href",c?null:this.filters.compile(r-1)).toggleClass("disabled",c),this.$linkNext.attr("href",l?null:this.filters.compile(r+1)).toggleClass("disabled",l),this.$pagination.toggle(!l||!c),this.$content.trigger("ajax:success"),n&&("_gaq"in window&&window._gaq.push(["_trackPageview",n]),"yaCounter7915231"in window&&window.yaCounter7915231.hit(n))}},{key:"_showAjax",value:function(){this.$content.addClass("b-ajax")}},{key:"_hideAjax",value:function(){this.$content.removeClass("b-ajax")}}],i&&v(n.prototype,i),o&&v(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(),m(i.prototype,"load",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"load"),i.prototype),m(i.prototype,"_onPaginationLinkClick",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_onPaginationLinkClick"),i.prototype),m(i.prototype,"_onPaginationPageSelect",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_onPaginationPageSelect"),i.prototype),m(i.prototype,"_onPageLoadByScroll",[c.a],Object.getOwnPropertyDescriptor(i.prototype,"_onPageLoadByScroll"),i.prototype),i)}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/views/application/ban_form.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){this.$root.on("click","[data-reason]",this._click)}},{key:"_click",value:function(t){var n=t.currentTarget;e(n).closest(".b-form").find('[name="ban[reason]"]').val(e(n).data("reason")),e(".hide-to-spoiler").prop("checked",!!e(n).data("spoilered-reason")).trigger("change")}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/application/date_picker.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./app/packs/javascripts/views/application/view.js"),a=n("./app/packs/javascripts/utils/dayjs.js");function s(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(v,e);var t,r,o,d,f,h=p(v);function v(){return c(this,v),h.apply(this,arguments)}return t=v,r=[{key:"initialize",value:function(){var e=this;Promise.all([n.e("vendors"),n.e("pikaday")]).then(n.t.bind(null,"./node_modules/pikaday/css/pikaday.css",7)),this.initPromise=Promise.all([n.e("vendors"),n.e("pikaday")]).then(n.t.bind(null,"./app/packs/javascripts/vendor/async/pikaday.js",7)).then((function(t){return e._initPicker(t.default)}))}},{key:"set",value:(d=i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:t&&(r=Object(a.default)(t).format("YYYY-MM-DD")),this.root.value=r,n||this.$root.trigger("date:picked");case 5:case"end":return e.stop()}}),e,this)})),f=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=d.apply(e,t);function o(e){s(i,n,r,o,a,"next",e)}function a(e){s(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e,t){return f.apply(this,arguments)})},{key:"_initPicker",value:function(e){var t,n=this;new e({field:this.root,onSelect:function(e){return n.set(e)},firstDay:1,maxDate:new Date,i18n:this._i18n()}),this.root.value&&(t=Object(a.default)(this.root.value).toDate()),t&&this.set(t,!0),this.$root.on("keydown",(function(e){13===e.keyCode&&n.$root.trigger("date:picked")}))}},{key:"_i18n",value:function(){var e=Object(a.default)().localeData();return{months:e.months(),weekdays:e.weekdays(),weekdaysShort:e.weekdaysShort()}}}],r&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),v}(o.a)},"./app/packs/javascripts/views/application/shiki_editable.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return T}));var i,o,a=n("./node_modules/@babel/runtime/regenerator/index.js"),s=n.n(a),c=n("./node_modules/delay/index.js"),u=n.n(c),l=n("./node_modules/shiki-decorators/index.js"),p=n("./node_modules/shiki-utils/index.js"),d=n("./app/packs/javascripts/utils/get_selection.js"),f=n("./app/packs/javascripts/utils/axios.js"),h=n("./app/packs/javascripts/utils/animated.js"),v=n("./app/packs/javascripts/views/application/ban_form.js"),m=n("./app/packs/javascripts/views/application/shiki_view.js");function y(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},j.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function C(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var $=[".item-ignore",".item-quote",".item-reply",".item-edit",".item-summary",".item-offtopic",".item-cancel",".item-spoiler",".item-abuse"],q=[".item-summary",".item-offtopic",".item-spoiler",".item-abuse",".b-offtopic_marker"],S=".item-quote, .item-quote-mobile",E="frontend.dynamic_elements.shiki_editable",T=(i=Object(l.c)(150),o=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(y,t);var n,i,o,a,c,l,m=x(y);function y(){return g(this,y),m.apply(this,arguments)}return n=y,i=[{key:"_initialize",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=j(P(y.prototype),"_initialize",this)).call.apply(t,[this].concat(r)),e($.join(","),this.$inner).on("click",this._closeAside),this._bindDeleteControls(),this._bindEditControls(),this._bindModerationControls(),this._bindAbuseRequestControls(),this._bindFaye(),this._bindAutoExpand(),e(".item-mobile",this.$inner).on("click",this._toggleMobileControls),e(".b-new_marker",this.$inner).on("click",this._markRead)}},{key:"_afterInitialize",value:function(){j(P(y.prototype),"_afterInitialize",this).call(this),this.$body&&(this.$body.on("mouseup",this.setSelection),e(S,this.$inner).on("click",this._itemQuote),e(".item-reply",this.$inner).on("click",this._itemReply))}},{key:"reloadUrl",get:function(){return"/".concat(this.type,"s/").concat(this.node.id)}},{key:"isGenerated",get:function(){return!!this.$node.data("generated")}},{key:"$editorPlacement",get:function(){return this.$inner}},{key:"$moderationForm",get:function(){return e(".moderation-ban-form",this.$inner)}},{key:"setSelection",value:function(){this.throttledSetSelection()}},{key:"throttledSetSelection",value:(l=_(s.a.mark((function t(){var n,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(d.b)(),r=Object(d.a)(),n||r){t.next=4;break}return t.abrupt("return");case 4:return e(S).removeClass("is-active"),this.$node.data({selected_text:n,selected_html:r}),i=e(S,this.$inner).addClass("is-active"),Object(p.isMobile)()&&e(S,this.$inner).parent().find("aside.markers").children().each((function(t,n){"block"==e(n).css("display")&&(e(n).hide(),e(n).addClass("temporarily-hidden-markers"))})),t.next=10,u()();case 10:e(document).one("click",_(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(d.b)().length){t.next=4;break}return i.removeClass("is-active"),e(".temporarily-hidden-markers").show().removeClass("temporarily-hidden-markers"),t.abrupt("return");case 4:return t.next=6,u()(250);case 6:Object(d.b)().length||(e(".temporarily-hidden-markers").show().removeClass("temporarily-hidden-markers"),i.removeClass("is-active"));case 7:case"end":return t.stop()}}),t)}))));case 11:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"_bindDeleteControls",value:function(){e(".item-delete",this.$inner).on("click",this._showDeleteControls),e(".item-delete-confirm",this.$inner).on("ajax:loading",this._submitDelete),e(".item-delete-confirm",this.$inner).on("ajax:success",this._redirectAfterDeleted),e(".item-delete-cancel",this.$inner).on("click",this._hideDeleteControls)}},{key:"_bindEditControls",value:function(){e(".item-edit",this.$inner).on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._edit)}},{key:"_bindModerationControls",value:function(){e(".item-ban",this.$inner).on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._showModerationForm),e(".item-moderation",this.$inner).on("click",this._showModrationControls),e(".item-moderation-cancel",this.$inner).on("click",this._hideModerationControls),this.$inner.one("mouseover",this._deactivateInaccessibleButtons),e(".item-mobile",this.$inner).one("click",this._deactivateInaccessibleButtons)}},{key:"_bindAbuseRequestControls",value:function(){e(q.join(","),this.$inner).on("ajax:before",this._shade).on("ajax:complete",this._unshade).on("ajax:success",this._processAbuseRequest),e(".item-spoiler, .item-abuse",this.$inner).on("ajax:before",this._markSpoilerOrAbuse)}},{key:"_bindFaye",value:function(){this.on("faye:".concat(this.type,":updated"),this._fayeUpdated),this.on("faye:".concat(this.type,":deleted"),this._fayeDeleted)}},{key:"_bindAutoExpand",value:function(){var e=this;this.$inner.on("ajax:before",(function(){e.$inner.next(".b-height_shortener").click()}))}},{key:"_activateAppearMarker",value:function(){this.$inner.children(".b-appear_marker").addClass("active"),this.$inner.children(".markers").find(".b-new_marker").addClass("active")}},{key:"_closeAside",value:function(){e(".item-mobile",this.$inner).is(".selected")&&e("> .item-mobile",this.$inner).click(),e(".main-controls",this.$inner).show(),e(".delete-controls",this.$inner).hide(),e(".moderation-controls",this.$inner).hide()}},{key:"_edit",value:function(t,n,r,i){var o=this;this.$inner.addClass("is-editing");var a=e(n).process(),s=this.$editorPlacement.children().detach();a.appendTo(this.$editorPlacement);var c=a.find(".shiki_editor-selector").view();c.initialization.promise.then((function(){return c.focus()})),a.find(".cancel").on("click",(function(){c.destroy(),a.remove(),o.$editorPlacement.append(s),o.$inner.removeClass("is-editing")})),a.on("ajax:success",(function(e,t){return o._replace(t.content,t.JS_EXPORTS,!0)}))}},{key:"_showDeleteControls",value:function(){e(".main-controls",this.$inner).hide(),e(".delete-controls",this.$inner).show()}},{key:"_hideDeleteControls",value:function(){this._closeAside()}},{key:"_submitDelete",value:(c=_(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)(this.node);case 2:this.$node.remove();case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"_redirectAfterDeleted",value:function(){}},{key:"_showModrationControls",value:function(){e(".main-controls",this.$inner).hide(),e(".moderation-controls",this.$inner).show()}},{key:"_hideModerationControls",value:function(){this._closeAside()}},{key:"_deactivateInaccessibleButtons",value:function(){this.model.can_edit||e(".item-edit",this.$inner).addClass("hidden"),this.model.can_destroy||e(".item-delete",this.$inner).addClass("hidden"),window.SHIKI_USER.isModerator?(e(".item-abuse",this.$inner).addClass("hidden"),e(".item-spoiler",this.$inner).addClass("hidden")):e(".item-ban",this.$inner).addClass("hidden")}},{key:"_processAbuseRequest",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&p.flash.notice(r.t("".concat(E,".your_request_will_be_considered"))),this._hideModerationControls()}},{key:"_showModerationForm",value:(a=_(s.a.mark((function t(n,r){var i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new v.a(r),this.$moderationForm.remove(),e('<aside class="moderation-ban-form"></aside>').insertBefore(this.$inner.find("aside.buttons")),this.$moderationForm.html(i.$node),e(".cancel",this.$moderationForm).on("click",this._hideModerationForm),e("form",this.$moderationForm).on("ajax:success",this._processModerationRequest),this.$inner.addClass("is-moderating"),this._closeAside(),t.next=10,u()(250);case 10:this.$moderationForm.find("input[type=text]").first().focus();case 11:case"end":return t.stop()}}),t,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_hideModerationForm",value:function(){this.$moderationForm.hide()}},{key:"_processModerationRequest",value:function(e,t){this._replace(t.content,t.JS_EXPORTS,!0)}},{key:"_toggleMobileControls",value:function(){this.$node.toggleClass("aside-expanded"),e(".item-mobile",this.$inner).toggleClass("selected"),this.$node.find(">.b-height_shortener").click()}},{key:"_markRead",value:function(){var t=e(".b-new_marker.active",this.$inner);if(t.hasClass("off"))t.removeClass("off").data("click_activated",!0).trigger("reappear"),f.a.post(t.data("reappear_url"),{ids:this.$node.attr("id")});else if(t.data("click_activated"))t.addClass("off").trigger("disappear"),f.a.post(t.data("appear_url"),{ids:this.$node.attr("id")});else{var n=e(".b-appear_marker.active",this.$inner);n.trigger("appear",[n,!0])}}},{key:"_itemQuote",value:function(){var e={id:this.node.id,type:this.type,userId:this.isGenerated?null:this.$node.data("user_id"),nickname:this.isGenerated?null:String(this.$node.data("user_nickname")),text:String(this.$node.data("selected_text")),html:String(this.$node.data("selected_html"))},t="function"===typeof this._isOfftopic&&this._isOfftopic();this.$node.trigger("comment:reply",[e,t])}},{key:"_itemReply",value:function(){if(this.isGenerated)this.$node.trigger("comment:reply");else{var e={id:this.node.id,type:this.type,userId:this.$node.data("user_id"),text:String(this.$node.data("user_nickname")),url:this.$node.data("url")||"/".concat(this.type,"s/").concat(this.node.id)},t="function"===typeof this._isOfftopic&&this._isOfftopic();this.$node.trigger("comment:reply",[e,t])}}},{key:"_markSpoilerOrAbuse",value:function(t){var n=t.currentTarget,r=prompt(e(n).data("reason-prompt"));return null!=r&&(e(n).data({form:{reason:r}}),!0)}},{key:"_fayeUpdated",value:function(t,n){var i=this;e(".was_updated",this.$inner).remove();var o="message"===this.type?"".concat(this.typeLabel," ").concat(r.t("frontend.shiki_editable.message_changed")):"".concat(this.typeLabel," ").concat(r.t("frontend.shiki_editable.changed"));return e("<div class='was_updated'><div><span>".concat(o,"</span>")+"<a class='actor b-user16' href='/".concat(n.actor,"'>")+"<img src='".concat(n.actor_avatar,"' srcset='").concat(n.actor_avatar_2x," 2x' />")+"<span>".concat(n.actor,"</span></a>.&nbsp;</div>")+"<div>".concat(r.t("frontend.shiki_editable.click_to_reload"),"</div></div>")).appendTo(this.$inner).on("click",(function(t){var n=t.target;e(n).closest(".actor").exists()||i._reload()})),!1}},{key:"_fayeDeleted",value:function(e,t){var n="message"===this.type?"".concat(this.typeLabel," ").concat(r.t("frontend.shiki_editable.message_deleted")):"".concat(this.typeLabel," ").concat(r.t("frontend.shiki_editable.deleted"));return this._replace("<div class='b-comment-info b-".concat(this.type,"'><span>").concat(n,"</span>")+"<a class='b-user16' href='/".concat(t.actor,"'><img src='").concat(t.actor_avatar,"' ")+"srcset='".concat(t.actor_avatar_2x," 2x' /><span>").concat(t.actor,"</span></a></div>")),!1}}],i&&b(n.prototype,i),o&&b(n,o),Object.defineProperty(n,"prototype",{writable:!1}),y}(m.a),C(o.prototype,"isGenerated",[l.d],Object.getOwnPropertyDescriptor(o.prototype,"isGenerated"),o.prototype),C(o.prototype,"setSelection",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"setSelection"),o.prototype),C(o.prototype,"throttledSetSelection",[i],Object.getOwnPropertyDescriptor(o.prototype,"throttledSetSelection"),o.prototype),C(o.prototype,"_closeAside",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_closeAside"),o.prototype),C(o.prototype,"_edit",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_edit"),o.prototype),C(o.prototype,"_showDeleteControls",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_showDeleteControls"),o.prototype),C(o.prototype,"_hideDeleteControls",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_hideDeleteControls"),o.prototype),C(o.prototype,"_submitDelete",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_submitDelete"),o.prototype),C(o.prototype,"_redirectAfterDeleted",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_redirectAfterDeleted"),o.prototype),C(o.prototype,"_showModrationControls",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_showModrationControls"),o.prototype),C(o.prototype,"_hideModerationControls",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_hideModerationControls"),o.prototype),C(o.prototype,"_deactivateInaccessibleButtons",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_deactivateInaccessibleButtons"),o.prototype),C(o.prototype,"_processAbuseRequest",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_processAbuseRequest"),o.prototype),C(o.prototype,"_showModerationForm",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_showModerationForm"),o.prototype),C(o.prototype,"_hideModerationForm",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_hideModerationForm"),o.prototype),C(o.prototype,"_processModerationRequest",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_processModerationRequest"),o.prototype),C(o.prototype,"_toggleMobileControls",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_toggleMobileControls"),o.prototype),C(o.prototype,"_markRead",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_markRead"),o.prototype),C(o.prototype,"_itemQuote",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_itemQuote"),o.prototype),C(o.prototype,"_itemReply",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_itemReply"),o.prototype),C(o.prototype,"_markSpoilerOrAbuse",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_markSpoilerOrAbuse"),o.prototype),C(o.prototype,"_fayeUpdated",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_fayeUpdated"),o.prototype),C(o.prototype,"_fayeDeleted",[l.a],Object.getOwnPropertyDescriptor(o.prototype,"_fayeDeleted"),o.prototype),o)}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/views/application/shiki_modal.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n.d(t,"a",(function(){return u}));var u=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,t);var n,s,c,u=a(l);function l(){return r(this,l),u.apply(this,arguments)}return n=l,(s=[{key:"initialize",value:function(){var t=this;this.$modal=e('<div class="b-modal"><div class="inner"></div></div>'),this.$modal.find(".inner").append(this.$root).process(),this.$modal.css("top",e(window).scrollTop()),this.$modal.children().css("top",e(window).scrollTop()),this.$modal.appendTo(document.body),this.checkCancel=this._onKeyPress.bind(this),e(window).on("keydown",this.checkCancel),this.$modal.on("click",".cancel",(function(){return t.close()})),this._shade()}},{key:"close",value:function(){e(window).off("keydown",this.checkCancel),this.$modal.remove(),this._unshade()}},{key:"_shade",value:function(){var t=this;e(".b-shade").addClass("active").on("click",(function(){return t.close()}))}},{key:"_unshade",value:function(){var t=this;e(".b-shade").removeClass("active").off("click",(function(){return t.close()}))}},{key:"_onKeyPress",value:function(e){27===e.keyCode&&this.close()}}])&&i(n.prototype,s),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/application/shiki_view.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/delay/index.js"),s=n.n(a),c=n("./node_modules/shiki-decorators/index.js"),u=n("./app/packs/javascripts/views/application/view.js"),l=n("./app/packs/javascripts/utils/axios.js"),p=n("./app/packs/javascripts/utils/check_height.js"),d=n("./app/packs/javascripts/utils/load_image.js");function f(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,s,"next",e)}function s(e){f(o,r,i,a,s,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},y.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var x=[".b-spoiler",".b-spoiler_block"],O=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(_,t);var n,r,i,a,c,u,f=b(_);function _(){return v(this,_),f.apply(this,arguments)}return n=_,r=[{key:"_initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=y(w(_.prototype),"_initialize",this)).call.apply(e,[this].concat(n)),this.$node.removeClass("unprocessed"),this.$inner=this.$(">.inner"),this._assignCheckHeightLimits()}},{key:"destroy",value:function(){this.$node.off(),y(w(_.prototype),"destroy",this).call(this)}},{key:"$checkHeightNode",get:function(){return this.$inner}},{key:"_scheduleCheckHeight",value:(u=h(o.a.mark((function e(){var t,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>0&&void 0!==r[0]&&r[0]||""===this.$checkHeightNode.data("check_height")){e.next=3;break}return e.abrupt("return");case 3:return t=this.$checkHeightNode.find("img").toArray(),(n=this.$checkHeightNode.find(x.join(","))).length&&(t=t.subtract(n.find("img").toArray())),e.next=8,s()(10);case 8:if(!this._checkHeight()){e.next=10;break}return e.abrupt("return");case 10:if(!t.length){e.next=15;break}return e.next=14,Object(d.a)(t);case 14:this._checkHeight();case 15:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"_assignCheckHeightLimits",value:function(){this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT=450,this.CHECK_HEIGHT_COLLAPSED_HEIGHT=150,this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT=0}},{key:"_checkHeight",value:function(){return!!window.SHIKI_USER.isCommentsAutoCollapsed&&Object(p.a)(this.$checkHeightNode,{maxHeight:this.CHECK_HEIGHT_MAX_PREVIEW_HEIGHT,collapsedHeight:this.CHECK_HEIGHT_COLLAPSED_HEIGHT,placeholderHeight:this.CHECK_HEIGHT_PLACEHOLDER_HEIGHT})}},{key:"_shade",value:function(){return this.$inner.addClass("b-ajax")}},{key:"_unshade",value:function(){return this.$inner.removeClass("b-ajax")}},{key:"_reload",value:(c=h(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._shade(),e.next=3,l.a.get(this.reloadUrl);case 3:t=e.sent,n=t.data,this._replace(n.content,n.JS_EXPORTS,this.$inner!==this.$node);case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"reloadUrl",get:function(){return this.$node.data("url")}},{key:"_replace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.replace(" data-check_height","");n?this._replaceInner(r,t):this._replaceNode(r,t)}},{key:"_replaceInner",value:(a=h(o.a.mark((function t(n,r){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e(n).children(".inner"),this.destroy(),this.$inner.replaceWith(i),this.$node.addClass("to-process").process(r),this.$(">.inner").yellowFade();case 5:case"end":return t.stop()}}),t,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"_replaceNode",value:function(t,n){var r=e(t);this.$node.replaceWith(r),r.process(n),r.yellowFade()}}],r&&m(n.prototype,r),i&&m(n,i),Object.defineProperty(n,"prototype",{writable:!1}),_}(u.a),k(r.prototype,"$checkHeightNode",[c.d],Object.getOwnPropertyDescriptor(r.prototype,"$checkHeightNode"),r.prototype),k(r.prototype,"_checkHeight",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_checkHeight"),r.prototype),k(r.prototype,"_shade",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_shade"),r.prototype),k(r.prototype,"_unshade",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_unshade"),r.prototype),k(r.prototype,"_reload",[c.a],Object.getOwnPropertyDescriptor(r.prototype,"_reload"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/application/view.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r,i=n("./node_modules/shiki-decorators/index.js");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,c,u,l,p,d,f=(r=function(){function t(e){o(this,t),this._initialize(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.initialize.apply(this,r),this._afterInitialize()}var n,r,i;return n=t,r=[{key:"destroy",value:function(){}},{key:"on",value:function(){var e;(e=this.$node).on.apply(e,arguments)}},{key:"trigger",value:function(){var e;(e=this.$node).trigger.apply(e,arguments)}},{key:"$",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){return e(t,this.$node)}))},{key:"html",value:function(e){return this.$node.html(e)}},{key:"_initialize",value:function(e){this._setRoot(e)}},{key:"_afterInitialize",value:function(){}},{key:"_setRoot",value:function(t){this.$node=e(t),this.$root=this.$node,this.node=this.$node[0],this.root=this.node,this.$node.view(this)}}],r&&a(n.prototype,r),i&&a(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(),s=r.prototype,c="on",u=[i.b],l=Object.getOwnPropertyDescriptor(r.prototype,"on"),p=r.prototype,d={},Object.keys(l).forEach((function(e){d[e]=l[e]})),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=u.slice().reverse().reduce((function(e,t){return t(s,c,e)||e}),d),p&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(p):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(s,c,d),d=null),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/contests/match.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/delay/index.js"),a=n.n(o),s=n("./app/packs/javascripts/views/application/view.js"),c=n("./app/packs/javascripts/utils/in_new_tab.js");function u(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var m="left",y="right",_="abstain",g=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,t);var n,r,o,s,h,v=f(g);function g(){return l(this,g),v.apply(this,arguments)}return n=g,r=[{key:"initialize",value:function(t,n){var r=this;this.roundView=n,this.model=this.$root.data("model"),this.vote=t||{},this.$left=this.$('.match-member[data-variant="left"]'),this.$right=this.$('.match-member[data-variant="right"]'),this.$(".next-match").on("click",(function(){return r._toNextMatch()})),this.$(".prev-match").on("click",(function(){return r._toPrevMatch()})),this.$(".action .to-next-not-voted").on("click",(function(){return r._toNextNotVotedMatch()})),this.$(".match-member img").on("click",(function(e){return r._voteClick(e)})),this.$(".match-member").on("ajax:success",(function(e){return r._voteMember(e)})),this.$(".action .abstain").on("ajax:success",(function(){return r._abstain()})),this.isStarted&&(this.$(".match-member .b-catalog_entry").hover((function(t){r.vote.vote||(r.$(".match-member").addClass("unhovered"),e(t.target).closest(".match-member").removeClass("unhovered").addClass("hovered"))}),(function(){return r.$(".match-member").removeClass("hovered unhovered")})),this._setVote(this.vote.vote)),this.initialized=!0}},{key:"isStarted",get:function(){return"started"===this.model.state}},{key:"_toNextMatch",value:function(){this.roundView.switchMatch(this.roundView.nextMatchId(this.model.id))}},{key:"_toPrevMatch",value:function(){this.roundView.switchMatch(this.roundView.prevMatchId(this.model.id))}},{key:"_toNextNotVotedMatch",value:function(){this.roundView.switchMatch(this._nextMatchId())}},{key:"_abstain",value:function(){this._vote(_)}},{key:"_voteMember",value:function(t){var n=t.target;e(n).find(".b-catalog_entry").yellowFade(),this._vote(e(n).data("variant"))}},{key:"_voteClick",value:function(t){Object(c.a)(t)||(t.preventDefault(),t.stopImmediatePropagation(),this.isStarted&&e(t.target).closest(".match-member").callRemote())}},{key:"_vote",value:(s=i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._setVote(t),!this._nextMatchId()){e.next=5;break}return e.next=4,a()(500);case 4:this._toNextNotVotedMatch();case 5:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){u(i,n,r,o,a,"next",e)}function a(e){u(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return h.apply(this,arguments)})},{key:"_setVote",value:function(e){this.roundView.setVote(this.model.id,e),this.vote.vote=e,this.$left.toggleClass("voted",e===m).toggleClass("unvoted",!(!e||e===m)),this.$right.toggleClass("voted",e===y).toggleClass("unvoted",!(!e||e===y)),this.$(".invitation").toggle(!e),this.$(".vote-voted").toggle(!(!e||e===_)),this.$(".vote-abstained").toggle(e===_),this.$(".thanks").toggle(!(!e||this._nextMatchId())),this.$(".action .abstain").toggleClass("hidden",e===_),this.$(".action .to-next-not-voted").toggleClass("hidden",!this._nextMatchId())}},{key:"_nextMatchId",value:function(){return this.roundView.nextNotVotedMatchId(this.model.id)}}],r&&p(n.prototype,r),o&&p(n,o),Object.defineProperty(n,"prototype",{writable:!1}),g}(s.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/contests/round.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n("./app/packs/javascripts/utils/axios.js"),i=n("./app/packs/javascripts/views/application/view.js"),o=n("./app/packs/javascripts/views/contests/match.js");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,t);var n,i,l,p=u(d);function d(){return a(this,d),p.apply(this,arguments)}return n=d,(i=[{key:"initialize",value:function(t){var n=this;this.model=this.$root.data("model"),this.votes=t||[],this.$matchContainer=this.$(".match-container"),this._setVotes(this.votes),this.switchMatch(this._initialMatchId()),this.$(".match-day .match-link").on("click",(function(t){return n.switchMatch(e(t.currentTarget).data("id"))}))}},{key:"switchMatch",value:function(e){var t=this,n=this._$matchLine(e);this.$matchContainer.addClass("b-ajax"),r.a.get(n.data("match_url")).then((function(r){t.$(".match-link.active").removeClass("active"),n.addClass("active"),t._matchLoaded(e,r.data)}))}},{key:"setVote",value:function(e,t){this._$matchLine(e).removeClass("voted-left voted-rigth voted-abstain").addClass("voted-".concat(t))}},{key:"nextMatchId",value:function(e){var t=this.model.matches.findIndex((function(t){return t.id===e}));return(this.model.matches[t+1]||this.model.matches.first()).id}},{key:"prevMatchId",value:function(e){var t=this.model.matches.findIndex((function(t){return t.id===e}));return(this.model.matches[t-1]||this.model.matches.last()).id}},{key:"nextNotVotedMatchId",value:function(e){var t=this.votes.find((function(t){return t.match_id!==e&&!t.vote}));return t?t.match_id:null}},{key:"_setVotes",value:function(e){var t=this;Object.forEach(e,(function(e){e.vote&&t.setVote(e.match_id,e.vote)}))}},{key:"_$matchLine",value:function(t){return e(".match-day .match-link[data-id=".concat(t,"]"))}},{key:"_initialMatchId",value:function(){return this.$root.data("match_id")||this.$(".match-day .match-link.started:not(.voted-left):not(.voted-right):not(.voted-abstain)").first().data("id")||this.$(".match-day .match-link.started").first().data("id")||this.$(".match-day .match-link").first().data("id")}},{key:"_matchLoaded",value:function(t,n){var r=e(n).process(),i=r.filter(".b-contest_match"),a=this.votes.find((function(e){return e.match_id===t}));this.$matchContainer.removeClass("b-ajax").html(r),new o.a(i,a,this);var s=this.$(".match-members .match-member").first();s.is(":appeared")||e.scrollTo(s);var c=i.data("page_url");c&&window.history.replaceState({turbolinks:!0,url:c},"",c)}}])&&s(n.prototype,i),l&&s(n,l),Object.defineProperty(n,"prototype",{writable:!1}),d}(i.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/polls/view.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./app/packs/javascripts/utils/axios.js"),s=n("./app/packs/javascripts/views/application/view.js"),c=n("./app/packs/javascripts/utils/jst.js"),u=n("./node_modules/shiki-decorators/index.js");function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var _=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(m,t);var n,r,i,s,u,v=h(m);function m(){return p(this,m),v.apply(this,arguments)}return n=m,r=[{key:"initialize",value:function(e){this.model=e,this._render(),this.canVote&&(this.$vote=this.$(".poll-actions .vote"),this.$abstain=this.$(".poll-actions .abstain"),this._toggleActions(),this.$(".b-radio").on("click",this._radioClick),this.$vote.on("click",this._voteVariant),this.$abstain.on("click",this._abstain))}},{key:"canVote",get:function(){return window.SHIKI_USER.isSignedIn&&"started"===this.model.state&&!this.model.vote.is_abstained&&!this.model.vote.variant_id}},{key:"checkedRadio",get:function(){return this.$("input[type=radio]:checked")[0]}},{key:"_radioClick",value:function(t){if("A"!==t.target.tagName){t.preventDefault();var n=e(t.currentTarget).find("input");n.prop({checked:!n.prop("checked")}),this._toggleActions()}}},{key:"_voteVariant",value:function(){var e=parseInt(this.checkedRadio.value),t=this.model.variants.find((function(t){return t.id===e}));this.model.vote={is_abstained:!1,variant_id:t.id},t.votes_total+=1,this._vote(t.vote_for_url)}},{key:"_abstain",value:function(){this.model.vote={is_abstained:!0,variant_id:null},this._vote(this.model.vote_abstain_url)}},{key:"_render",value:function(){var e=this.$root;this._setRoot(c.a["polls/poll"]({model:this.model,can_vote:this.canVote,bar_percent:this._variantPercent,bar_class:this._variantClass})),e.replaceWith(this.$root)}},{key:"_vote",value:(s=o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$root.addClass("b-ajax"),e.next=3,a.a.post(t);case 3:this.$root.removeClass("b-ajax"),this._render();case 5:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function o(e){l(i,n,r,o,a,"next",e)}function a(e){l(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return u.apply(this,arguments)})},{key:"_toggleActions",value:function(){this.checkedRadio?(this.$abstain.addClass("hidden"),this.$vote.removeClass("hidden")):(this.$abstain.removeClass("hidden"),this.$vote.addClass("hidden"))}},{key:"_variantPercent",value:function(e){var t=this.model.variants.sum("votes_total");return 0===t?0:(100*e.votes_total/t).round(2)}},{key:"_variantClass",value:function(e){var t=this._variantPercent(e);return t<=80&&t>60?"s1":t<=60&&t>30?"s2":t<=30?"s1":"s0"}}],r&&d(n.prototype,r),i&&d(n,i),Object.defineProperty(n,"prototype",{writable:!1}),m}(s.a),y(r.prototype,"_radioClick",[u.a],Object.getOwnPropertyDescriptor(r.prototype,"_radioClick"),r.prototype),y(r.prototype,"_voteVariant",[u.a],Object.getOwnPropertyDescriptor(r.prototype,"_voteVariant"),r.prototype),y(r.prototype,"_abstain",[u.a],Object.getOwnPropertyDescriptor(r.prototype,"_abstain"),r.prototype),y(r.prototype,"_variantPercent",[u.a],Object.getOwnPropertyDescriptor(r.prototype,"_variantPercent"),r.prototype),y(r.prototype,"_variantClass",[u.a],Object.getOwnPropertyDescriptor(r.prototype,"_variantClass"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/search/autocomplete_engine.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n("./app/packs/javascripts/views/search/index_engine.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=a(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},o.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var p=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,t);var n,r,a,u=c(p);function p(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=u.call(this)).fetchUrl=e,n._$content=t,n.isAutocomplete=!0,n}return n=p,(r=[{key:"$content",get:function(){return this._$content}},{key:"phrase",get:function(){return this._phrase},set:function(e){this._phrase=e,this._buildSearchPromise(),Object.isEmpty(this.phrase)?this._resolveSearchPromise():(this._showAjax(),this.debouncedSearch(this.phrase))}},{key:"_responseToHtml",value:function(t){var n=e(o(l(p.prototype),"_responseToHtml",this).call(this,t));return n.find("a").changeTag("span"),n.find(".linkeable, .bubbled").removeClass("linkeable bubbled"),n.filter(".b-db_entry-variant-list_item").each((function(t,n){n.classList.add("linkeable"),n.setAttribute("href",e(n).find(".name .b-link").attr("href"))})),n}},{key:"_searchUrl",value:function(e){return this._url(this.fetchUrl,e)}},{key:"_changeUrl",value:function(e){}}])&&i(n.prototype,r),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),p}(r.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/search/collection.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./node_modules/tiny-uri/dist/tiny-uri.js"),a=n("./node_modules/throttle-debounce/esm/index.js"),s=n("./node_modules/shiki-utils/index.js"),c=n("./app/packs/javascripts/services/ajax_cacher.js"),u=n("./app/packs/javascripts/views/application/view.js"),l=n("./app/packs/javascripts/utils/jst.js");function p(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(g,t);var n,r,u,m,y,_=v(g);function g(){return d(this,g),_.apply(this,arguments)}return n=g,r=[{key:"initialize",value:function(){var e=this;this.$input=this.$(".field input"),this.$clear=this.$(".field .clear"),this.isActive=!1,this.debouncedSearch=Object(a.a)(250,(function(t){return e._search(t)})),this._phrase=this.inputSearchPhrase,this.$input.on("change blur paste",(function(){return e._onChange()})),this.$input.on("keyup",(function(t){return e._onKeyup(t)})),this.$clear.on("click",(function(){return e._clearPhrase(!0)}))}},{key:"$collection",get:function(){return this.$(".search-results")}},{key:"inputSearchPhrase",get:function(){return this.$input.val()}},{key:"phrase",get:function(){return this._phrase},set:function(e){var t=e.trim();if(this._phrase.trim()!==t){var n=this._phrase;this._phrase=e,void 0!==n&&(this._activate(),this.debouncedSearch(t)),this.$input.toggleClass("has-value",!Object.isEmpty(this._phrase))}}},{key:"_onKeyup",value:function(e){27!==e.keyCode?this.phrase=this.inputSearchPhrase:this._cancel()}},{key:"_onChange",value:function(){this.phrase=this.inputSearchPhrase}},{key:"_clearPhrase",value:function(e){this.$input.val("").trigger("change"),e&&this.$input.focus()}},{key:"_cancel",value:function(){Object.isEmpty(this.phrase)?this._deactivate():this._clearPhrase()}},{key:"_activate",value:function(){this._showAjax(),this.isActive=!0}},{key:"_deactivate",value:function(){this.$input.blur(),this.isActive=!1}},{key:"_search",value:(m=i.a.mark((function t(n){var r,o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.fetch(this._searchUrl(n));case 2:if(r=t.sent,o=r.data,a=r.status,this._hideAjax(),200===a){t.next=9;break}return s.flash.error(e.t("frontend.lib.please_try_again_later")),t.abrupt("return");case 9:n===this.inputSearchPhrase.trim()&&(this._changeUrl(this._displayUrl(n)),this._processResponse(o));case 10:case"end":return t.stop()}}),t,this)})),y=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=m.apply(e,t);function o(e){p(i,n,r,o,a,"next",e)}function a(e){p(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return y.apply(this,arguments)})},{key:"_changeUrl",value:function(e){window.history.replaceState({turbolinks:!0,url:e},"",e)}},{key:"_processResponse",value:function(e){var t;t=e.content?e.content+(e.postloader||""):Object.isEmpty(this.phrase)?"":l.a["search/nothing_found"]({isAutocomplete:!1}),this.$collection.html(t).process(e.JS_EXPORTS)}},{key:"_searchUrl",value:function(e){return this._url(e,"search")}},{key:"_displayUrl",value:function(e){return this._url(e,"display")||this._url(e,"search")}},{key:"_url",value:function(e,t){var n=this.$root.data("".concat(t,"_url"));return n?new o.a(n).query.set("phrase",e||null).toString():null}},{key:"_showAjax",value:function(){this.$collection.addClass("b-ajax")}},{key:"_hideAjax",value:function(){this.$collection.removeClass("b-ajax")}}],r&&f(n.prototype,r),u&&f(n,u),Object.defineProperty(n,"prototype",{writable:!1}),g}(u.a)}).call(this,n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/views/search/global.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return $}));var r,i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/turbolinks/dist/turbolinks.js"),s=n.n(a),c=n("./node_modules/tiny-uri/dist/tiny-uri.js"),u=n("./node_modules/delay/index.js"),l=n.n(u),p=n("./node_modules/shiki-decorators/index.js"),d=n("./app/packs/javascripts/views/application/view.js"),f=n("./app/packs/javascripts/views/search/autocomplete_engine.js"),h=n("./app/packs/javascripts/views/search/index_engine.js"),v=n("./node_modules/shiki-utils/index.js"),m=n("./app/packs/javascripts/utils/global_handler.js"),y=n("./app/packs/javascripts/utils/jst.js");function _(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function O(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var P=".b-db_entry-variant-list_item",C="".concat(P,", .search-mode"),$=(r=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(d,t);var n,r,i,a,u,p=w(d);function d(){return g(this,d),p.apply(this,arguments)}return n=d,r=[{key:"initialize",value:function(e){var t=this,n=e.showMobileSearch,r=e.hideMobileSearch;this.isActive=!1,this.isStubbedSearchMode=!1,this.showMobileSearch=n,this.hideMobileSearch=r,this.$input=this.$(".field input"),this.$outerContent=this.$root.find(".search-results"),this.$content=this.$outerContent.find(".inner"),this._phrase=this.inputSearchPhrase,this.currentMode=this.hasIndex?"index":this.$root.data("default-mode")||"anime",m.a.on("slash",this._onGlobalSlash),this.$input.on("focus",(function(){return t._activate()})).on("change blur paste keyup",(function(){return t.phrase=t.inputSearchPhrase})).on("blur",this._onBlur),this.$(".field .clear").on("click",(function(){return t._clearPhrase(!0)})),this.$content.on("mousedown",".search-mode",(function(e){var n=e.currentTarget;t._selectItem(n)})).on("mouseup",".search-mode",(function(){t.$input.focus()})).on("focus mousemove",P,(function(e){var n=e.currentTarget;t.currentItem!==n&&t._selectItem(n,!1)})).on("click",P,(function(e){t.isStubbedSearchMode&&(e.preventDefault(),t.pick(e.currentTarget))})).on("scroll",this._applyShade)}},{key:"hasIndex",get:function(){return!!e(".b-search-results").length&&!this.isStubbedSearchMode}},{key:"currentMode",get:function(){return this._currentMode},set:function(e){this._currentMode=e,this.isIndexMode?this.searchEngine=new h.a:this.searchEngine=new f.a(this.$node.data("autocomplete_".concat(this.currentMode,"_url")),this.$content)}},{key:"isIndexMode",get:function(){return"index"===this.currentMode}},{key:"$activeItem",get:function(){return this.$content.find(C).filter(".active")}},{key:"isSearching",get:function(){return!Object.isEmpty(this.phrase)}},{key:"phrase",get:function(){return this._phrase},set:function(e){var t=e.trim();if(this._phrase.trim()!==t){var n=this._phrase;if(this._phrase=e,this.$input[0].value!==e&&(this.$input[0].value=e),this.$input.toggleClass("has-value",!Object.isEmpty(this.phrase)),void 0!==n){if(this.phrase){var r=this.searchEngine.search(t);r?r.then(this._applyShade):this._applyShade()}else this.searchEngine.cancel(),this._renderModes(),this._applyShade();this._toggleGlobalSearch()}}}},{key:"inputSearchPhrase",get:function(){return this.$input.val()}},{key:"focus",value:function(){Object(v.isMobile)()&&this.showMobileSearch(),this.$input.focus()}},{key:"pick",value:function(e){}},{key:"cancel",value:function(){this._deactivate(),Object(v.isMobile)()&&this.hideMobileSearch()}},{key:"_activate",value:function(){this.isActive||(this.isActive=!0,this._toggleGlobalSearch(),this._renderModes(),m.a.on("enter",this._onEnter).on("up",this._onMoveUp).on("down",this._onMoveDown).on("esc",this._onEsc).on("focus",this._tryCloseOnFocus))}},{key:"_deactivate",value:function(){this.isActive&&(this.isActive=!1,this._toggleGlobalSearch(),this.isIndexMode||this.$input.val(""),this.$input.is(":focus")&&this.$input.blur(),m.a.off("enter",this._onEnter).off("esc",this._onEsc).off("up",this._onMoveUp).off("down",this._onMoveDown).off("focus",this._tryCloseOnFocus))}},{key:"_renderModes",value:function(){this.$content.html(y.a["search/options"]({currentMode:this.currentMode,hasIndex:this.hasIndex}))}},{key:"_clearPhrase",value:function(e){this.phrase="",e&&this.$input.focus()}},{key:"_selectItem",value:function(t,n){this._deselectItems(),this.isSearching?this.currentItem=t:this.currentMode=e(t).data("mode"),t.setAttribute("tabindex",0),t.classList.add("active");var r=this.$content.find("".concat(P,":focus"))[0];r&&r!==t&&e(t).focus(),n&&this._scrollToItem(e(t))}},{key:"_deselectItems",value:function(){var e=this.$activeItem[0];e&&(e.setAttribute("tabindex",-1),e.classList.remove("active"))}},{key:"_scrollToItem",value:function(e){var t=this.$content[0],n=t.scrollTop,r=t.clientHeight,i=e.position().top+n,o=e.outerHeight();i<n?e.is(":first-child")?t.scrollTo(0,0):t.scrollTo(0,i-15):i+o>n+r-25&&t.scrollTo(0,i+o-r+25)}},{key:"_applyShade",value:function(){var e=this.$content[0];this.$outerContent.toggleClass("is-overflowed-above",0!==e.scrollTop),this.$outerContent.toggleClass("is-overflowed-below",e.scrollTop+e.clientHeight!==e.scrollHeight)}},{key:"_onBlur",value:(a=o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isIndexMode){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l()();case 4:this.$input.is(":focus")||this.$activeItem.is(":focus")||this.cancel();case 5:case"end":return e.stop()}}),e,this)})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=a.apply(e,t);function o(e){_(i,n,r,o,s,"next",e)}function s(e){_(i,n,r,o,s,"throw",e)}o(void 0)}))},function(){return u.apply(this,arguments)})},{key:"_toggleGlobalSearch",value:function(){var t=this,n=this.isActive&&(!this.isIndexMode||this.isIndexMode&&Object.isEmpty(this.phrase));e(".l-top_menu-v2").toggleClass("is-search-focus",this.isActive).toggleClass("is-search-shade",n),e(".b-shade").off("click",(function(){return t.cancel()})),n&&e(".b-shade").on("click",(function(){return t.cancel()}))}},{key:"_onGlobalSlash",value:function(e){var t=e.target||e.srcElement;t.isContentEditable||"INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||(e.preventDefault(),e.stopImmediatePropagation(),this.$input.focus(),this.$input[0].setSelectionRange(0,this.$input[0].value.length))}},{key:"_onEnter",value:function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!this.isIndexMode&&this.phrase.trim())if(this.isStubbedSearchMode){var t=this.$activeItem[0];t&&this.pick(t)}else{var n,r=this.$activeItem.find(".name .b-link");n=this.$activeItem.length&&r.length?r.attr("href"):new c.a(this.$node.data("search_".concat(this.currentMode,"_url"))).query.set("search",this.phrase||null).toString(),s.a.visit(n)}}},{key:"_onEsc",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),this.cancel()}},{key:"_onMoveUp",value:function(e){var t=this.$activeItem.prev()[0];this.isActive&&(e.preventDefault(),e.stopImmediatePropagation()),t?this._selectItem(t,!0):this.isSearching&&(this._deselectItems(),this.$input.focus())}},{key:"_onMoveDown",value:function(e){var t=this.$activeItem,n=t.length?t.next()[0]:this.$content.find(C).first()[0];this.isActive&&(e.preventDefault(),e.stopImmediatePropagation()),n&&this._selectItem(n,!0)}},{key:"_tryCloseOnFocus",value:function(t){var n=t.target,r=e(n);n!==this.root&&!r.closest(this.$root).length&&r.parents("html").length&&this.cancel()}}],r&&b(n.prototype,r),i&&b(n,i),Object.defineProperty(n,"prototype",{writable:!1}),d}(d.a),O(r.prototype,"_deactivate",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_deactivate"),r.prototype),O(r.prototype,"_applyShade",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_applyShade"),r.prototype),O(r.prototype,"_onBlur",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onBlur"),r.prototype),O(r.prototype,"_onGlobalSlash",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onGlobalSlash"),r.prototype),O(r.prototype,"_onEnter",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onEnter"),r.prototype),O(r.prototype,"_onEsc",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onEsc"),r.prototype),O(r.prototype,"_onMoveUp",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onMoveUp"),r.prototype),O(r.prototype,"_onMoveDown",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_onMoveDown"),r.prototype),O(r.prototype,"_tryCloseOnFocus",[p.a],Object.getOwnPropertyDescriptor(r.prototype,"_tryCloseOnFocus"),r.prototype),r)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},"./app/packs/javascripts/views/search/index_engine.js":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return h}));var i=n("./node_modules/@babel/runtime/regenerator/index.js"),o=n.n(i),a=n("./node_modules/tiny-uri/dist/tiny-uri.js"),s=n("./node_modules/throttle-debounce/esm/index.js"),c=n("./node_modules/p-defer/index.js"),u=n("./node_modules/shiki-utils/index.js"),l=n("./app/packs/javascripts/services/ajax_cacher.js"),p=n("./app/packs/javascripts/utils/jst.js");function d(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function t(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.searchDeferred=void 0,this.isAutocomplete=!1,this.debouncedSearch=Object(s.a)(250,(function(t){return e._search(t)}))}var n,i,h,v,m;return n=t,i=[{key:"cancel",value:function(){this.phrase=""}},{key:"search",value:function(e){return this.phrase=e,this.searchDeferred.promise}},{key:"$content",get:function(){return e(".b-search-results")}},{key:"phrase",get:function(){return this._phrase},set:function(e){this._phrase=e,this._buildSearchPromise(),void 0!==this.phrase?(this._showAjax(),Object.isEmpty(this.phrase)?this._search(this.phrase):this.debouncedSearch(this.phrase)):this._resolveSearchPromise()}},{key:"_search",value:(v=o.a.mark((function e(t){var n,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.fetch(this._searchUrl(t));case 2:if(n=e.sent,i=n.data,200===(a=n.status)||451===a){e.next=10;break}return u.flash.error(r.t("frontend.lib.please_try_again_later")),this._hideAjax(),this._resolveSearchPromise(),e.abrupt("return");case 10:t===this.phrase&&(this._changeUrl(t),this._processResponse(i)),this._hideAjax(),this._resolveSearchPromise();case 13:case"end":return e.stop()}}),e,this)})),m=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=v.apply(e,t);function o(e){d(i,n,r,o,a,"next",e)}function a(e){d(i,n,r,o,a,"throw",e)}o(void 0)}))},function(e){return m.apply(this,arguments)})},{key:"_processResponse",value:function(e){this.$content.html(this._responseToHtml(e)).process(e.JS_EXPORTS)}},{key:"_responseToHtml",value:function(e){return e.content?e.content+(e.postloader||""):Object.isEmpty(this.phrase)?"":p.a["search/nothing_found"]({isAutocomplete:this.isAutocomplete})}},{key:"_searchUrl",value:function(e){return new a.a(window.location.href.replace(/\/page\/\d+/,"")).query.set("search",e||null).toString()}},{key:"_changeUrl",value:function(e){var t=this._searchUrl(e);window.history.replaceState({turbolinks:!0,url:t},"",t)}},{key:"_url",value:function(e,t){return new a.a(e).query.set("search",t||null).toString()}},{key:"_showAjax",value:function(){this.$content.addClass("b-ajax")}},{key:"_hideAjax",value:function(){this.$content.removeClass("b-ajax")}},{key:"_buildSearchPromise",value:function(){this.searchDeferred=Object(c.a)()}},{key:"_resolveSearchPromise",value:function(){this.searchDeferred&&(this.searchDeferred.resolve(),this.searchDeferred=void 0)}}],i&&f(n.prototype,i),h&&f(n,h),Object.defineProperty(n,"prototype",{writable:!1}),t}()}).call(this,n("./node_modules/jquery/dist/jquery.js"),n("./node_modules/i18n-js/app/assets/javascripts/i18n.js"))},"./app/packs/javascripts/views/wall/cluster.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.images=t,this.maxContainerWidth=n}var t,n,i;return t=e,i=[{key:"initClass",value:function(e){this.MARGIN=4}}],(n=[{key:"mason",value:function(e,t,n){var r=this;this.top=e,this.maxWidth=t,this.maxHeight=n,this.images.forEach((function(e){return e.normalize([r.maxWidth,r.maxContainerWidth].min(),r.maxHeight)})),this.images.forEach((function(e){return r._put(e)})),this.images.forEach((function(e){return e.apply()})),this.images.forEach((function(e){return e.toShikiImage()}))}},{key:"width",value:function(){return this.images.map((function(e){return e.left+e.width})).max()||0}},{key:"height",value:function(){return this.images.map((function(e){return e.top+e.height})).max()||0}},{key:"_positioned",value:function(){return this.images.filter((function(e){return e.positioned}))}},{key:"_put",value:function(t){var n=this._positioned().map((function(e){return e.left+e.width})).max();n?n+=e.MARGIN:n=0,t.position(n,this.top),this._flatten(),this._scale()}},{key:"_flatten",value:function(){var e=this,t=this._positioned();if(1!==t.length){var n=t.map((function(e){return e.height})),r=n.min();r!==n.max()&&(t.forEach((function(e){e.scaleHeight(r),e.positioned=!1})),t.forEach((function(t){return e._put(t)})))}}},{key:"_scale",value:function(){var t=this,n=this._positioned(),r=n.reduce((function(t,r,i){return t+r.width+(i===n.length-1?0:e.MARGIN)}),0);r>this.maxWidth&&(n.forEach((function(e){e.scale(t.maxWidth/r),e.positioned=!1})),n.forEach((function(e){return t._put(e)})))}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.initClass()},"./app/packs/javascripts/views/wall/image.js":function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}n.d(t,"a",(function(){return p}));var p=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(l,e);var t,n,i,u=c(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"initialize",value:function(){this.$image=this.$node.find("img");var e=r(this._imageSizes(),2);this.width=e[0],this.height=e[1];var t=r(Array.from([this.width,this.height]),2);this.originalWidth=t[0],this.originalHeight=t[1],this.ratio=this.width/this.height,this.reset()}},{key:"reset",value:function(){this.positioned=!1,this.left=0,this.top=0,this.width=this.originalWidth,this.height=this.originalHeight}},{key:"position",value:function(e,t){this.left=e,this.top=t,this.positioned=!0}},{key:"normalize",value:function(e,t){this.width>e&&this.scaleWidth(e),this.height>t&&this.scaleHeight(t)}},{key:"apply",value:function(){this.$image.css({width:this.width,height:this.height}),this.$node.css({top:this.top,left:this.left})}},{key:"destroy",value:function(){this.$node.removeAttr("style"),this.$image.removeAttr("style")}},{key:"scaleWidth",value:function(e){return this.height*=e/this.width,this.width=e}},{key:"scaleHeight",value:function(e){return this.width*=e/this.height,this.height=e}},{key:"scale",value:function(e){return this.width*=e,this.height*=e}},{key:"weight",value:function(){return this.ratio.round(1)}},{key:"toShikiImage",value:function(){this.$node.shikiImage()}},{key:"_imageSizes",value:function(){return[1*this.$image[0].naturalWidth,1*this.$image[0].naturalHeight]}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(n("./app/packs/javascripts/views/application/view.js").a)},"./app/packs/javascripts/views/wall/video.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("./app/packs/javascripts/views/wall/image.js");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},a.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d={default:1,"shrinked-1_3":.744,"shrinked-1_5":.8},f=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,n,r,s=u(l);function l(){return i(this,l),s.apply(this,arguments)}return t=l,(n=[{key:"initialize",value:function(){var e;this.ratioKey=(null===(e=this.node.className.match(/shrinked-\d_\d/))||void 0===e?void 0:e[0])||"default",a(p(l.prototype),"initialize",this).call(this)}},{key:"apply",value:function(){this.$image.css({width:this.width}),this.$node.css({top:this.top,left:this.left,width:this.width,height:this.height})}},{key:"toShikiImage",value:function(){}},{key:"_imageSizes",value:function(){return[1*this.$image[0].naturalWidth,1*this.$image[0].naturalHeight*this._heightRatio()]}},{key:"_heightRatio",value:function(){return d[this.ratioKey]}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.a)},"./app/packs/javascripts/views/wall/view.js":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n("./node_modules/@babel/runtime/regenerator/index.js"),i=n.n(r),o=n("./app/packs/javascripts/views/application/view.js"),a=n("./app/packs/javascripts/views/wall/cluster.js"),s=n("./app/packs/javascripts/views/wall/image.js"),c=n("./app/packs/javascripts/views/wall/video.js"),u=n("./app/packs/javascripts/utils/load_image.js");function l(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var y=0,_=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(g,t);var n,r,o,v,m,_=h(g);function g(){return p(this,g),_.apply(this,arguments)}return n=g,r=[{key:"initialize",value:(v=i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},this.id=y,y+=1,this.isOneCluster=t.isOneCluster,this.minClusterHeight=void 0!==t.isOneCluster?t.minClusterHeight:80,this.maxWidth=t.maxWidth,this.maxHeight=t.maxHeight,void 0!==t.awaitImagesLoaded&&!t.awaitImagesLoaded){e.next=10;break}return e.next=10,Object(u.d)(this.node);case 10:this._prepare(),this._buildClusters(),this._mason(),this._toShikiImages();case 14:case"end":return e.stop()}}),e,this)})),m=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=v.apply(e,t);function o(e){l(i,n,r,o,a,"next",e)}function a(e){l(i,n,r,o,a,"throw",e)}o(void 0)}))},function(){return m.apply(this,arguments)})},{key:"isTwoClusters",get:function(){return!this.isOneCluster&&this.images.sum((function(e){return e.weight()}))>5.8}},{key:"update",value:function(){}},{key:"destroy",value:function(){this.$node.removeAttr("style"),this.images.forEach((function(e){return e.destroy()}))}},{key:"_prepare",value:function(){this.$node.removeAttr("style"),this.maxContainerWidth=parseInt(this.$node.css("width")),this.maxHeight=this.maxHeight||parseInt(this.$node.css("max-height")),this.maxWidth=this.maxWidth||this.maxContainerWidth;var t=this.$node.find(".b-image, .b-video").attr({rel:"wall-".concat(this.id)});t.children().removeClass("check-width"),this.images=t.toArray().map((function(t){return t.classList.contains("b-video")?new c.a(e(t)):new s.a(e(t))}))}},{key:"_buildClusters",value:function(){if(this.isTwoClusters){var e=[],t=[];this.images.reduce((function(n,r){return n>2.5?t.push(r):e.push(r),n+r.weight()}),0),this.cluster_1=new a.a(e,this.maxContainerWidth),this.cluster_2=new a.a(t,this.maxContainerWidth)}else this.cluster=new a.a(this.images,this.maxContainerWidth)}},{key:"_mason",value:function(){var e,t;this.isTwoClusters?(this._masonSecondCluster(!1),t=[this.cluster_1.width(),this.cluster_2.width()].max(),e=this.cluster_1.height()+a.a.MARGIN+this.cluster_2.height()):(this._masonFirstCluster(),t=this.cluster.width(),e=this.cluster.height()),this.$node.css({width:[t,this.maxWidth,this.maxContainerWidth].min(),height:[e,this.maxHeight].min()})}},{key:"_clusterFirstHeight",value:function(){return[this.maxHeight-this.minClusterHeight,this.minClusterHeight].max()}},{key:"_clusterSecondHeight",value:function(){return[(this.maxHeight-this.cluster_1.height()+a.a.MARGIN).round(),this.minClusterHeight].max()}},{key:"_masonFirstCluster",value:function(){return this.cluster.mason(0,this.maxWidth,this.maxHeight)}},{key:"_masonSecondCluster",value:function(e){if(this.cluster_1.mason(0,this.maxWidth,this._clusterFirstHeight()),this.cluster_2.mason(this.cluster_1.height()+a.a.MARGIN,this.maxWidth,this._clusterSecondHeight()),e)this.$node.css("max-height",this.cluster_2.height()+a.a.MARGIN,+this.cluster_1.height());else{var t=(.95*this.maxWidth).round();(this.cluster_2.width()<t||this.cluster_1.width()<t)&&(this.maxHeight=(1.3*this.maxHeight).round(),this.$node.css("max-height",this.maxHeight),this.images.forEach((function(e){return e.reset()})),this._masonSecondCluster(!0))}}},{key:"_toShikiImages",value:function(){this.images.forEach((function(e){return e.toShikiImage()}))}}],r&&d(n.prototype,r),o&&d(n,o),Object.defineProperty(n,"prototype",{writable:!1}),g}(o.a)}).call(this,n("./node_modules/jquery/dist/jquery.js"))},0:function(e,t){}});
//# sourceMappingURL=application-2f9258fc5b6da13ed492.js.map